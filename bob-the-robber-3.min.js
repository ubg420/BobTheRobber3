!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.h5ads=global.h5ads||{})}(this,function(exports){"use strict";var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};var module,CocoonProvider,eventemitter3=(function(module){var has=Object.prototype.hasOwnProperty,prefix="~";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function addListener(emitter,event,fn,context,once){if("function"!=typeof fn)throw new TypeError("The listener must be a function");var listener=new EE(fn,context||emitter,once),evt=prefix?prefix+event:event;return emitter._events[evt]?emitter._events[evt].fn?emitter._events[evt]=[emitter._events[evt],listener]:emitter._events[evt].push(listener):(emitter._events[evt]=listener,emitter._eventsCount++),emitter}function clearEvent(emitter,evt){0==--emitter._eventsCount?emitter._events=new Events:delete emitter._events[evt]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event){var evt=prefix?prefix+event:event,handlers=this._events[evt];if(!handlers)return[];if(handlers.fn)return[handlers.fn];for(var i=0,l=handlers.length,ee=new Array(l);i<l;i++)ee[i]=handlers[i].fn;return ee},EventEmitter.prototype.listenerCount=function(event){var evt=prefix?prefix+event:event,listeners=this._events[evt];return listeners?listeners.fn?1:listeners.length:0},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){return addListener(this,event,fn,context,!1)},EventEmitter.prototype.once=function(event,fn,context){return addListener(this,event,fn,context,!0)},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return clearEvent(this,evt),this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||clearEvent(this,evt);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:clearEvent(this,evt)}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&clearEvent(this,evt)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter}(module={exports:{}},module.exports),module.exports);!function(CocoonProvider){CocoonProvider[CocoonProvider.AdMob=0]="AdMob",CocoonProvider[CocoonProvider.MoPub=1]="MoPub",CocoonProvider[CocoonProvider.Chartboost=2]="Chartboost",CocoonProvider[CocoonProvider.Heyzap=3]="Heyzap"}(CocoonProvider||(CocoonProvider={}));var GameDistributionAdType,GameDistributionBannerSize,GameDistributionAlignment,CocoonAds$$1=function(){function CocoonAds$$1(provider,config){if(this.adsEnabled=!1,this.bannerShowable=!1,this.interstitialShowable=!1,this.insentiveShowable=!1,Cocoon&&Cocoon.Ad){switch(this.adsEnabled=!0,provider){default:case CocoonProvider.AdMob:this.cocoonProvider=Cocoon.Ad.AdMob;break;case CocoonProvider.Chartboost:this.cocoonProvider=Cocoon.Ad.Chartboost;break;case CocoonProvider.Heyzap:this.cocoonProvider=Cocoon.Ad.Heyzap;break;case CocoonProvider.MoPub:this.cocoonProvider=Cocoon.Ad.MoPub}this.cocoonProvider.configure(config)}}return CocoonAds$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CocoonAds$$1.prototype.showAd=function(adType){if(this.adsEnabled){if(adType===exports.AdType.banner){if(!this.bannerShowable||null===this.banner)return;this.adManager.emit(exports.AdEvents.BANNER_SHOWN,this.banner.width,this.banner.height),this.adManager.bannerActive=!0,this.banner.show()}if(adType===exports.AdType.interstitial){if(!this.interstitialShowable||null===this.interstitial)return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.interstitial);this.interstitial.show()}if(adType===exports.AdType.rewarded){if(!this.insentiveShowable||null===this.insentive)return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.rewarded);this.insentive.show()}}else adType!==exports.AdType.banner&&this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CocoonAds$$1.prototype.adAvailable=function(adType){return!0},CocoonAds$$1.prototype.preloadAd=function(adType,adId,bannerPosition){var _this=this;this.adsEnabled&&(this.destroyAd(adType),adType===exports.AdType.banner&&(this.banner=this.cocoonProvider.createBanner(adId),bannerPosition&&this.banner.setLayout(bannerPosition),this.banner.on("load",function(){_this.bannerShowable=!0}),this.banner.on("fail",function(){_this.bannerShowable=!1,_this.banner=null}),this.banner.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.banner)}),this.banner.on("show",function(){}),this.banner.on("dismiss",function(){}),this.banner.load()),adType===exports.AdType.interstitial&&(this.interstitial=this.cocoonProvider.createInterstitial(adId),this.interstitial.on("load",function(){_this.interstitialShowable=!0}),this.interstitial.on("fail",function(){_this.interstitialShowable=!1,_this.interstitial=null}),this.interstitial.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.interstitial)}),this.interstitial.on("show",function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED,exports.AdType.interstitial)}),this.interstitial.on("dismiss",function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.interstitial),_this.interstitialShowable=!1,_this.interstitial=null}),this.interstitial.load()),adType===exports.AdType.rewarded&&(this.insentive=this.cocoonProvider.createRewardedVideo(adId),this.insentive.on("load",function(){_this.insentiveShowable=!0}),this.insentive.on("fail",function(){_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.on("click",function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,exports.AdType.rewarded)}),this.insentive.on("show",function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED,exports.AdType.rewarded)}),this.insentive.on("dismiss",function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,exports.AdType.rewarded),_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.on("reward",function(){_this.adManager.emit(exports.AdEvents.AD_REWARDED,exports.AdType.rewarded),_this.insentiveShowable=!1,_this.insentive=null}),this.insentive.load()))},CocoonAds$$1.prototype.destroyAd=function(adType){if(this.adsEnabled){if(adType===exports.AdType.banner&&null!==this.banner){try{this.cocoonProvider.releaseBanner(this.banner)}catch(e){}this.banner=null,this.bannerShowable=!1}adType===exports.AdType.interstitial&&null!==this.interstitial&&(this.cocoonProvider.releaseInterstitial(this.interstitial),this.interstitial=null,this.interstitialShowable=!1)}},CocoonAds$$1.prototype.hideAd=function(adType){this.adsEnabled&&(adType===exports.AdType.interstitial&&null!==this.interstitial&&this.interstitial.hide(),adType===exports.AdType.banner&&null!==this.banner&&(this.adManager.bannerActive&&(this.adManager.bannerActive=!1,this.adManager.emit(exports.AdEvents.BANNER_HIDDEN,this.banner.width,this.banner.height)),this.banner.hide()),adType===exports.AdType.rewarded&&null!==this.insentive&&this.insentive.hide())},CocoonAds$$1}(),CordovaGamedistribution$$1=function(){function CordovaGamedistribution$$1(gameId,userId,debug){void 0===debug&&(debug=!1),this.adsEnabled=!1,void 0===cordova.plugins||void 0!==cordova.plugins&&void 0===cordova.plugins.gdApi?console.log("gdApi not available!"):(debug&&cordova.plugins.gdApi.enableTestAds(),this.setAdListeners(),cordova.plugins.gdApi.init([gameId,userId],function(data){console.log("API init success!",data)},function(error){console.log("API init error!",error)}))}return CordovaGamedistribution$$1.prototype.setAdListeners=function(){var _this=this;cordova.plugins.gdApi.setAdListener(function(data){switch(console.log("banner reply, data.event",data.event,data),data.event){case"BANNER_STARTED":_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);break;case"API_IS_READY":_this.adsEnabled=!0;break;case"API_ALREADY_INITIALIZED":break;case"BANNER_CLOSED":case"API_NOT_READY":case"BANNER_FAILED":_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)}},function(error){console.log("Set listener error:",error),_this.adsEnabled=!1})},CordovaGamedistribution$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaGamedistribution$$1.prototype.showAd=function(adType){var _this=this;this.adsEnabled?(console.log("show banner called"),cordova.plugins.gdApi.showBanner(function(data){console.log("Show banner worked",data)},function(data){console.log("Could not show banner:",data),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)})):(console.log("Ads not enabled, resuming"),this.adManager.emit(exports.AdEvents.CONTENT_RESUMED))},CordovaGamedistribution$$1.prototype.adAvailable=function(adType){return!0},CordovaGamedistribution$$1.prototype.preloadAd=function(adType){},CordovaGamedistribution$$1.prototype.destroyAd=function(adType){},CordovaGamedistribution$$1.prototype.hideAd=function(adType){},CordovaGamedistribution$$1}(),CordovaGamedock$$1=function(){function CordovaGamedock$$1(){var _this=this;if(this.adsEnabled=!1,this.rewardedLoaded=!1,"undefined"!=typeof gamedockSDK){gamedockSDK.on("PrivacyPolicyStatus",function(data){_this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)}),gamedockSDK.initialise(!1,{shouldBlock:!0,requiredAge:12},!0,"PRODUCTION",[]),gamedockSDK.on("AdAvailable",function(data){switch(data.type){case"interstitial":_this.interstitalAvailable();break;case"rewardVideo":_this.rewardedChanged(!0);break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdNotAvailable",function(data){switch(data.type){case"interstitial":case"rewardVideo":_this.resumeGameplay();break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdFinished",function(data){switch(data.type){case"interstitial":_this.resumeGameplay();break;case"rewardVideo":_this.rewardVideoFinished(data.reason);break;case"banner":throw new Error("Not yet implemented.")}})}}return CordovaGamedock$$1.prototype.setManager=function(manager){this.adManager=manager},CordovaGamedock$$1.prototype.showAd=function(adType){if(void 0===adType&&(adType=exports.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(adType){case exports.AdType.interstitial:this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),gamedockSDK.requestInterstitial();break;case exports.AdType.rewarded:if(!this.adAvailable(exports.AdType.rewarded)){this.resumeGameplay();break}this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),this.rewardedChanged(!1),gamedockSDK.playRewardVideo();break;default:this.resumeGameplay()}},CordovaGamedock$$1.prototype.interstitalAvailable=function(){"undefined"!=typeof gamedockSDK&&gamedockSDK.playInterstitial()},CordovaGamedock$$1.prototype.rewardVideoFinished=function(reason){switch(reason){case"dismiss":this.resumeGameplay();break;case"close":this.adManager.emit(exports.AdEvents.AD_REWARDED)}},CordovaGamedock$$1.prototype.resumeGameplay=function(){this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CordovaGamedock$$1.prototype.preloadAd=function(adType){if(void 0===adType&&(adType=exports.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(adType){case exports.AdType.rewarded:if(this.rewardedLoaded)return;gamedockSDK.requestRewardVideo()}},CordovaGamedock$$1.prototype.destroyAd=function(){},CordovaGamedock$$1.prototype.hideAd=function(){},CordovaGamedock$$1.prototype.adAvailable=function(adType){switch(adType){case exports.AdType.rewarded:return this.rewardedLoaded}return!1},CordovaGamedock$$1.prototype.rewardedChanged=function(available){this.rewardedLoaded=available},CordovaGamedock$$1}(),CordovaHeyzap$$1=function(){function CordovaHeyzap$$1(publisherId){var _this=this;this.adsEnabled=!1,this.adsEnabled=!0,HeyzapAds.start(publisherId).then(function(){},function(e){_this.adsEnabled=!1})}return CordovaHeyzap$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaHeyzap$$1.prototype.showAd=function(adType,bannerAdPositions){var _this=this;switch(this.adsEnabled||this.adManager.emit(exports.AdEvents.CONTENT_RESUMED),adType){case exports.AdType.interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.interstitial:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){_this.adManager.emit(exports.AdEvents.AD_CLICKED,HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},function(e){_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)});break;case exports.AdType.banner:if(void 0===bannerAdPositions)return;HeyzapAds.BannerAd.show(bannerAdPositions).then(function(){},function(e){})}},CordovaHeyzap$$1.prototype.adAvailable=function(adType){return!0},CordovaHeyzap$$1.prototype.preloadAd=function(adType){this.adsEnabled&&adType===exports.AdType.rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(e){})},CordovaHeyzap$$1.prototype.destroyAd=function(adType){this.adsEnabled&&adType===exports.AdType.banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(e){})},CordovaHeyzap$$1.prototype.hideAd=function(adType){this.adsEnabled&&adType===exports.AdType.banner&&HeyzapAds.BannerAd.hide().then(function(){},function(e){})},CordovaHeyzap$$1}(),CordovaIronSource$$1=function(){function CordovaIronSource$$1(appKey){var _this=this;if(this.adsEnabled=!1,this.interstitialLoaded=!1,this.rewardedLoaded=!1,"undefined"!=typeof IronSourceAds){IronSourceAds.init({appKey:appKey});var resume=function(){return _this.resumeGameplay()};window.addEventListener("interstitialClosed",resume),window.addEventListener("interstitialShowFailed",resume),window.addEventListener("interstitialLoaded",function(){return _this.interstitialChanged(!0)}),window.addEventListener("rewardedVideoClosed",resume),window.addEventListener("rewardedVideoFailed",resume),IronSourceAds.hasRewardedVideo({onSuccess:this.rewardedChanged.bind(this)}),window.addEventListener("rewardedVideoAvailabilityChanged",function(event){return _this.rewardedChanged(event.available)})}}return CordovaIronSource$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},CordovaIronSource$$1.prototype.showAd=function(adType){switch(void 0===adType&&(adType=exports.AdType.interstitial),adType){case exports.AdType.interstitial:if(!this.interstitialLoaded){this.resumeGameplay();break}this.interstitialChanged(!1),this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),IronSourceAds.showInterstitial();break;case exports.AdType.rewarded:if(!this.rewardedLoaded){this.resumeGameplay();break}this.adManager.emit(exports.AdEvents.CONTENT_PAUSED),IronSourceAds.showRewardedVideo();break;default:this.resumeGameplay()}},CordovaIronSource$$1.prototype.resumeGameplay=function(){this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},CordovaIronSource$$1.prototype.preloadAd=function(adType){void 0===adType&&(adType=exports.AdType.interstitial),adType===exports.AdType.interstitial&&IronSourceAds.loadInterstitial()},CordovaIronSource$$1.prototype.destroyAd=function(){},CordovaIronSource$$1.prototype.hideAd=function(){},CordovaIronSource$$1.prototype.adAvailable=function(adType){switch(adType){case exports.AdType.interstitial:return this.interstitialLoaded;case exports.AdType.rewarded:return this.rewardedLoaded}return!1},CordovaIronSource$$1.prototype.interstitialChanged=function(available){this.interstitialLoaded=available},CordovaIronSource$$1.prototype.rewardedChanged=function(available){this.rewardedLoaded=available},CordovaIronSource$$1}();!function(GameDistributionAdType){GameDistributionAdType.interstitial="interstitial",GameDistributionAdType.rewarded="rewarded",GameDistributionAdType.display="display"}(GameDistributionAdType||(GameDistributionAdType={})),(GameDistributionBannerSize=exports.GameDistributionBannerSize||(exports.GameDistributionBannerSize={}))[GameDistributionBannerSize.LargeRectangle=0]="LargeRectangle",GameDistributionBannerSize[GameDistributionBannerSize.MediumRectangle=1]="MediumRectangle",GameDistributionBannerSize[GameDistributionBannerSize.Billboard=2]="Billboard",GameDistributionBannerSize[GameDistributionBannerSize.Leaderboard=3]="Leaderboard",GameDistributionBannerSize[GameDistributionBannerSize.Skyscraper=4]="Skyscraper",GameDistributionBannerSize[GameDistributionBannerSize.WideSkyscraper=5]="WideSkyscraper",(GameDistributionAlignment=exports.GameDistributionAlignment||(exports.GameDistributionAlignment={}))[GameDistributionAlignment.TopLeft=0]="TopLeft",GameDistributionAlignment[GameDistributionAlignment.TopCenter=1]="TopCenter",GameDistributionAlignment[GameDistributionAlignment.TopRight=2]="TopRight",GameDistributionAlignment[GameDistributionAlignment.CenterLeft=3]="CenterLeft",GameDistributionAlignment[GameDistributionAlignment.Center=4]="Center",GameDistributionAlignment[GameDistributionAlignment.CenterRight=5]="CenterRight",GameDistributionAlignment[GameDistributionAlignment.BottomLeft=6]="BottomLeft",GameDistributionAlignment[GameDistributionAlignment.BottomCenter=7]="BottomCenter",GameDistributionAlignment[GameDistributionAlignment.BottomRight=8]="BottomRight";var GoogleAdEvent,GameDistributionBanner$$1=function(){function GameDistributionBanner$$1(){this.scaleFactor=1,this.offsetX=0,this.offsetY=0,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.id="banner-"+Date.now()+(1e7*Math.random()|0),document.body.appendChild(this.element)}return GameDistributionBanner$$1.prototype.loadBanner=function(){return"undefined"==typeof gdsdk?Promise.reject("GD Sdk not available, probably due to adblocker"):gdsdk.showAd(GameDistributionAdType.display,{containerId:this.element.id})},GameDistributionBanner$$1.prototype.destroy=function(){document.body.removeChild(this.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),delete this.element,delete this.parent,delete this.alignment},GameDistributionBanner$$1.prototype.alignIn=function(element,position){var _this=this;this.parent?console.warn("Banner already aligned, ignoring..."):(this.parent=element,this.alignment=position,this.resizeListener=function(){return _this.resize()},window.addEventListener("resize",this.resizeListener),this.resize())},GameDistributionBanner$$1.prototype.setOffset=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.offsetX=x,this.offsetY=y,this.resize()},GameDistributionBanner$$1.prototype.resize=function(){if(this.parent){var parentBoundingRect=this.parent.getBoundingClientRect();switch(this.alignment){case exports.GameDistributionAlignment.TopLeft:this.position(parentBoundingRect.left,parentBoundingRect.top);break;case exports.GameDistributionAlignment.TopCenter:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top);break;case exports.GameDistributionAlignment.TopRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top);break;case exports.GameDistributionAlignment.CenterLeft:this.position(parentBoundingRect.left,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.Center:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.CenterRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top+parentBoundingRect.height/2-this.height*this.scaleFactor/2);break;case exports.GameDistributionAlignment.BottomLeft:this.position(parentBoundingRect.left,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor);break;case exports.GameDistributionAlignment.BottomCenter:this.position(parentBoundingRect.left+parentBoundingRect.width/2-this.width*this.scaleFactor/2,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor);break;case exports.GameDistributionAlignment.BottomRight:this.position(parentBoundingRect.left+parentBoundingRect.width-this.width*this.scaleFactor,parentBoundingRect.top+parentBoundingRect.height-this.height*this.scaleFactor)}}},GameDistributionBanner$$1.prototype.setSize=function(size){var width,height;switch(size){default:case exports.GameDistributionBannerSize.LargeRectangle:width=336,height=280;break;case exports.GameDistributionBannerSize.MediumRectangle:width=300,height=250;break;case exports.GameDistributionBannerSize.Billboard:width=970,height=250;break;case exports.GameDistributionBannerSize.Leaderboard:width=728,height=90;break;case exports.GameDistributionBannerSize.Skyscraper:width=120,height=600;break;case exports.GameDistributionBannerSize.WideSkyscraper:width=160,height=600}this.width=width,this.height=height,this.element.style.width=width+"px",this.element.style.height=height+"px"},GameDistributionBanner$$1.prototype.position=function(x,y){this.element.style.left=x+this.offsetX+"px",this.element.style.top=y+this.offsetY+"px"},GameDistributionBanner$$1.prototype.scale=function(factor){this.element.style.transformOrigin="left top",this.scaleFactor=factor,this.element.style.transform="scale("+factor+")"},GameDistributionBanner$$1}(),GameDistribution$$1=function(){function GameDistribution$$1(gameId){var d,s,id,js,fjs,_this=this;this.adsEnabled=!1,this.hasRewarded=!1,this.adShowing=!1,this.areAdsEnabled(),window.GD_OPTIONS={gameId:gameId,advertisementSettings:{autoplay:!1},onEvent:function(event){switch(event.name){case"SDK_GAME_PAUSE":_this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);break;case"SDK_READY":_this.sdkLoaded()}}},d=document,s="script",id="gamedistribution-jssdk",fjs=d.getElementsByTagName(s)[0],d.getElementById(id)||((js=d.createElement(s)).id=id,js.src="main.min.js",fjs.parentNode&&fjs.parentNode.insertBefore(js,fjs))}return GameDistribution$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},GameDistribution$$1.prototype.sdkLoaded=function(){var _this=this;this.areAdsEnabled().then(function(enabled){enabled&&(_this.adsEnabled=!0)})},GameDistribution$$1.prototype.showAd=function(adType){var _this=this;if(this.adsEnabled){if("undefined"==typeof gdsdk||gdsdk&&void 0===gdsdk.showAd)return this.adsEnabled=!1,void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);gdsdk.showAd(adType===exports.AdType.rewarded?GameDistributionAdType.rewarded:GameDistributionAdType.interstitial).then(function(){adType===exports.AdType.rewarded&&(_this.adManager.emit(exports.AdEvents.AD_REWARDED),_this.hasRewarded=!1),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)}).catch(function(){adType===exports.AdType.rewarded&&_this.hasRewarded&&(_this.hasRewarded=!1),_this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)})}else this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},GameDistribution$$1.prototype.createBanner=function(size){if(this.adsEnabled){var banner=new GameDistributionBanner$$1;return banner.setSize(size),banner}},GameDistribution$$1.prototype.loadBanner=function(size){if(this.adsEnabled){var banner=new GameDistributionBanner$$1;return banner.setSize(size),banner.loadBanner(),banner}},GameDistribution$$1.prototype.preloadAd=function(adType){var _this=this;!this.hasRewarded&&this.adsEnabled&&adType===exports.AdType.rewarded&&(console.log("preloading ad"),gdsdk.preloadAd(GameDistributionAdType.rewarded).then(function(){_this.hasRewarded=!0,_this.adManager.emit(exports.AdEvents.AD_LOADED,adType)}))},GameDistribution$$1.prototype.adAvailable=function(adType){return adType!==exports.AdType.rewarded||this.hasRewarded},GameDistribution$$1.prototype.destroyAd=function(){},GameDistribution$$1.prototype.hideAd=function(){},GameDistribution$$1.prototype.areAdsEnabled=function(){var test=document.createElement("div");test.innerHTML="&nbsp;",test.className="adsbox",test.style.position="absolute",test.style.fontSize="10px",document.body.appendChild(test);return new Promise(function(resolve){window.setTimeout(function(){var enabled;resolve((enabled=!0,0===test.offsetHeight&&(enabled=!1),test.parentNode&&test.parentNode.removeChild(test),enabled))},100)})},GameDistribution$$1}();!function(GoogleAdEvent){GoogleAdEvent[GoogleAdEvent.start=0]="start",GoogleAdEvent[GoogleAdEvent.firstQuartile=1]="firstQuartile",GoogleAdEvent[GoogleAdEvent.midPoint=2]="midPoint",GoogleAdEvent[GoogleAdEvent.thirdQuartile=3]="thirdQuartile",GoogleAdEvent[GoogleAdEvent.complete=4]="complete"}(GoogleAdEvent||(GoogleAdEvent={}));var AdEvents,AdType,Ima3$$1=function(){function Ima3$$1(canvas,adTagUrl){this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof canvas.parentElement?document.getElementById(canvas.parentElement):canvas.parentElement,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.adTagUrl=adTagUrl,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return Ima3$$1.prototype.setManager=function(manager){this.adManager=manager,this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED)},Ima3$$1.prototype.showAd=function(adType,customParams){if(console.log("Ad Requested"),!this.adRequested)if(this.adsEnabled||this.adManager.emit(exports.AdEvents.AD_DISABLED,!0),this.googleEnabled){this.adDisplay.initialize();var adsRequest=new google.ima.AdsRequest;adsRequest.adTagUrl=this.adTagUrl+this.parseCustomParams(customParams);var width=window.innerWidth,height=window.innerHeight;document.body.clientHeight<window.innerHeight&&(height=document.body.clientHeight,width=document.body.clientWidth),adsRequest.linearAdSlotWidth=width,adsRequest.linearAdSlotHeight=height,adsRequest.nonLinearAdSlotWidth=width,adsRequest.nonLinearAdSlotHeight=height,adsRequest.forceNonLinearFullSlot=!0;try{this.adRequested=!0,this.adLoader.requestAds(adsRequest)}catch(e){console.log(e),this.onContentResumeRequested()}}else this.onContentResumeRequested()},Ima3$$1.prototype.adAvailable=function(adType){return!0},Ima3$$1.prototype.preloadAd=function(){},Ima3$$1.prototype.destroyAd=function(){},Ima3$$1.prototype.hideAd=function(){},Ima3$$1.prototype.onAdManagerLoader=function(adsManagerLoadedEvent){var _this=this;console.log("AdsManager loaded");var adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0;var adsManager=adsManagerLoadedEvent.getAdsManager(this.gameContent,adsRenderingSettings);this.adsManager=adsManager,console.log(adsManager.isCustomClickTrackingUsed()),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(event){adsManager.addEventListener(event,_this.onAdEvent,!1,_this)});try{this.adContent.style.display="block";var width=window.innerWidth,height=window.innerHeight;this.adsManager.init(width,height,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){null!==_this.adsManager&&(console.log("Resizing ad size"),_this.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL))},window.addEventListener("resize",this.resizeListener)}catch(adError){console.log("Adsmanager error:",adError),this.onAdError(adError)}},Ima3$$1.prototype.onAdEvent=function(adEvent){switch(console.log("onAdEvent",adEvent),adEvent.type){case google.ima.AdEvent.Type.CLICK:this.adManager.emit(exports.AdEvents.AD_CLICKED);break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var ad=adEvent.getAd();console.log("is ad linear?",ad.isLinear()),ad.isLinear()||this.onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.emit(exports.AdEvents.AD_PROGRESSION,GoogleAdEvent.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},Ima3$$1.prototype.onAdError=function(error){console.log("gneric ad error",error),null!==this.adsManager&&(this.adsManager.destroy(),null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},Ima3$$1.prototype.onContentPauseRequested=function(){console.log("onContentPauseRequested",arguments),this.adManager.emit(exports.AdEvents.CONTENT_PAUSED)},Ima3$$1.prototype.onContentResumeRequested=function(){console.log("onContentResumeRequested",arguments),"undefined"!=typeof google&&(this.adContent.style.display="none"),this.adManager.emit(exports.AdEvents.CONTENT_RESUMED)},Ima3$$1.prototype.parseCustomParams=function(customParams){if(void 0===customParams)return"";var customDataString="";for(var key in customParams){if(customParams.hasOwnProperty(key))0<customDataString.length&&(customDataString+="&"),customDataString+=key+"="+(Array.isArray(customParams[key])?customParams[key].join(","):customParams[key])}return"&cust_params="+encodeURIComponent(customDataString)},Ima3$$1.prototype.areAdsEnabled=function(){var _this=this,test=document.createElement("div");test.innerHTML="&nbsp;",test.className="adsbox",test.style.position="absolute",test.style.fontSize="10px",document.body.appendChild(test);window.setTimeout(function(){var enabled;_this.adsEnabled=(enabled=!0,0===test.offsetHeight&&(enabled=!1),test.parentNode&&test.parentNode.removeChild(test),enabled)},100)},Ima3$$1}();(AdEvents=exports.AdEvents||(exports.AdEvents={})).CONTENT_PAUSED="onContentPaused",AdEvents.CONTENT_RESUMED="onContentResumed",AdEvents.AD_PROGRESSION="onAdProgression",AdEvents.AD_DISABLED="onAdsDisabled",AdEvents.AD_CLICKED="onAdClicked",AdEvents.AD_REWARDED="onAdRewardGranted",AdEvents.BANNER_SHOWN="onBannerShown",AdEvents.BANNER_HIDDEN="onBannerHidden",AdEvents.AD_LOADED="onAdLoaded",AdEvents.AD_PROVIDER_LOADED="onAdProviderLoaded",(AdType=exports.AdType||(exports.AdType={}))[AdType.interstitial=0]="interstitial",AdType[AdType.rewarded=1]="rewarded",AdType[AdType.banner=2]="banner";var H5AdWrapper=function(_super){function H5AdWrapper(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.bannerActive=!1,_this.provider=null,_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(H5AdWrapper,_super),H5AdWrapper.prototype.setAdProvider=function(provider){this.provider=provider,this.provider.setManager(this)},H5AdWrapper.prototype.showAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.showAd.apply(this.provider,args)},H5AdWrapper.prototype.createBanner=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return this.provider.loadBanner.apply(this.provider,args)},H5AdWrapper.prototype.loadBanner=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return this.provider.loadBanner.apply(this.provider,args)},H5AdWrapper.prototype.preloadAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.preloadAd.apply(this.provider,args)},H5AdWrapper.prototype.destroyAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.destroyAd.apply(this.provider,args)},H5AdWrapper.prototype.hideAd=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");args.unshift(adType),this.provider.hideAd.apply(this.provider,args)},H5AdWrapper.prototype.adsEnabled=function(){if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return this.provider.adsEnabled},H5AdWrapper.prototype.adAvailable=function(adType){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return args.unshift(adType),this.provider.adAvailable.apply(this.provider,args)},H5AdWrapper}(eventemitter3),adWrapper=new H5AdWrapper;exports.H5AdWrapper=H5AdWrapper,exports.adWrapper=adWrapper,exports.CocoonAds=CocoonAds$$1,exports.CordovaGamedistribution=CordovaGamedistribution$$1,exports.CordovaGamedock=CordovaGamedock$$1,exports.CordovaHeyzap=CordovaHeyzap$$1,exports.CordovaIronSource=CordovaIronSource$$1,exports.GameDistribution=GameDistribution$$1,exports.GameDistributionBanner=GameDistributionBanner$$1,exports.Ima3=Ima3$$1,Object.defineProperty(exports,"__esModule",{value:!0})}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(global.h5branding=global.h5branding||{})}(this,function(exports){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var BrandingDomain,list;createCommonjsModule(function(module,exports){module.exports=function(){function isFunction(x){return"function"==typeof x}var isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())},browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i],arg=queue[i+1];callback(arg),queue[i]=void 0,queue[i+1]=void 0}len=0}var channel,iterations,observer,node,scheduleFlush=void 0;function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop);return resolve(promise,object),promise}scheduleFlush=isNode?function(){return process.nextTick(flush)}:BrowserMutationObserver?(iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):isWorker?((channel=new MessageChannel).port1.onmessage=flush,function(){return channel.port2.postMessage(0)}):void 0===browserWindow?function(){try{var vertx=Function("return this")().require("vertx");return void 0===(vertxNext=vertx.runOnLoop||vertx.runOnContext)?useSetTimeout():function(){vertxNext(flush)}}catch(e){return useSetTimeout()}}():useSetTimeout();var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0,FULFILLED=1,REJECTED=2;function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?function(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?reject(promise,thenable._result):subscribe(thenable,void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}(promise,maybeThenable):void 0===then$$1?fulfill(promise,maybeThenable):isFunction(then$$1)?function(promise,thenable,then$$1){asap(function(promise){var sealed=!1,error=tryThen(then$$1,thenable,function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value):fulfill(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){if(promise===value)reject(promise,new TypeError("You cannot resolve a promise with itself"));else if(type=typeof(x=value),null===x||"object"!==type&&"function"!==type)fulfill(promise,value);else{var then$$1=void 0;try{then$$1=value.then}catch(error){return void reject(promise,error)}handleMaybeThenable(promise,value,then$$1)}var x,type}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+FULFILLED]=onFulfillment,_subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=!0;if(hasCallback){try{value=callback(detail)}catch(e){succeeded=!1,error=e}if(promise===value)return void reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail;promise._state!==PENDING||(hasCallback&&succeeded?resolve(promise,value):!1===succeeded?reject(promise,error):settled===FULFILLED?fulfill(promise,value):settled===REJECTED&&reject(promise,value))}var id=0;function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=void 0,error=void 0,didError=!1;try{_then=entry.then}catch(e){didError=!0,error=e}if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$1){var promise=new c(noop);didError?reject(promise,error):handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._remaining--,state===REJECTED?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}(),Promise$1=function(){function Promise(resolver){this[PROMISE_ID]=id++,this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function(promise,resolver){try{resolver(function(value){resolve(promise,value)},function(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}(this,resolver):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise.prototype.catch=function(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function(callback){var constructor=this.constructor;return isFunction(callback)?this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})}):this.then(callback,callback)},Promise}();return Promise$1.prototype.then=then,Promise$1.all=function(entries){return new Enumerator(this,entries).promise},Promise$1.race=function(entries){var Constructor=this;return isArray(entries)?new Constructor(function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)}):new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})},Promise$1.resolve=resolve$1,Promise$1.reject=function(reason){var promise=new this(noop);return reject(promise,reason),promise},Promise$1._setScheduler=function(scheduleFn){customSchedulerFn=scheduleFn},Promise$1._setAsap=function(asapFn){asap=asapFn},Promise$1._asap=asap,Promise$1.polyfill=function(){var local=void 0;if(void 0!==commonjsGlobal)local=commonjsGlobal;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$1},Promise$1.Promise=Promise$1}()}),createCommonjsModule(function(module,exports){module.exports=function(){function isFunction(x){return"function"==typeof x}var isArray=Array.isArray?Array.isArray:function(x){return"[object Array]"===Object.prototype.toString.call(x)},len=0,vertxNext=void 0,customSchedulerFn=void 0,asap=function(callback,arg){queue[len]=callback,queue[len+1]=arg,2===(len+=2)&&(customSchedulerFn?customSchedulerFn(flush):scheduleFlush())},browserWindow="undefined"!=typeof window?window:void 0,browserGlobal=browserWindow||{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,isNode="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),isWorker="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i],arg=queue[i+1];callback(arg),queue[i]=void 0,queue[i+1]=void 0}len=0}var channel,iterations,observer,node,scheduleFlush=void 0;function then(onFulfillment,onRejection){var parent=this,child=new this.constructor(noop);void 0===child[PROMISE_ID]&&makePromise(child);var _state=parent._state;if(_state){var callback=arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})}else subscribe(parent,child,onFulfillment,onRejection);return child}function resolve$1(object){if(object&&"object"==typeof object&&object.constructor===this)return object;var promise=new this(noop);return resolve(promise,object),promise}scheduleFlush=isNode?function(){return process.nextTick(flush)}:BrowserMutationObserver?(iterations=0,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),function(){node.data=iterations=++iterations%2}):isWorker?((channel=new MessageChannel).port1.onmessage=flush,function(){return channel.port2.postMessage(0)}):void 0===browserWindow?function(){try{var vertx=Function("return this")().require("vertx");return void 0===(vertxNext=vertx.runOnLoop||vertx.runOnContext)?useSetTimeout():function(){vertxNext(flush)}}catch(e){return useSetTimeout()}}():useSetTimeout();var PROMISE_ID=Math.random().toString(36).substring(2);function noop(){}var PENDING=void 0,FULFILLED=1,REJECTED=2;function tryThen(then$$1,value,fulfillmentHandler,rejectionHandler){try{then$$1.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleMaybeThenable(promise,maybeThenable,then$$1){maybeThenable.constructor===promise.constructor&&then$$1===then&&maybeThenable.constructor.resolve===resolve$1?function(promise,thenable){thenable._state===FULFILLED?fulfill(promise,thenable._result):thenable._state===REJECTED?reject(promise,thenable._result):subscribe(thenable,void 0,function(value){return resolve(promise,value)},function(reason){return reject(promise,reason)})}(promise,maybeThenable):void 0===then$$1?fulfill(promise,maybeThenable):isFunction(then$$1)?function(promise,thenable,then$$1){asap(function(promise){var sealed=!1,error=tryThen(then$$1,thenable,function(value){sealed||(sealed=!0,thenable!==value?resolve(promise,value):fulfill(promise,value))},function(reason){sealed||(sealed=!0,reject(promise,reason))},promise._label);!sealed&&error&&(sealed=!0,reject(promise,error))},promise)}(promise,maybeThenable,then$$1):fulfill(promise,maybeThenable)}function resolve(promise,value){if(promise===value)reject(promise,new TypeError("You cannot resolve a promise with itself"));else if(type=typeof(x=value),null===x||"object"!==type&&"function"!==type)fulfill(promise,value);else{var then$$1=void 0;try{then$$1=value.then}catch(error){return void reject(promise,error)}handleMaybeThenable(promise,value,then$$1)}var x,type}function publishRejection(promise){promise._onerror&&promise._onerror(promise._result),publish(promise)}function fulfill(promise,value){promise._state===PENDING&&(promise._result=value,promise._state=FULFILLED,0!==promise._subscribers.length&&asap(publish,promise))}function reject(promise,reason){promise._state===PENDING&&(promise._state=REJECTED,promise._result=reason,asap(publishRejection,promise))}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers,length=_subscribers.length;parent._onerror=null,_subscribers[length]=child,_subscribers[length+FULFILLED]=onFulfillment,_subscribers[length+REJECTED]=onRejection,0===length&&parent._state&&asap(publish,parent)}function publish(promise){var subscribers=promise._subscribers,settled=promise._state;if(0!==subscribers.length){for(var child=void 0,callback=void 0,detail=promise._result,i=0;i<subscribers.length;i+=3)child=subscribers[i],callback=subscribers[i+settled],child?invokeCallback(settled,child,callback,detail):callback(detail);promise._subscribers.length=0}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=void 0,error=void 0,succeeded=!0;if(hasCallback){try{value=callback(detail)}catch(e){succeeded=!1,error=e}if(promise===value)return void reject(promise,new TypeError("A promises callback cannot return that same promise."))}else value=detail;promise._state!==PENDING||(hasCallback&&succeeded?resolve(promise,value):!1===succeeded?reject(promise,error):settled===FULFILLED?fulfill(promise,value):settled===REJECTED&&reject(promise,value))}var id=0;function makePromise(promise){promise[PROMISE_ID]=id++,promise._state=void 0,promise._result=void 0,promise._subscribers=[]}var Enumerator=function(){function Enumerator(Constructor,input){this._instanceConstructor=Constructor,this.promise=new Constructor(noop),this.promise[PROMISE_ID]||makePromise(this.promise),isArray(input)?(this.length=input.length,this._remaining=input.length,this._result=new Array(this.length),0===this.length?fulfill(this.promise,this._result):(this.length=this.length||0,this._enumerate(input),0===this._remaining&&fulfill(this.promise,this._result))):reject(this.promise,new Error("Array Methods must be provided an Array"))}return Enumerator.prototype._enumerate=function(input){for(var i=0;this._state===PENDING&&i<input.length;i++)this._eachEntry(input[i],i)},Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor,resolve$$1=c.resolve;if(resolve$$1===resolve$1){var _then=void 0,error=void 0,didError=!1;try{_then=entry.then}catch(e){didError=!0,error=e}if(_then===then&&entry._state!==PENDING)this._settledAt(entry._state,i,entry._result);else if("function"!=typeof _then)this._remaining--,this._result[i]=entry;else if(c===Promise$1){var promise=new c(noop);didError?reject(promise,error):handleMaybeThenable(promise,entry,_then),this._willSettleAt(promise,i)}else this._willSettleAt(new c(function(resolve$$1){return resolve$$1(entry)}),i)}else this._willSettleAt(resolve$$1(entry),i)},Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;promise._state===PENDING&&(this._remaining--,state===REJECTED?reject(promise,value):this._result[i]=value),0===this._remaining&&fulfill(promise,this._result)},Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,void 0,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})},Enumerator}(),Promise$1=function(){function Promise(resolver){this[PROMISE_ID]=id++,this._result=this._state=void 0,this._subscribers=[],noop!==resolver&&("function"!=typeof resolver&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Promise?function(promise,resolver){try{resolver(function(value){resolve(promise,value)},function(reason){reject(promise,reason)})}catch(e){reject(promise,e)}}(this,resolver):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Promise.prototype.catch=function(onRejection){return this.then(null,onRejection)},Promise.prototype.finally=function(callback){var constructor=this.constructor;return isFunction(callback)?this.then(function(value){return constructor.resolve(callback()).then(function(){return value})},function(reason){return constructor.resolve(callback()).then(function(){throw reason})}):this.then(callback,callback)},Promise}();return Promise$1.prototype.then=then,Promise$1.all=function(entries){return new Enumerator(this,entries).promise},Promise$1.race=function(entries){var Constructor=this;return isArray(entries)?new Constructor(function(resolve,reject){for(var length=entries.length,i=0;i<length;i++)Constructor.resolve(entries[i]).then(resolve,reject)}):new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})},Promise$1.resolve=resolve$1,Promise$1.reject=function(reason){var promise=new this(noop);return reject(promise,reason),promise},Promise$1._setScheduler=function(scheduleFn){customSchedulerFn=scheduleFn},Promise$1._setAsap=function(asapFn){asap=asapFn},Promise$1._asap=asap,Promise$1.polyfill=function(){var local=void 0;if(void 0!==commonjsGlobal)local=commonjsGlobal;else if("undefined"!=typeof self)local=self;else try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if("[object Promise]"===promiseToString&&!P.cast)return}local.Promise=Promise$1},Promise$1.Promise=Promise$1}()}).polyfill();(BrandingDomain=exports.BrandingDomain||(exports.BrandingDomain={}))[BrandingDomain.Neutral=0]="Neutral",BrandingDomain[BrandingDomain.Yepi=1]="Yepi",BrandingDomain[BrandingDomain.Spele=2]="Spele",BrandingDomain[BrandingDomain.Funnygames=3]="Funnygames",BrandingDomain[BrandingDomain.Kizi=4]="Kizi",BrandingDomain[BrandingDomain.PlayCell=5]="PlayCell",BrandingDomain[BrandingDomain.GameCell=6]="GameCell",BrandingDomain[BrandingDomain.Bild=7]="Bild",BrandingDomain[BrandingDomain.Spil=8]="Spil",BrandingDomain[BrandingDomain.Admeen=9]="Admeen";var UtmTargets,Sld=function(){function Sld(){}return Sld.has=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||tldOffset-1<=sldOffset)return!1;var sldList=list[domain.slice(tldOffset+1)];return!!sldList&&0<=sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")},Sld.is=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;if(0<=domain.lastIndexOf(".",tldOffset-1))return!1;var sldList=list[domain.slice(tldOffset+1)];return!!sldList&&0<=sldList.indexOf(" "+domain.slice(0,tldOffset)+" ")},Sld.get=function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return null;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||tldOffset-1<=sldOffset)return null;var sldList=list[domain.slice(tldOffset+1)];return sldList?sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")<0?null:domain.slice(sldOffset+1):null},Sld}(),Domain=function(){function Domain(){}return Domain.setList=function(newList){list=newList||{}},Domain.getDomain=function(host){if(!list)return null;var t=host.match(/\./g);if(t&&t.length<2)return host;var tld=this.getTld(host);if(!tld)return null;var end=host.length-tld.length-1;return end=host.lastIndexOf(".",end-1)+1,host.substring(end)||""},Domain.getTld=function(host){if(!list)return"";var pos=host.lastIndexOf("."),tld=host.substring(pos+1);return list[tld.toLowerCase()]&&Sld.get(host)||tld},Domain.KEY="Domains",Domain}(),Loader=function(){function Loader(){this.cache={}}return Object.defineProperty(Loader,"instance",{get:function(){return void 0===Loader.classInstance&&(Loader.classInstance=new Loader),Loader.classInstance},enumerable:!0,configurable:!0}),Loader.prototype.load=function(key,url,contentType){var _this=this;return this.contains(key)?Promise.reject("Already in cache."):(this.cache[key]={url:url,data:null},this.requestXhr(url,contentType).then(function(data){return _this.loadComplete(key,data)}).catch(function(e){return _this.remove(key),Promise.reject(e)}))},Loader.prototype.loadComplete=function(key,data){if(!this.contains(key))return Promise.reject("Item was removed from cache before loading was complete.");try{var json=JSON.parse(data);return this.cache[key].data=json,Promise.resolve(json)}catch(error){return Promise.reject("There was an error parsing JSON file.")}},Loader.prototype.remove=function(key){this.contains(key)&&delete this.cache[key]},Loader.prototype.get=function(key){return this.contains(key)?this.cache[key].data:null},Loader.prototype.contains=function(key){return this.cache.hasOwnProperty(key)},Loader.prototype.isLoading=function(key){return this.contains(key)&&null===this.cache[key].data},Loader.prototype.isLoaded=function(key){return this.contains(key)&&null!==this.cache[key].data},Loader.prototype.loadScript=function(url,deferred,callback){return void 0===deferred&&(deferred=!0),new Promise(function(resolve,reject){var tag=document.createElement("script");tag.src=url,tag.async=!1,tag.onload=function(){"function"==typeof callback&&callback(),resolve()},document.head.appendChild(tag)})},Loader.prototype.requestXhr=function(url,contentType){var xhr;return void 0===contentType&&(contentType="application/json"),window.XMLHttpRequest?(xhr=new XMLHttpRequest,new Promise(function(resolve,reject){xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?(resolve(xhr.responseText),xhr.onreadystatechange=null):0<xhr.status&&(reject("There was a problem with the request: status "+xhr.status),xhr.onreadystatechange=null))};try{xhr.open("GET",url,!0),xhr.setRequestHeader("Content-Type",contentType),xhr.send()}catch(e){reject("Error: Unable to send request, CORS not allowed.")}})):Promise.reject("Unable to send request, XMLHttpRequest not supported.")},Loader}();function addScript(src,buster,callback){var s=document.createElement("script");s.setAttribute("src",src+"?v="+buster),"function"==typeof callback&&(s.onload=callback),document.body.appendChild(s)}(UtmTargets=exports.UtmTargets||(exports.UtmTargets={}))[UtmTargets.splashscreen=0]="splashscreen",UtmTargets[UtmTargets.logo=1]="logo",UtmTargets[UtmTargets.facebook=2]="facebook",UtmTargets[UtmTargets.twitter=3]="twitter",UtmTargets[UtmTargets.playstore=4]="playstore",UtmTargets[UtmTargets.appstore=5]="appstore",UtmTargets[UtmTargets.more_games=6]="more_games",UtmTargets[UtmTargets.download_game=7]="download_game",UtmTargets[UtmTargets.walkthrough=8]="walkthrough",UtmTargets[UtmTargets.disclaimer=9]="disclaimer",UtmTargets[UtmTargets.highscores=10]="highscores";var h,s,PortalScripts=function(){function PortalScripts(){}return PortalScripts.loadPortalScript=function(siteLockList){siteLockList&&siteLockList.hasOwnProperty("minijuegos")&&-1!==siteLockList.minijuegos.indexOf(Utils.getSourceSite())&&(void 0!==window.mpConfig?window.mpConfig.partner="orange-games":window.mpConfig={partner:"orange-games"},addScript("https://ext.minijuegosgratis.com/external-host/main.js",Date.now()/1e3)),siteLockList&&siteLockList.hasOwnProperty("kongregate")&&-1!==siteLockList.kongregate.indexOf(Utils.getSourceSite())&&addScript("https://cdn1.kongregate.com/javascripts/kongregate_api.js",Date.now()/1e3,function(){"undefined"!=typeof kongregateAPI&&kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI()})}),siteLockList&&siteLockList.hasOwnProperty("newgrounds")&&-1!==siteLockList.newgrounds.indexOf(Utils.getSourceSite())&&addScript("https://cdn.fbrq.io/@azerion/splash/assets/scripts/newgroundsio.min.js",Date.now()/1e3)},PortalScripts}(),Branding$$1=function(){function Branding$$1(){}return Branding$$1.preload=function(version){var promise=Promise.all([Loader.instance.load(Domain.KEY,Utils.ASSET_LOCATION+"json/domains.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.SITELOCK_PORTALS,Utils.ASSET_LOCATION+"json/sitelock.json?v="+version,"text/plain")]);return Promise.all([Loader.instance.load(Branding$$1.INTERNAL_PORTALS_KEY,Utils.ASSET_LOCATION+"json/internal.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.CONTRACTED_PORTALS_KEY,Utils.ASSET_LOCATION+"json/contracted.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.SPECIAL_PORTALS_KEY,Utils.ASSET_LOCATION+"json/special.json?v="+version,"text/plain"),Loader.instance.load(Branding$$1.GAME_ICONS_KEY,Utils.ASSET_LOCATION+"json/games.json?v="+version,"text/plain")]),promise.then(function(data){var domains=data[0],sitelock=data[1];Domain.setList(domains),PortalScripts.loadPortalScript(sitelock),Branding$$1.setSiteLock(sitelock)}).catch(function(){console.warn("Unable to parse json")})},Branding$$1.setSiteLock=function(data){Branding$$1.siteLocks=data},Object.defineProperty(Branding$$1,"brandingLogoUrl",{get:function(){var imageName;switch(Utils.isOnDevice()||Branding$$1.isAirfi()?Utils.ASSET_LOCATION="assets/":"fbrq.io"===Utils.getSourceSite(!0)&&(Utils.ASSET_LOCATION="https://"+window.location.host+"/@azerion/splash/assets/"),Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:imageName="spele";break;case exports.BrandingDomain.PlayCell:imageName="playcell";break;case exports.BrandingDomain.GameCell:imageName="gamecell";break;case exports.BrandingDomain.Yepi:imageName="yepi";break;case exports.BrandingDomain.Spil:imageName="spil";break;case exports.BrandingDomain.Admeen:imageName="admeen";break;case exports.BrandingDomain.Bild:imageName="bild";break;default:case exports.BrandingDomain.Kizi:imageName="kizi";break;case exports.BrandingDomain.Funnygames:imageName="funnygames"}return Utils.ASSET_LOCATION+"images/branding_logo_"+imageName+"_small.png"},enumerable:!0,configurable:!0}),Object.defineProperty(Branding$$1,"brandingBackgroundColor",{get:function(){var bgColor;switch(Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:bgColor="#4a72ad";break;case exports.BrandingDomain.PlayCell:bgColor="#52a1e1";break;case exports.BrandingDomain.GameCell:bgColor="#c600b2";break;case exports.BrandingDomain.Yepi:bgColor="#0573a7";break;case exports.BrandingDomain.Spil:bgColor="#0C486C";break;case exports.BrandingDomain.Admeen:bgColor="#4267B2";break;case exports.BrandingDomain.Bild:bgColor="#de0000";break;default:case exports.BrandingDomain.Kizi:bgColor="#012f50";break;case exports.BrandingDomain.Funnygames:bgColor="#33b0ff"}return bgColor},enumerable:!0,configurable:!0}),Branding$$1.openCampaignLink=function(gameTitle,type){if(!Utils.isOnDevice()&&!Branding$$1.isSpecial()&&Branding$$1.outGoingLinksAllowed()){var url,win,host=Utils.getSourceSite(),protocol=Utils.isOnDevice()?"https://":"//";switch(Utils.getBrandingDomain()){case exports.BrandingDomain.Spele:url=protocol+"www.spele.nl";break;case exports.BrandingDomain.Yepi:url=protocol+"www.yepi.com";break;case exports.BrandingDomain.Admeen:return url="https://media.admeen.com/branding/link.php",void((win=window.open(url,"_blank"))&&win.focus&&win.focus());case exports.BrandingDomain.PlayCell:url=protocol+"www.playcell.com";break;case exports.BrandingDomain.GameCell:url=protocol+"www.gamecell.com";break;default:case exports.BrandingDomain.Kizi:url="http://www.kizi.com";break;case exports.BrandingDomain.Bild:return void((win=window.open(protocol+"www.bildspielt.de","_blank"))&&win.focus&&win.focus());case exports.BrandingDomain.Funnygames:url=protocol+"www.funnygames.nu"}var utmContent="string"==typeof type?type:exports.UtmTargets[type];(win=window.open(url+"/?utm_source="+host+"&utm_medium=html5&utm_term="+gameTitle+"&utm_content="+utmContent+"&utm_campaign=Gamedistribution","_blank"))&&win.focus&&win.focus()}},Branding$$1.isInternal=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.INTERNAL_PORTALS_KEY))},Branding$$1.isContracted=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.CONTRACTED_PORTALS_KEY))},Branding$$1.isSpecial=function(){return Branding$$1.hostMatchesList(Loader.instance.get(Branding$$1.SPECIAL_PORTALS_KEY))},Branding$$1.isAdmeen=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("admeen"))return!1;var admeen=Branding$$1.siteLocks.admeen;return Branding$$1.hostMatchesList(admeen)},Branding$$1.isKongregate=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("kongregate"))return!1;var kongregate=Branding$$1.siteLocks.kongregate;return Branding$$1.hostMatchesList(kongregate)},Branding$$1.isNewgrounds=function(){if(!Branding$$1.siteLocks||!Branding$$1.siteLocks.hasOwnProperty("newgrounds"))return!1;var newgrounds=Branding$$1.siteLocks.newgrounds;return Branding$$1.hostMatchesList(newgrounds)},Branding$$1.isBild=function(){return"bild.fbrq.io"===window.location.host||-1!==window.location.host.indexOf("contentfleet.com")},Branding$$1.isPlaytime=function(){return-1!==window.location.host.indexOf("playtime.nl")},Branding$$1.isBip=function(){return-1!==window.location.search.indexOf("bipgaming")||"bip.fbrq.io"===window.location.host},Branding$$1.isPlaycellApp=function(){return-1!==window.location.search.indexOf("playcellApp")},Branding$$1.isSpil=function(){return-1!==document.referrer.indexOf("gameplayer.io")},Branding$$1.isAirfi=function(){return!!window.hasOwnProperty("airfi")&&window.airfi},Branding$$1.outGoingLinksAllowed=function(){return!(Branding$$1.isAirfi()||Branding$$1.isSpecial()||Branding$$1.isContracted())&&(!window.hasOwnProperty("fbrqLA")||window.fbrqLA)},Branding$$1.hostMatchesList=function(portals){portals=portals||[];for(var host=Utils.getSourceSite(),id=0;id<portals.length;id++)if(host===portals[id])return!0;return!1},Branding$$1.LOGO_KEY="branding_logo",Branding$$1.INTERNAL_PORTALS_KEY="branding_portals",Branding$$1.CONTRACTED_PORTALS_KEY="branding_contracted",Branding$$1.SPECIAL_PORTALS_KEY="branding_special",Branding$$1.SITELOCK_PORTALS="sitelock_portals",Branding$$1.GAME_ICONS_KEY="more_games",Branding$$1.DOMAIN_OVERWRITE=null,Branding$$1.analyticsEnabled=!0,Branding$$1}(),Utils=function(){function Utils(){}return Utils.getSourceSite=function(forceLocal){void 0===forceLocal&&(forceLocal=!1);var host=document.referrer||window.location.host;if(forceLocal&&(host=window.location.host),-1!==host.indexOf("embed.gamedistribution.com")&&-1!==window.location.search.indexOf("gd_sdk_referrer_url")&&(host=Utils.getUrlParameter("gd_sdk_referrer_url")||host),host=decodeURIComponent(host),Branding$$1.isBild())return"bildspielt.de";if(Branding$$1.isBip())return"bipgaming.com";Branding$$1.isSpil()&&(host=Utils.getReferrer(host)),host=(host=-1<host.indexOf("://")?host.split("/")[2]:host.split("/")[0]).split(":")[0];var newHost=Domain.getDomain(host);return null!==newHost?newHost:(3===host.split(".").length&&(host=host.substr(host.indexOf(".")+1)),host)},Utils.getBrandingDomain=function(){if(window.hasOwnProperty("fbrqBD")&&window.fbrqBD in exports.BrandingDomain)return window.fbrqBD;if(Branding$$1.DOMAIN_OVERWRITE)return Branding$$1.DOMAIN_OVERWRITE;var source=Utils.getSourceSite();if(Branding$$1.isAdmeen())return exports.BrandingDomain.Admeen;if(Branding$$1.isPlaycellApp()||Branding$$1.isBip())return exports.BrandingDomain.PlayCell;switch(source){case"spele.nl":return exports.BrandingDomain.Spele;case"yepi.com":return exports.BrandingDomain.Yepi;case"oyunskor.com":case"barbioyunu.com.tr":case"bebekoyunu.com.tr":case"oyunkolu.com":case"oyungemisi.com":case"oyunlar1.com":case"oyunkuzusu.com":case"kraloyun.com":case"rekoroyun.com":case"oyundedem.com":case"oyunoyna.com":case"pastaoyunu.com.tr":case"playcell.com":return exports.BrandingDomain.PlayCell;case"gamecell.com":return exports.BrandingDomain.GameCell;case"playxl.com":return exports.BrandingDomain.Admeen;default:case"kizi.com":return exports.BrandingDomain.Kizi;case"bildspielt.de":return exports.BrandingDomain.Bild;case"funnygames.nl":return exports.BrandingDomain.Funnygames}},Utils.getReferrer=function(host){return-1!==host.indexOf("?ref=")?host.substr(host.indexOf("?ref=")+5):host},Utils.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},Utils.inGDGameZone=function(){return-1!==document.referrer.indexOf("html5.gamedistribution.com")},Utils.getDomain=function(uri){var parser=document.createElement("a");return parser.href=uri,parser.origin},Utils.isOnDevice=function(){return void 0!==window.cordova&&!/(gamedistribution\.com)/.test(window.location.hostname)},Utils.isTc=function(){return/(teamcity\.azerdev\.com)/.test(window.location.host)},Utils.getRandomRange=function(min,max){return Math.random()*(max-min)+min|0},Utils.getUrlParameter=function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},Utils.intTimeToString=function(time){var hours=Math.floor(time/3600),minutes=Math.floor(time%3600/60),seconds=time%60;return(hours<10?"0"+hours:hours.toString())+":"+(minutes<10?"0"+minutes:minutes.toString())+":"+(seconds<10?"0"+seconds:seconds.toString())},Utils.ASSET_LOCATION=window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/":"https://cdn.fbrq.io/@azerion/splash/assets/",Utils}(),GoogleAnalytics=function(){function GoogleAnalytics(){}return GoogleAnalytics.preload=function(){return Branding$$1.analyticsEnabled?new Promise(function(resolve,reject){var i,s,o,g,r,a,m,protocol=Utils.isOnDevice()?"https://":"//";i=window,s=document,o="script",g=protocol+"www.google-analytics.com/analytics.js",r="ga",i.GoogleAnalyticsObject=r,i.ga=i.ga?i.ga:function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=Date.now(),a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m),resolve()}):Promise.resolve()},GoogleAnalytics.prototype.setup=function(analyticsId,appName,appVersion,trackerWrapper,sampleRate){if(void 0===trackerWrapper&&(trackerWrapper="auto"),void 0===sampleRate&&(sampleRate=100),!Branding$$1.analyticsEnabled)return null;if(ga("create",analyticsId,trackerWrapper,{sampleRate:sampleRate}),Utils.isOnDevice()&&ga("set","checkProtocolTask",null),void 0!==appName&&ga("set","appName",appName),void 0!==appName&&ga("set","appVersion",appVersion),ga("send","pageview"),"auto"!==trackerWrapper){var settings={name:"fbrq",sampleRate:1};for(var key in trackerWrapper)trackerWrapper.hasOwnProperty(key)&&(settings[key]=trackerWrapper[key]);ga("create","UA-60359297-50",settings)}else ga("create","UA-60359297-50",trackerWrapper,"fbrq",{sampleRate:1});if(Branding$$1.isSpil()){var referrer=Utils.getReferrer(decodeURIComponent(document.referrer));ga("fbrq.set","referrer",referrer),ga("set","referrer",referrer)}return Utils.isOnDevice()&&ga("fbrq.set","checkProtocolTask",null),ga("fbrq.set","appName","All"),ga("fbrq.send","pageview"),ga},GoogleAnalytics.prototype.sendScreenView=function(screenName){Branding$$1.analyticsEnabled&&["send","fbrq.send"].forEach(function(key){ga(key,"screenview",{screenName:screenName})})},GoogleAnalytics.prototype.sendGenericEvent=function(category,action,label){Branding$$1.analyticsEnabled&&["send","fbrq.send"].forEach(function(key){ga(key,"event",category,action,label)})},GoogleAnalytics}(),CryptoJS=CryptoJS||function(h,s){var f={},g=f.lib={},q=function(){},m=g.Base={extend:function(a){q.prototype=this;var c=new q;return a&&c.mixIn(a),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),(c.init.prototype=c).$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},r=g.WordArray=m.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=null!=c?c:4*a.length},toString:function(a){return(a||k).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;if(a=a.sigBytes,this.clamp(),b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-e%4*8&255)<<24-(b+e)%4*8;else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);return this.sigBytes+=a,this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-c%4*8,a.length=h.ceil(c/4)},clone:function(){var a=m.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new r.init(c,a)}}),l=f.enc={},k=l.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-b%4*8&255;d.push((e>>>4).toString(16)),d.push((15&e).toString(16))}return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,2),16)<<24-b%8*4;return new r.init(d,c/2)}},n=l.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-b%4*8&255));return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(255&a.charCodeAt(b))<<24-b%4*8;return new r.init(d,c)}},j=l.Utf8={stringify:function(a){try{return decodeURIComponent(escape(n.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return n.parse(unescape(encodeURIComponent(a)))}},u=g.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e);if(a=(f=a?h.ceil(f):h.max((0|f)-this._minBufferSize,0))*e,b=h.min(4*a,b),a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a),c.sigBytes-=b}return new r.init(g,b)},clone:function(){var a=m.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});g.Hasher=u.extend({cfg:m.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return new a.init(d).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return new t.HMAC.init(a,d).finalize(c)}}});var t=f.algo={};return f}(Math);!function(h){for(var s=CryptoJS,g=(f=s.lib).WordArray,q=f.Hasher,f=s.algo,m=[],r=[],l=function(a){return 4294967296*(a-(0|a))|0},k=2,n=0;n<64;){var j;a:{j=k;for(var u=h.sqrt(j),t=2;t<=u;t++)if(!(j%t)){j=!1;break a}j=!0}j&&(n<8&&(m[n]=l(h.pow(k,.5))),r[n]=l(h.pow(k,1/3)),n++),k++}var a=[];f=f.SHA256=q.extend({_doReset:function(){this._hash=new g.init(m.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],g=b[2],j=b[3],h=b[4],m=b[5],n=b[6],q=b[7],p=0;p<64;p++){if(p<16)a[p]=0|c[d+p];else{var k=a[p-15],l=a[p-2];a[p]=((k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3)+a[p-7]+((l<<15|l>>>17)^(l<<13|l>>>19)^l>>>10)+a[p-16]}k=q+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&m^~h&n)+r[p]+a[p],l=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&g^f&g),q=n,n=m,m=h,h=j+k|0,j=g,g=f,f=e,e=k+l|0}b[0]=b[0]+e|0,b[1]=b[1]+f|0,b[2]=b[2]+g|0,b[3]=b[3]+j|0,b[4]=b[4]+h|0,b[5]=b[5]+m|0,b[6]=b[6]+n|0,b[7]=b[7]+q|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;return d[e>>>5]|=128<<24-e%32,d[14+(e+64>>>9<<4)]=h.floor(b/4294967296),d[15+(e+64>>>9<<4)]=b,a.sigBytes=4*d.length,this._process(),this._hash},clone:function(){var a=q.clone.call(this);return a._hash=this._hash.clone(),a}});s.SHA256=q._createHelper(f),s.HmacSHA256=q._createHmacHelper(f)}(Math),s=(h=CryptoJS).enc.Utf8,h.algo.HMAC=h.lib.Base.extend({init:function(f,g){f=this._hasher=new f.init,"string"==typeof g&&(g=s.parse(g));var h=f.blockSize,m=4*h;g.sigBytes>m&&(g=f.finalize(g)),g.clamp();for(var r=this._oKey=g.clone(),l=this._iKey=g.clone(),k=r.words,n=l.words,j=0;j<h;j++)k[j]^=1549556828,n[j]^=909522486;r.sigBytes=l.sigBytes=m,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var g=this._hasher;return f=g.finalize(f),g.reset(),g.finalize(this._oKey.clone().concat(f))}}),function(){var h=CryptoJS,j=h.lib.WordArray;h.enc.Base64={stringify:function(b){var e=b.words,f=b.sigBytes,c=this._map;b.clamp(),b=[];for(var a=0;a<f;a+=3)for(var d=(e[a>>>2]>>>24-a%4*8&255)<<16|(e[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|e[a+2>>>2]>>>24-(a+2)%4*8&255,g=0;g<4&&a+.75*g<f;g++)b.push(c.charAt(d>>>6*(3-g)&63));if(e=c.charAt(64))for(;b.length%4;)b.push(e);return b.join("")},parse:function(b){var e=b.length,f=this._map;(c=f.charAt(64))&&(-1!=(c=b.indexOf(c))&&(e=c));for(var c=[],a=0,d=0;d<e;d++)if(d%4){var g=f.indexOf(b.charAt(d-1))<<d%4*2,h=f.indexOf(b.charAt(d))>>>6-d%4*2;c[a>>>2]|=(g|h)<<24-a%4*8,a++}return j.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(gameanalytics){!function(EGAErrorSeverity){EGAErrorSeverity[EGAErrorSeverity.Undefined=0]="Undefined",EGAErrorSeverity[EGAErrorSeverity.Debug=1]="Debug",EGAErrorSeverity[EGAErrorSeverity.Info=2]="Info",EGAErrorSeverity[EGAErrorSeverity.Warning=3]="Warning",EGAErrorSeverity[EGAErrorSeverity.Error=4]="Error",EGAErrorSeverity[EGAErrorSeverity.Critical=5]="Critical"}(gameanalytics.EGAErrorSeverity||(gameanalytics.EGAErrorSeverity={})),function(EGAGender){EGAGender[EGAGender.Undefined=0]="Undefined",EGAGender[EGAGender.Male=1]="Male",EGAGender[EGAGender.Female=2]="Female"}(gameanalytics.EGAGender||(gameanalytics.EGAGender={})),function(EGAProgressionStatus){EGAProgressionStatus[EGAProgressionStatus.Undefined=0]="Undefined",EGAProgressionStatus[EGAProgressionStatus.Start=1]="Start",EGAProgressionStatus[EGAProgressionStatus.Complete=2]="Complete",EGAProgressionStatus[EGAProgressionStatus.Fail=3]="Fail"}(gameanalytics.EGAProgressionStatus||(gameanalytics.EGAProgressionStatus={})),function(EGAResourceFlowType){EGAResourceFlowType[EGAResourceFlowType.Undefined=0]="Undefined",EGAResourceFlowType[EGAResourceFlowType.Source=1]="Source",EGAResourceFlowType[EGAResourceFlowType.Sink=2]="Sink"}(gameanalytics.EGAResourceFlowType||(gameanalytics.EGAResourceFlowType={})),function(http){!function(EGASdkErrorType){EGASdkErrorType[EGASdkErrorType.Undefined=0]="Undefined",EGASdkErrorType[EGASdkErrorType.Rejected=1]="Rejected"}(http.EGASdkErrorType||(http.EGASdkErrorType={})),function(EGAHTTPApiResponse){EGAHTTPApiResponse[EGAHTTPApiResponse.NoResponse=0]="NoResponse",EGAHTTPApiResponse[EGAHTTPApiResponse.BadResponse=1]="BadResponse",EGAHTTPApiResponse[EGAHTTPApiResponse.RequestTimeout=2]="RequestTimeout",EGAHTTPApiResponse[EGAHTTPApiResponse.JsonEncodeFailed=3]="JsonEncodeFailed",EGAHTTPApiResponse[EGAHTTPApiResponse.JsonDecodeFailed=4]="JsonDecodeFailed",EGAHTTPApiResponse[EGAHTTPApiResponse.InternalServerError=5]="InternalServerError",EGAHTTPApiResponse[EGAHTTPApiResponse.BadRequest=6]="BadRequest",EGAHTTPApiResponse[EGAHTTPApiResponse.Unauthorized=7]="Unauthorized",EGAHTTPApiResponse[EGAHTTPApiResponse.UnknownResponseCode=8]="UnknownResponseCode",EGAHTTPApiResponse[EGAHTTPApiResponse.Ok=9]="Ok"}(http.EGAHTTPApiResponse||(http.EGAHTTPApiResponse={}))}(gameanalytics.http||(gameanalytics.http={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;gameanalytics.EGAErrorSeverity,gameanalytics.EGAGender,gameanalytics.EGAProgressionStatus,gameanalytics.EGAResourceFlowType;!function(gameanalytics){!function(logging){var EGALoggerMessageType;!function(EGALoggerMessageType){EGALoggerMessageType[EGALoggerMessageType.Error=0]="Error",EGALoggerMessageType[EGALoggerMessageType.Warning=1]="Warning",EGALoggerMessageType[EGALoggerMessageType.Info=2]="Info",EGALoggerMessageType[EGALoggerMessageType.Debug=3]="Debug"}(EGALoggerMessageType||(EGALoggerMessageType={}));var GALogger=function(){function GALogger(){GALogger.debugEnabled=!1}return GALogger.setInfoLog=function(value){GALogger.instance.infoLogEnabled=value},GALogger.setVerboseLog=function(value){GALogger.instance.infoLogVerboseEnabled=value},GALogger.i=function(format){if(GALogger.instance.infoLogEnabled){var message="Info/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Info)}},GALogger.w=function(format){var message="Warning/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Warning)},GALogger.e=function(format){var message="Error/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Error)},GALogger.ii=function(format){if(GALogger.instance.infoLogVerboseEnabled){var message="Verbose/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Info)}},GALogger.d=function(format){if(GALogger.debugEnabled){var message="Debug/"+GALogger.Tag+": "+format;GALogger.instance.sendNotificationMessage(message,EGALoggerMessageType.Debug)}},GALogger.prototype.sendNotificationMessage=function(message,type){switch(type){case EGALoggerMessageType.Error:console.error(message);break;case EGALoggerMessageType.Warning:console.warn(message);break;case EGALoggerMessageType.Debug:"function"==typeof console.debug?console.debug(message):console.log(message);break;case EGALoggerMessageType.Info:console.log(message)}},GALogger.instance=new GALogger,GALogger.Tag="GameAnalytics",GALogger}();logging.GALogger=GALogger}(gameanalytics.logging||(gameanalytics.logging={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(utilities){var GALogger=gameanalytics.logging.GALogger,GAUtilities=function(){function GAUtilities(){}return GAUtilities.getHmac=function(key,data){var encryptedMessage=CryptoJS.HmacSHA256(data,key);return CryptoJS.enc.Base64.stringify(encryptedMessage)},GAUtilities.stringMatch=function(s,pattern){return!(!s||!pattern)&&pattern.test(s)},GAUtilities.joinStringArray=function(v,delimiter){for(var result="",i=0,il=v.length;i<il;i++)0<i&&(result+=delimiter),result+=v[i];return result},GAUtilities.stringArrayContainsString=function(array,search){if(0===array.length)return!1;for(var s in array)if(array[s]===search)return!0;return!1},GAUtilities.encode64=function(input){input=encodeURI(input);for(var chr1,chr2,enc1,enc2,enc3,output="",chr3=0,enc4=0,i=0;enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+GAUtilities.keyStr.charAt(enc1)+GAUtilities.keyStr.charAt(enc2)+GAUtilities.keyStr.charAt(enc3)+GAUtilities.keyStr.charAt(enc4),chr1=chr2=chr3=0,enc1=enc2=enc3=enc4=0,i<input.length;);return output},GAUtilities.decode64=function(input){var chr1,chr2,enc2,enc3,output="",chr3=0,enc4=0,i=0;for(/[^A-Za-z0-9\+\/\=]/g.exec(input)&&GALogger.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");chr1=GAUtilities.keyStr.indexOf(input.charAt(i++))<<2|(enc2=GAUtilities.keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=GAUtilities.keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=GAUtilities.keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3)),chr1=chr2=chr3=0,enc2=enc3=enc4=0,i<input.length;);return decodeURI(output)},GAUtilities.timeIntervalSince1970=function(){var date=new Date;return Math.round(date.getTime()/1e3)},GAUtilities.createGuid=function(){return(GAUtilities.s4()+GAUtilities.s4()+"-"+GAUtilities.s4()+"-4"+GAUtilities.s4().substr(0,3)+"-"+GAUtilities.s4()+"-"+GAUtilities.s4()+GAUtilities.s4()+GAUtilities.s4()).toLowerCase()},GAUtilities.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},GAUtilities.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",GAUtilities}();utilities.GAUtilities=GAUtilities}(gameanalytics.utilities||(gameanalytics.utilities={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(validators){var GALogger=gameanalytics.logging.GALogger,EGASdkErrorType=gameanalytics.http.EGASdkErrorType,GAUtilities=gameanalytics.utilities.GAUtilities,GAValidator=function(){function GAValidator(){}return GAValidator.validateBusinessEvent=function(currency,amount,cartType,itemType,itemId){return GAValidator.validateCurrency(currency)?amount<0?(GALogger.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+amount),!1):GAValidator.validateShortString(cartType,!0)?GAValidator.validateEventPartLength(itemType,!1)?GAValidator.validateEventPartCharacters(itemType)?GAValidator.validateEventPartLength(itemId,!1)?!!GAValidator.validateEventPartCharacters(itemId)||(GALogger.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemId),!1):(GALogger.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+itemId),!1):(GALogger.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemType),!1):(GALogger.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+itemType),!1):(GALogger.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+cartType),!1):(GALogger.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+currency),!1)},GAValidator.validateResourceEvent=function(flowType,currency,amount,itemType,itemId,availableCurrencies,availableItemTypes){return flowType==gameanalytics.EGAResourceFlowType.Undefined?(GALogger.w("Validation fail - resource event - flowType: Invalid flow type."),!1):currency?GAUtilities.stringArrayContainsString(availableCurrencies,currency)?0<amount?itemType?GAValidator.validateEventPartLength(itemType,!1)?GAValidator.validateEventPartCharacters(itemType)?GAUtilities.stringArrayContainsString(availableItemTypes,itemType)?GAValidator.validateEventPartLength(itemId,!1)?!!GAValidator.validateEventPartCharacters(itemId)||(GALogger.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemId),!1):(GALogger.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+itemId),!1):(GALogger.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+itemType),!1):(GALogger.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(GALogger.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+amount),!1):(GALogger.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+currency),!1):(GALogger.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},GAValidator.validateProgressionEvent=function(progressionStatus,progression01,progression02,progression03){if(progressionStatus==gameanalytics.EGAProgressionStatus.Undefined)return GALogger.w("Validation fail - progression event: Invalid progression status."),!1;if(progression03&&!progression02&&progression01)return GALogger.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(progression02&&!progression01)return GALogger.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!progression01)return GALogger.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!GAValidator.validateEventPartLength(progression01,!1))return GALogger.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+progression01),!1;if(!GAValidator.validateEventPartCharacters(progression01))return GALogger.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression01),!1;if(progression02){if(!GAValidator.validateEventPartLength(progression02,!0))return GALogger.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+progression02),!1;if(!GAValidator.validateEventPartCharacters(progression02))return GALogger.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression02),!1}if(progression03){if(!GAValidator.validateEventPartLength(progression03,!0))return GALogger.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+progression03),!1;if(!GAValidator.validateEventPartCharacters(progression03))return GALogger.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+progression03),!1}return!0},GAValidator.validateDesignEvent=function(eventId,value){return GAValidator.validateEventIdLength(eventId)?!!GAValidator.validateEventIdCharacters(eventId)||(GALogger.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+eventId),!1):(GALogger.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+eventId),!1)},GAValidator.validateErrorEvent=function(severity,message){return severity==gameanalytics.EGAErrorSeverity.Undefined?(GALogger.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!GAValidator.validateLongString(message,!0)||(GALogger.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},GAValidator.validateSdkErrorEvent=function(gameKey,gameSecret,type){return!!GAValidator.validateKeys(gameKey,gameSecret)&&(type!==EGASdkErrorType.Undefined||(GALogger.w("Validation fail - sdk error event - type: Type was unsupported value."),!1))},GAValidator.validateKeys=function(gameKey,gameSecret){return!(!GAUtilities.stringMatch(gameKey,/^[A-z0-9]{32}$/)||!GAUtilities.stringMatch(gameSecret,/^[A-z0-9]{40}$/))},GAValidator.validateCurrency=function(currency){return!!currency&&!!GAUtilities.stringMatch(currency,/^[A-Z]{3}$/)},GAValidator.validateEventPartLength=function(eventPart,allowNull){return!(!allowNull||eventPart)||!!eventPart&&!(64<eventPart.length)},GAValidator.validateEventPartCharacters=function(eventPart){return!!GAUtilities.stringMatch(eventPart,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},GAValidator.validateEventIdLength=function(eventId){return!!eventId&&!!GAUtilities.stringMatch(eventId,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},GAValidator.validateEventIdCharacters=function(eventId){return!!eventId&&!!GAUtilities.stringMatch(eventId,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},GAValidator.validateAndCleanInitRequestResponse=function(initResponse){if(null==initResponse)return GALogger.w("validateInitRequestResponse failed - no response dictionary."),null;var validatedDict={};try{validatedDict.enabled=initResponse.enabled}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var serverTsNumber=initResponse.server_ts;if(!(0<serverTsNumber))return GALogger.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;validatedDict.server_ts=serverTsNumber}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof initResponse.server_ts+", value="+initResponse.server_ts+", "+e),null}try{var configurations=initResponse.configurations;validatedDict.configurations=configurations}catch(e){return GALogger.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof initResponse.configurations+", value="+initResponse.configurations+", "+e),null}return validatedDict},GAValidator.validateBuild=function(build){return!!GAValidator.validateShortString(build,!1)},GAValidator.validateSdkWrapperVersion=function(wrapperVersion){return!!GAUtilities.stringMatch(wrapperVersion,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},GAValidator.validateEngineVersion=function(engineVersion){return!(!engineVersion||!GAUtilities.stringMatch(engineVersion,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},GAValidator.validateUserId=function(uId){return!!GAValidator.validateString(uId,!1)||(GALogger.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},GAValidator.validateShortString=function(shortString,canBeEmpty){return!(!canBeEmpty||shortString)||!(!shortString||32<shortString.length)},GAValidator.validateString=function(s,canBeEmpty){return!(!canBeEmpty||s)||!(!s||64<s.length)},GAValidator.validateLongString=function(longString,canBeEmpty){return!(!canBeEmpty||longString)||!(!longString||8192<longString.length)},GAValidator.validateConnectionType=function(connectionType){return GAUtilities.stringMatch(connectionType,/^(wwan|wifi|lan|offline)$/)},GAValidator.validateCustomDimensions=function(customDimensions){return GAValidator.validateArrayOfStrings(20,32,!1,"custom dimensions",customDimensions)},GAValidator.validateResourceCurrencies=function(resourceCurrencies){if(!GAValidator.validateArrayOfStrings(20,64,!1,"resource currencies",resourceCurrencies))return!1;for(var i=0;i<resourceCurrencies.length;++i)if(!GAUtilities.stringMatch(resourceCurrencies[i],/^[A-Za-z]+$/))return GALogger.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+resourceCurrencies[i]),!1;return!0},GAValidator.validateResourceItemTypes=function(resourceItemTypes){if(!GAValidator.validateArrayOfStrings(20,32,!1,"resource item types",resourceItemTypes))return!1;for(var i=0;i<resourceItemTypes.length;++i)if(!GAValidator.validateEventPartCharacters(resourceItemTypes[i]))return GALogger.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+resourceItemTypes[i]),!1;return!0},GAValidator.validateDimension01=function(dimension01,availableDimensions){return!dimension01||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension01)},GAValidator.validateDimension02=function(dimension02,availableDimensions){return!dimension02||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension02)},GAValidator.validateDimension03=function(dimension03,availableDimensions){return!dimension03||!!GAUtilities.stringArrayContainsString(availableDimensions,dimension03)},GAValidator.validateArrayOfStrings=function(maxCount,maxStringLength,allowNoValues,logTag,arrayOfStrings){var arrayTag=logTag;if(arrayTag||(arrayTag="Array"),!arrayOfStrings)return GALogger.w(arrayTag+" validation failed: array cannot be null. "),!1;if(0==allowNoValues&&0==arrayOfStrings.length)return GALogger.w(arrayTag+" validation failed: array cannot be empty. "),!1;if(0<maxCount&&arrayOfStrings.length>maxCount)return GALogger.w(arrayTag+" validation failed: array cannot exceed "+maxCount+" values. It has "+arrayOfStrings.length+" values."),!1;for(var i=0;i<arrayOfStrings.length;++i){var stringLength=arrayOfStrings[i]?arrayOfStrings[i].length:0;if(0===stringLength)return GALogger.w(arrayTag+" validation failed: contained an empty string. Array="+JSON.stringify(arrayOfStrings)),!1;if(0<maxStringLength&&maxStringLength<stringLength)return GALogger.w(arrayTag+" validation failed: a string exceeded max allowed length (which is: "+maxStringLength+"). String was: "+arrayOfStrings[i]),!1}return!0},GAValidator.validateFacebookId=function(facebookId){return!!GAValidator.validateString(facebookId,!1)||(GALogger.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},GAValidator.validateGender=function(gender){if(isNaN(Number(gameanalytics.EGAGender[gender]))){if(gender==gameanalytics.EGAGender.Undefined||gender!=gameanalytics.EGAGender.Male&&gender!=gameanalytics.EGAGender.Female)return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+gender),!1}else if(gender==gameanalytics.EGAGender[gameanalytics.EGAGender.Undefined]||gender!=gameanalytics.EGAGender[gameanalytics.EGAGender.Male]&&gender!=gameanalytics.EGAGender[gameanalytics.EGAGender.Female])return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+gender),!1;return!0},GAValidator.validateBirthyear=function(birthYear){return!(birthYear<0||9999<birthYear)||(GALogger.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},GAValidator.validateClientTs=function(clientTs){return!(clientTs<-4294967294||4294967294<clientTs)},GAValidator}();validators.GAValidator=GAValidator}(gameanalytics.validators||(gameanalytics.validators={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(device){var NameValueVersion=function(name,value,version){this.name=name,this.value=value,this.version=version};device.NameValueVersion=NameValueVersion;var NameVersion=function(name,version){this.name=name,this.version=version};device.NameVersion=NameVersion;var GADevice=function(){function GADevice(){}return GADevice.touch=function(){},GADevice.getRelevantSdkVersion=function(){return GADevice.sdkGameEngineVersion?GADevice.sdkGameEngineVersion:GADevice.sdkWrapperVersion},GADevice.getConnectionType=function(){return GADevice.connectionType},GADevice.updateConnectionType=function(){GADevice.connectionType=navigator.onLine?"ios"===GADevice.buildPlatform||"android"===GADevice.buildPlatform?"wwan":"lan":"offline"},GADevice.getOSVersionString=function(){return GADevice.buildPlatform+" "+GADevice.osVersionPair.version},GADevice.runtimePlatformToString=function(){return GADevice.osVersionPair.name},GADevice.getBrowserVersionString=function(){var tem,ua=navigator.userAgent,M=ua.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==M.length&&"ios"===GADevice.buildPlatform)return"webkit_"+GADevice.osVersion;if(/trident/i.test(M[1]))return"IE "+((tem=/\brv[ :]+(\d+)/g.exec(ua)||[])[1]||"");if("Chrome"===M[1]&&null!=(tem=ua.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return tem.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(M[1]&&"fbav"===M[1].toLowerCase()&&(M[1]="facebook",M[2]))return"facebook "+M[2];var MString=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(tem=ua.match(/version\/(\d+)/i))&&MString.splice(1,1,tem[1]),MString.join(" ").toLowerCase()},GADevice.getDeviceModel=function(){return"unknown"},GADevice.getDeviceManufacturer=function(){return"unknown"},GADevice.matchItem=function(agent,data){var regexv,matches,mathcesResult,version,result=new NameVersion("unknown","0.0.0"),i=0,j=0;for(i=0;i<data.length;i+=1)if(new RegExp(data[i].value,"i").test(agent)){if(regexv=new RegExp(data[i].version+"[- /:;]([\\d._]+)","i"),version="",(matches=agent.match(regexv))&&matches[1]&&(mathcesResult=matches[1]),mathcesResult){var matchesArray=mathcesResult.split(/[._]+/);for(j=0;j<Math.min(matchesArray.length,3);j+=1)version+=matchesArray[j]+(j<Math.min(matchesArray.length,3)-1?".":"")}else version="0.0.0";return result.name=data[i].name,result.version=version,result}return result},GADevice.sdkWrapperVersion="javascript 3.1.2",GADevice.osVersionPair=GADevice.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new NameValueVersion("windows_phone","Windows Phone","OS"),new NameValueVersion("windows","Win","NT"),new NameValueVersion("ios","iPhone","OS"),new NameValueVersion("ios","iPad","OS"),new NameValueVersion("ios","iPod","OS"),new NameValueVersion("android","Android","Android"),new NameValueVersion("blackBerry","BlackBerry","/"),new NameValueVersion("mac_osx","Mac","OS X"),new NameValueVersion("tizen","Tizen","Tizen"),new NameValueVersion("linux","Linux","rv")]),GADevice.buildPlatform=GADevice.runtimePlatformToString(),GADevice.deviceModel=GADevice.getDeviceModel(),GADevice.deviceManufacturer=GADevice.getDeviceManufacturer(),GADevice.osVersion=GADevice.getOSVersionString(),GADevice.browserVersion=GADevice.getBrowserVersionString(),GADevice.maxSafeInteger=Math.pow(2,53)-1,GADevice}();device.GADevice=GADevice}(gameanalytics.device||(gameanalytics.device={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var TimedBlock=function(){function TimedBlock(deadline){this.deadline=deadline,this.ignore=!1,this.async=!1,this.running=!1,this.id=++TimedBlock.idCounter}return TimedBlock.idCounter=0,TimedBlock}();threading.TimedBlock=TimedBlock}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var PriorityQueue=function(){function PriorityQueue(priorityComparer){this.comparer=priorityComparer,this._subQueues={},this._sortedKeys=[]}return PriorityQueue.prototype.enqueue=function(priority,item){-1===this._sortedKeys.indexOf(priority)&&this.addQueueOfPriority(priority),this._subQueues[priority].push(item)},PriorityQueue.prototype.addQueueOfPriority=function(priority){var _this=this;this._sortedKeys.push(priority),this._sortedKeys.sort(function(x,y){return _this.comparer.compare(x,y)}),this._subQueues[priority]=[]},PriorityQueue.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},PriorityQueue.prototype.hasItems=function(){return 0<this._sortedKeys.length},PriorityQueue.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},PriorityQueue.prototype.dequeueFromHighPriorityQueue=function(){var firstKey=this._sortedKeys[0],nextItem=this._subQueues[firstKey].shift();return 0===this._subQueues[firstKey].length&&(this._sortedKeys.shift(),delete this._subQueues[firstKey]),nextItem},PriorityQueue}();threading.PriorityQueue=PriorityQueue}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(store_1){var EGAStoreArgsOperator,EGAStore,GALogger=gameanalytics.logging.GALogger;!function(EGAStoreArgsOperator){EGAStoreArgsOperator[EGAStoreArgsOperator.Equal=0]="Equal",EGAStoreArgsOperator[EGAStoreArgsOperator.LessOrEqual=1]="LessOrEqual",EGAStoreArgsOperator[EGAStoreArgsOperator.NotEqual=2]="NotEqual"}(EGAStoreArgsOperator=store_1.EGAStoreArgsOperator||(store_1.EGAStoreArgsOperator={})),function(EGAStore){EGAStore[EGAStore.Events=0]="Events",EGAStore[EGAStore.Sessions=1]="Sessions",EGAStore[EGAStore.Progression=2]="Progression"}(EGAStore=store_1.EGAStore||(store_1.EGAStore={}));var GAStore=function(){function GAStore(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{GAStore.storageAvailable="object"==typeof localStorage&&(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),!0)}catch(e){}}return GAStore.isStorageAvailable=function(){return GAStore.storageAvailable},GAStore.isStoreTooLargeForEvents=function(){return GAStore.instance.eventsStore.length+GAStore.instance.sessionsStore.length>GAStore.MaxNumberOfEntries},GAStore.select=function(store,args,sort,maxCount){void 0===args&&(args=[]),void 0===sort&&(sort=!1),void 0===maxCount&&(maxCount=0);var currentStore=GAStore.getStore(store);if(!currentStore)return null;for(var result=[],i=0;i<currentStore.length;++i){for(var entry=currentStore[i],add=!0,j=0;j<args.length;++j){var argsEntry=args[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:add=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:add=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:add=entry[argsEntry[0]]!=argsEntry[2];break;default:add=!1}else add=!1;if(!add)break}add&&result.push(entry)}return sort&&result.sort(function(a,b){return a.client_ts-b.client_ts}),0<maxCount&&result.length>maxCount&&(result=result.slice(0,maxCount+1)),result},GAStore.update=function(store,setArgs,whereArgs){void 0===whereArgs&&(whereArgs=[]);var currentStore=GAStore.getStore(store);if(!currentStore)return!1;for(var i=0;i<currentStore.length;++i){for(var entry=currentStore[i],update=!0,j=0;j<whereArgs.length;++j){var argsEntry=whereArgs[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:update=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:update=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:update=entry[argsEntry[0]]!=argsEntry[2];break;default:update=!1}else update=!1;if(!update)break}if(update)for(j=0;j<setArgs.length;++j){var setArgsEntry=setArgs[j];entry[setArgsEntry[0]]=setArgsEntry[1]}}return!0},GAStore.delete=function(store,args){var currentStore=GAStore.getStore(store);if(currentStore)for(var i=0;i<currentStore.length;++i){for(var entry=currentStore[i],del=!0,j=0;j<args.length;++j){var argsEntry=args[j];if(entry[argsEntry[0]])switch(argsEntry[1]){case EGAStoreArgsOperator.Equal:del=entry[argsEntry[0]]==argsEntry[2];break;case EGAStoreArgsOperator.LessOrEqual:del=entry[argsEntry[0]]<=argsEntry[2];break;case EGAStoreArgsOperator.NotEqual:del=entry[argsEntry[0]]!=argsEntry[2];break;default:del=!1}else del=!1;if(!del)break}del&&(currentStore.splice(i,1),--i)}},GAStore.insert=function(store,newEntry,replace,replaceKey){void 0===replace&&(replace=!1),void 0===replaceKey&&(replaceKey=null);var currentStore=GAStore.getStore(store);if(currentStore)if(replace){if(!replaceKey)return;for(var replaced=!1,i=0;i<currentStore.length;++i){var entry=currentStore[i];if(entry[replaceKey]==newEntry[replaceKey]){for(var s in newEntry)entry[s]=newEntry[s];replaced=!0;break}}replaced||currentStore.push(newEntry)}else currentStore.push(newEntry)},GAStore.save=function(){GAStore.isStorageAvailable()?(localStorage.setItem(GAStore.KeyPrefix+GAStore.EventsStoreKey,JSON.stringify(GAStore.instance.eventsStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.SessionsStoreKey,JSON.stringify(GAStore.instance.sessionsStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.ProgressionStoreKey,JSON.stringify(GAStore.instance.progressionStore)),localStorage.setItem(GAStore.KeyPrefix+GAStore.ItemsStoreKey,JSON.stringify(GAStore.instance.storeItems))):GALogger.w("Storage is not available, cannot save.")},GAStore.load=function(){if(GAStore.isStorageAvailable()){try{GAStore.instance.eventsStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.EventsStoreKey)),GAStore.instance.eventsStore||(GAStore.instance.eventsStore=[])}catch(e){GALogger.w("Load failed for 'events' store. Using empty store."),GAStore.instance.eventsStore=[]}try{GAStore.instance.sessionsStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.SessionsStoreKey)),GAStore.instance.sessionsStore||(GAStore.instance.sessionsStore=[])}catch(e){GALogger.w("Load failed for 'sessions' store. Using empty store."),GAStore.instance.sessionsStore=[]}try{GAStore.instance.progressionStore=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.ProgressionStoreKey)),GAStore.instance.progressionStore||(GAStore.instance.progressionStore=[])}catch(e){GALogger.w("Load failed for 'progression' store. Using empty store."),GAStore.instance.progressionStore=[]}try{GAStore.instance.storeItems=JSON.parse(localStorage.getItem(GAStore.KeyPrefix+GAStore.ItemsStoreKey)),GAStore.instance.storeItems||(GAStore.instance.storeItems={})}catch(e){GALogger.w("Load failed for 'items' store. Using empty store."),GAStore.instance.progressionStore=[]}}else GALogger.w("Storage is not available, cannot load.")},GAStore.setItem=function(key,value){var keyWithPrefix=GAStore.KeyPrefix+key;value?GAStore.instance.storeItems[keyWithPrefix]=value:keyWithPrefix in GAStore.instance.storeItems&&delete GAStore.instance.storeItems[keyWithPrefix]},GAStore.getItem=function(key){var keyWithPrefix=GAStore.KeyPrefix+key;return keyWithPrefix in GAStore.instance.storeItems?GAStore.instance.storeItems[keyWithPrefix]:null},GAStore.getStore=function(store){switch(store){case EGAStore.Events:return GAStore.instance.eventsStore;case EGAStore.Sessions:return GAStore.instance.sessionsStore;case EGAStore.Progression:return GAStore.instance.progressionStore;default:return GALogger.w("GAStore.getStore(): Cannot find store: "+store),null}},GAStore.instance=new GAStore,GAStore.MaxNumberOfEntries=2e3,GAStore.KeyPrefix="GA::",GAStore.EventsStoreKey="ga_event",GAStore.SessionsStoreKey="ga_session",GAStore.ProgressionStoreKey="ga_progression",GAStore.ItemsStoreKey="ga_items",GAStore}();store_1.GAStore=GAStore}(gameanalytics.store||(gameanalytics.store={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(state){var GAValidator=gameanalytics.validators.GAValidator,GAUtilities=gameanalytics.utilities.GAUtilities,GALogger=gameanalytics.logging.GALogger,GAStore=gameanalytics.store.GAStore,GADevice=gameanalytics.device.GADevice,EGAStore=gameanalytics.store.EGAStore,EGAStoreArgsOperator=gameanalytics.store.EGAStoreArgsOperator,GAState=function(){function GAState(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return GAState.setUserId=function(userId){GAState.instance.userId=userId,GAState.cacheIdentifier()},GAState.getIdentifier=function(){return GAState.instance.identifier},GAState.isInitialized=function(){return GAState.instance.initialized},GAState.setInitialized=function(value){GAState.instance.initialized=value},GAState.getSessionStart=function(){return GAState.instance.sessionStart},GAState.getSessionNum=function(){return GAState.instance.sessionNum},GAState.getTransactionNum=function(){return GAState.instance.transactionNum},GAState.getSessionId=function(){return GAState.instance.sessionId},GAState.getCurrentCustomDimension01=function(){return GAState.instance.currentCustomDimension01},GAState.getCurrentCustomDimension02=function(){return GAState.instance.currentCustomDimension02},GAState.getCurrentCustomDimension03=function(){return GAState.instance.currentCustomDimension03},GAState.getGameKey=function(){return GAState.instance.gameKey},GAState.getGameSecret=function(){return GAState.instance.gameSecret},GAState.getAvailableCustomDimensions01=function(){return GAState.instance.availableCustomDimensions01},GAState.setAvailableCustomDimensions01=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions01=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom01 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableCustomDimensions02=function(){return GAState.instance.availableCustomDimensions02},GAState.setAvailableCustomDimensions02=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions02=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom02 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableCustomDimensions03=function(){return GAState.instance.availableCustomDimensions03},GAState.setAvailableCustomDimensions03=function(value){GAValidator.validateCustomDimensions(value)&&(GAState.instance.availableCustomDimensions03=value,GAState.validateAndFixCurrentDimensions(),GALogger.i("Set available custom03 dimension values: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableResourceCurrencies=function(){return GAState.instance.availableResourceCurrencies},GAState.setAvailableResourceCurrencies=function(value){GAValidator.validateResourceCurrencies(value)&&(GAState.instance.availableResourceCurrencies=value,GALogger.i("Set available resource currencies: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getAvailableResourceItemTypes=function(){return GAState.instance.availableResourceItemTypes},GAState.setAvailableResourceItemTypes=function(value){GAValidator.validateResourceItemTypes(value)&&(GAState.instance.availableResourceItemTypes=value,GALogger.i("Set available resource item types: ("+GAUtilities.joinStringArray(value,", ")+")"))},GAState.getBuild=function(){return GAState.instance.build},GAState.setBuild=function(value){GAState.instance.build=value,GALogger.i("Set build version: "+value)},GAState.getUseManualSessionHandling=function(){return GAState.instance.useManualSessionHandling},GAState.isEventSubmissionEnabled=function(){return GAState.instance._isEventSubmissionEnabled},GAState.prototype.setDefaultId=function(value){this.defaultUserId=value||"",GAState.cacheIdentifier()},GAState.getDefaultId=function(){return GAState.instance.defaultUserId},GAState.getSdkConfig=function(){var count=0;for(var json in GAState.instance.sdkConfig)0===count&&(first=json),++count;if(first&&0<count)return GAState.instance.sdkConfig;var first;count=0;for(var json in GAState.instance.sdkConfigCached)0===count&&(first=json),++count;return first&&0<count?GAState.instance.sdkConfigCached:GAState.instance.sdkConfigDefault},GAState.isEnabled=function(){var currentSdkConfig=GAState.getSdkConfig();return(!currentSdkConfig.enabled||"false"!=currentSdkConfig.enabled)&&!!GAState.instance.initAuthorized},GAState.setCustomDimension01=function(dimension){GAState.instance.currentCustomDimension01=dimension,GAStore.setItem(GAState.Dimension01Key,dimension),GALogger.i("Set custom01 dimension value: "+dimension)},GAState.setCustomDimension02=function(dimension){GAState.instance.currentCustomDimension02=dimension,GAStore.setItem(GAState.Dimension02Key,dimension),GALogger.i("Set custom02 dimension value: "+dimension)},GAState.setCustomDimension03=function(dimension){GAState.instance.currentCustomDimension03=dimension,GAStore.setItem(GAState.Dimension03Key,dimension),GALogger.i("Set custom03 dimension value: "+dimension)},GAState.setFacebookId=function(facebookId){GAState.instance.facebookId=facebookId,GAStore.setItem(GAState.FacebookIdKey,facebookId),GALogger.i("Set facebook id: "+facebookId)},GAState.setGender=function(gender){GAState.instance.gender=isNaN(Number(gameanalytics.EGAGender[gender]))?gameanalytics.EGAGender[gender].toString().toLowerCase():gameanalytics.EGAGender[gameanalytics.EGAGender[gender]].toString().toLowerCase(),GAStore.setItem(GAState.GenderKey,GAState.instance.gender),GALogger.i("Set gender: "+GAState.instance.gender)},GAState.setBirthYear=function(birthYear){GAState.instance.birthYear=birthYear,GAStore.setItem(GAState.BirthYearKey,birthYear.toString()),GALogger.i("Set birth year: "+birthYear)},GAState.incrementSessionNum=function(){var sessionNumInt=GAState.getSessionNum()+1;GAState.instance.sessionNum=sessionNumInt},GAState.incrementTransactionNum=function(){var transactionNumInt=GAState.getTransactionNum()+1;GAState.instance.transactionNum=transactionNumInt},GAState.incrementProgressionTries=function(progression){var tries=GAState.getProgressionTries(progression)+1;GAState.instance.progressionTries[progression]=tries;var values={};values.progression=progression,values.tries=tries,GAStore.insert(EGAStore.Progression,values,!0,"progression")},GAState.getProgressionTries=function(progression){return progression in GAState.instance.progressionTries?GAState.instance.progressionTries[progression]:0},GAState.clearProgressionTries=function(progression){progression in GAState.instance.progressionTries&&delete GAState.instance.progressionTries[progression];var parms=[];parms.push(["progression",EGAStoreArgsOperator.Equal,progression]),GAStore.delete(EGAStore.Progression,parms)},GAState.setKeys=function(gameKey,gameSecret){GAState.instance.gameKey=gameKey,GAState.instance.gameSecret=gameSecret},GAState.setManualSessionHandling=function(flag){GAState.instance.useManualSessionHandling=flag,GALogger.i("Use manual session handling: "+flag)},GAState.setEnabledEventSubmission=function(flag){GAState.instance._isEventSubmissionEnabled=flag},GAState.getEventAnnotations=function(){var annotations={v:2};annotations.user_id=GAState.instance.identifier,annotations.client_ts=GAState.getClientTsAdjusted(),annotations.sdk_version=GADevice.getRelevantSdkVersion(),annotations.os_version=GADevice.osVersion,annotations.manufacturer=GADevice.deviceManufacturer,annotations.device=GADevice.deviceModel,annotations.browser_version=GADevice.browserVersion,annotations.platform=GADevice.buildPlatform,annotations.session_id=GAState.instance.sessionId,annotations[GAState.SessionNumKey]=GAState.instance.sessionNum;var connection_type=GADevice.getConnectionType();return GAValidator.validateConnectionType(connection_type)&&(annotations.connection_type=connection_type),GADevice.gameEngineVersion&&(annotations.engine_version=GADevice.gameEngineVersion),GAState.instance.build&&(annotations.build=GAState.instance.build),GAState.instance.facebookId&&(annotations[GAState.FacebookIdKey]=GAState.instance.facebookId),GAState.instance.gender&&(annotations[GAState.GenderKey]=GAState.instance.gender),0!=GAState.instance.birthYear&&(annotations[GAState.BirthYearKey]=GAState.instance.birthYear),annotations},GAState.getSdkErrorEventAnnotations=function(){var annotations={v:2};annotations.category=GAState.CategorySdkError,annotations.sdk_version=GADevice.getRelevantSdkVersion(),annotations.os_version=GADevice.osVersion,annotations.manufacturer=GADevice.deviceManufacturer,annotations.device=GADevice.deviceModel,annotations.platform=GADevice.buildPlatform;var connection_type=GADevice.getConnectionType();return GAValidator.validateConnectionType(connection_type)&&(annotations.connection_type=connection_type),GADevice.gameEngineVersion&&(annotations.engine_version=GADevice.gameEngineVersion),annotations},GAState.getInitAnnotations=function(){var initAnnotations={};return initAnnotations.user_id=GAState.getIdentifier(),initAnnotations.sdk_version=GADevice.getRelevantSdkVersion(),initAnnotations.os_version=GADevice.osVersion,initAnnotations.platform=GADevice.buildPlatform,initAnnotations},GAState.getClientTsAdjusted=function(){var clientTs=GAUtilities.timeIntervalSince1970(),clientTsAdjustedInteger=clientTs+GAState.instance.clientServerTimeOffset;return GAValidator.validateClientTs(clientTsAdjustedInteger)?clientTsAdjustedInteger:clientTs},GAState.sessionIsStarted=function(){return 0!=GAState.instance.sessionStart},GAState.cacheIdentifier=function(){GAState.instance.userId?GAState.instance.identifier=GAState.instance.userId:GAState.instance.defaultUserId&&(GAState.instance.identifier=GAState.instance.defaultUserId)},GAState.ensurePersistedStates=function(){GAStore.isStorageAvailable()&&GAStore.load();var instance=GAState.instance;instance.setDefaultId(null!=GAStore.getItem(GAState.DefaultUserIdKey)?GAStore.getItem(GAState.DefaultUserIdKey):GAUtilities.createGuid()),instance.sessionNum=null!=GAStore.getItem(GAState.SessionNumKey)?Number(GAStore.getItem(GAState.SessionNumKey)):0,instance.transactionNum=null!=GAStore.getItem(GAState.TransactionNumKey)?Number(GAStore.getItem(GAState.TransactionNumKey)):0,instance.facebookId?GAStore.setItem(GAState.FacebookIdKey,instance.facebookId):(instance.facebookId=null!=GAStore.getItem(GAState.FacebookIdKey)?GAStore.getItem(GAState.FacebookIdKey):"",instance.facebookId),instance.gender?GAStore.setItem(GAState.GenderKey,instance.gender):(instance.gender=null!=GAStore.getItem(GAState.GenderKey)?GAStore.getItem(GAState.GenderKey):"",instance.gender),instance.birthYear&&0!=instance.birthYear?GAStore.setItem(GAState.BirthYearKey,instance.birthYear.toString()):(instance.birthYear=null!=GAStore.getItem(GAState.BirthYearKey)?Number(GAStore.getItem(GAState.BirthYearKey)):0,instance.birthYear),instance.currentCustomDimension01?GAStore.setItem(GAState.Dimension01Key,instance.currentCustomDimension01):(instance.currentCustomDimension01=null!=GAStore.getItem(GAState.Dimension01Key)?GAStore.getItem(GAState.Dimension01Key):"",instance.currentCustomDimension01),instance.currentCustomDimension02?GAStore.setItem(GAState.Dimension02Key,instance.currentCustomDimension02):(instance.currentCustomDimension02=null!=GAStore.getItem(GAState.Dimension02Key)?GAStore.getItem(GAState.Dimension02Key):"",instance.currentCustomDimension02),instance.currentCustomDimension03?GAStore.setItem(GAState.Dimension03Key,instance.currentCustomDimension03):(instance.currentCustomDimension03=null!=GAStore.getItem(GAState.Dimension03Key)?GAStore.getItem(GAState.Dimension03Key):"",instance.currentCustomDimension03);var sdkConfigCachedString=null!=GAStore.getItem(GAState.SdkConfigCachedKey)?GAStore.getItem(GAState.SdkConfigCachedKey):"";if(sdkConfigCachedString){var sdkConfigCached=JSON.parse(GAUtilities.decode64(sdkConfigCachedString));sdkConfigCached&&(instance.sdkConfigCached=sdkConfigCached)}var results_ga_progression=GAStore.select(EGAStore.Progression);if(results_ga_progression)for(var i=0;i<results_ga_progression.length;++i){var result=results_ga_progression[i];result&&(instance.progressionTries[result.progression]=result.tries)}},GAState.calculateServerTimeOffset=function(serverTs){return serverTs-GAUtilities.timeIntervalSince1970()},GAState.validateAndCleanCustomFields=function(fields){var result={};if(fields){var count=0;for(var key in fields){var value=fields[key];if(key&&value)if(count<GAState.MAX_CUSTOM_FIELDS_COUNT){var regex=new RegExp("^[a-zA-Z0-9_]{1,"+GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(GAUtilities.stringMatch(key,regex)){var type=typeof value;if("string"===type||value instanceof String){var valueAsString=value;valueAsString.length<=GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&0<valueAsString.length?(result[key]=valueAsString,++count):GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its value is an empty string or exceeds the max number of characters ("+GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===type||value instanceof Number){var valueAsNumber=value;result[key]=valueAsNumber,++count}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its value is not a string or number")}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because it exceeds the max number of custom fields ("+GAState.MAX_CUSTOM_FIELDS_COUNT+")");else GALogger.w("validateAndCleanCustomFields: entry with key="+key+", value="+value+" has been omitted because its key or value is null")}}return result},GAState.validateAndFixCurrentDimensions=function(){GAValidator.validateDimension01(GAState.getCurrentCustomDimension01(),GAState.getAvailableCustomDimensions01())||GAState.setCustomDimension01(""),GAValidator.validateDimension02(GAState.getCurrentCustomDimension02(),GAState.getAvailableCustomDimensions02())||GAState.setCustomDimension02(""),GAValidator.validateDimension03(GAState.getCurrentCustomDimension03(),GAState.getAvailableCustomDimensions03())||GAState.setCustomDimension03("")},GAState.getConfigurationStringValue=function(key,defaultValue){return GAState.instance.configurations[key]?GAState.instance.configurations[key].toString():defaultValue},GAState.isCommandCenterReady=function(){return GAState.instance.commandCenterIsReady},GAState.addCommandCenterListener=function(listener){GAState.instance.commandCenterListeners.indexOf(listener)<0&&GAState.instance.commandCenterListeners.push(listener)},GAState.removeCommandCenterListener=function(listener){var index=GAState.instance.commandCenterListeners.indexOf(listener);-1<index&&GAState.instance.commandCenterListeners.splice(index,1)},GAState.getConfigurationsContentAsString=function(){return JSON.stringify(GAState.instance.configurations)},GAState.populateConfigurations=function(sdkConfig){var configurations=sdkConfig.configurations;if(configurations)for(var i=0;i<configurations.length;++i){var configuration=configurations[i];if(configuration){var key=configuration.key,value=configuration.value,start_ts=configuration.start?configuration.start:Number.MIN_VALUE,end_ts=configuration.end?configuration.end:Number.MAX_VALUE,client_ts_adjusted=GAState.getClientTsAdjusted();key&&value&&start_ts<client_ts_adjusted&&client_ts_adjusted<end_ts&&(GAState.instance.configurations[key]=value)}}GAState.instance.commandCenterIsReady=!0;var listeners=GAState.instance.commandCenterListeners;for(i=0;i<listeners.length;++i)listeners[i]&&listeners[i].onCommandCenterUpdated()},GAState.CategorySdkError="sdk_error",GAState.MAX_CUSTOM_FIELDS_COUNT=50,GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,GAState.instance=new GAState,GAState.DefaultUserIdKey="default_user_id",GAState.SessionNumKey="session_num",GAState.TransactionNumKey="transaction_num",GAState.FacebookIdKey="facebook_id",GAState.GenderKey="gender",GAState.BirthYearKey="birth_year",GAState.Dimension01Key="dimension01",GAState.Dimension02Key="dimension02",GAState.Dimension03Key="dimension03",GAState.SdkConfigCachedKey="sdk_config_cached",GAState}();state.GAState=GAState}(gameanalytics.state||(gameanalytics.state={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(tasks){var GAUtilities=gameanalytics.utilities.GAUtilities,GALogger=gameanalytics.logging.GALogger,SdkErrorTask=function(){function SdkErrorTask(){}return SdkErrorTask.execute=function(url,type,payloadData,secretKey){if(SdkErrorTask.countMap[type]||(SdkErrorTask.countMap[type]=0),!(SdkErrorTask.countMap[type]>=SdkErrorTask.MaxCount)){var hashHmac=GAUtilities.getHmac(secretKey,payloadData),request=new XMLHttpRequest;request.onreadystatechange=function(){if(4===request.readyState){if(!request.responseText)return;if(200!=request.status)return void GALogger.w("sdk error failed. response code not 200. status code: "+request.status+", description: "+request.statusText+", body: "+request.responseText);SdkErrorTask.countMap[type]=SdkErrorTask.countMap[type]+1}},request.open("POST",url,!0),request.setRequestHeader("Content-Type","application/json"),request.setRequestHeader("Authorization",hashHmac);try{request.send(payloadData)}catch(e){console.error(e)}}},SdkErrorTask.MaxCount=10,SdkErrorTask.countMap={},SdkErrorTask}();tasks.SdkErrorTask=SdkErrorTask}(gameanalytics.tasks||(gameanalytics.tasks={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(http){var GAState=gameanalytics.state.GAState,GALogger=gameanalytics.logging.GALogger,GAUtilities=gameanalytics.utilities.GAUtilities,GAValidator=gameanalytics.validators.GAValidator,SdkErrorTask=gameanalytics.tasks.SdkErrorTask,GAHTTPApi=function(){function GAHTTPApi(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return GAHTTPApi.prototype.requestInit=function(callback){var gameKey=GAState.getGameKey(),url=(this.baseUrl,this.initializeUrlPath);url="https://rubick.gameanalytics.com/v2/command_center?game_key="+gameKey+"&interval_seconds=1000000";var initAnnotations=GAState.getInitAnnotations(),JSONstring=JSON.stringify(initAnnotations);if(JSONstring){var payloadData=this.createPayloadData(JSONstring,this.useGzip),extraArgs=[];extraArgs.push(JSONstring),GAHTTPApi.sendRequest(url,payloadData,extraArgs,this.useGzip,GAHTTPApi.initRequestCallback,callback)}else callback(http.EGAHTTPApiResponse.JsonEncodeFailed,null)},GAHTTPApi.prototype.sendEventsInArray=function(eventArray,requestId,callback){if(0!=eventArray.length){var gameKey=GAState.getGameKey(),url=this.baseUrl+"/"+gameKey+"/"+this.eventsUrlPath,JSONstring=JSON.stringify(eventArray);if(JSONstring){var payloadData=this.createPayloadData(JSONstring,this.useGzip),extraArgs=[];extraArgs.push(JSONstring),extraArgs.push(requestId),extraArgs.push(eventArray.length.toString()),GAHTTPApi.sendRequest(url,payloadData,extraArgs,this.useGzip,GAHTTPApi.sendEventInArrayRequestCallback,callback)}else callback(http.EGAHTTPApiResponse.JsonEncodeFailed,null,requestId,eventArray.length)}},GAHTTPApi.prototype.sendSdkErrorEvent=function(type){if(GAState.isEventSubmissionEnabled()){var gameKey=GAState.getGameKey(),secretKey=GAState.getGameSecret();if(GAValidator.validateSdkErrorEvent(gameKey,secretKey,type)){var payloadJSONString,url=this.baseUrl+"/"+gameKey+"/"+this.eventsUrlPath,json=GAState.getSdkErrorEventAnnotations(),typeString=GAHTTPApi.sdkErrorTypeToString(type);json.type=typeString;var eventArray=[];eventArray.push(json),(payloadJSONString=JSON.stringify(eventArray))?SdkErrorTask.execute(url,type,payloadJSONString,secretKey):GALogger.w("sendSdkErrorEvent: JSON encoding failed.")}}},GAHTTPApi.sendEventInArrayRequestCallback=function(request,url,callback,extra){void 0===extra&&(extra=null);extra[0],extra[1];var body,responseCode,requestId=extra[2],eventCount=parseInt(extra[3]);body=request.responseText,responseCode=request.status;var requestResponseEnum=GAHTTPApi.instance.processRequestResponse(responseCode,request.statusText,body,"Events");if(requestResponseEnum==http.EGAHTTPApiResponse.Ok||requestResponseEnum==http.EGAHTTPApiResponse.BadRequest){var requestJsonDict=body?JSON.parse(body):{};null!=requestJsonDict?(http.EGAHTTPApiResponse.BadRequest,callback(requestResponseEnum,requestJsonDict,requestId,eventCount)):callback(http.EGAHTTPApiResponse.JsonDecodeFailed,null,requestId,eventCount)}else callback(requestResponseEnum,null,requestId,eventCount)},GAHTTPApi.sendRequest=function(url,payloadData,extraArgs,gzip,callback,callback2){var request=new XMLHttpRequest,key=GAState.getGameSecret(),authorization=GAUtilities.getHmac(key,payloadData),args=[];for(var s in args.push(authorization),extraArgs)args.push(extraArgs[s]);if(request.onreadystatechange=function(){4===request.readyState&&callback(request,url,callback2,args)},request.open("POST",url,!0),request.setRequestHeader("Content-Type","text/plain"),request.setRequestHeader("Authorization",authorization),gzip)throw new Error("gzip not supported");try{request.send(payloadData)}catch(e){console.error(e.stack)}},GAHTTPApi.initRequestCallback=function(request,url,callback,extra){void 0===extra&&(extra=null);var body,responseCode;extra[0],extra[1];body=request.responseText,responseCode=request.status;var requestJsonDict=body?JSON.parse(body):{},requestResponseEnum=GAHTTPApi.instance.processRequestResponse(responseCode,request.statusText,body,"Init");if(requestResponseEnum==http.EGAHTTPApiResponse.Ok||requestResponseEnum==http.EGAHTTPApiResponse.BadRequest)if(null!=requestJsonDict)if(requestResponseEnum!==http.EGAHTTPApiResponse.BadRequest){var validatedInitValues=GAValidator.validateAndCleanInitRequestResponse(requestJsonDict);validatedInitValues?callback(http.EGAHTTPApiResponse.Ok,validatedInitValues,"",0):callback(http.EGAHTTPApiResponse.BadResponse,null,"",0)}else callback(requestResponseEnum,null,"",0);else callback(http.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else callback(requestResponseEnum,null,"",0)},GAHTTPApi.prototype.createPayloadData=function(payload,gzip){if(gzip)throw new Error("gzip not supported");return payload},GAHTTPApi.prototype.processRequestResponse=function(responseCode,responseMessage,body,requestId){return body?200===responseCode?http.EGAHTTPApiResponse.Ok:0===responseCode||401===responseCode?http.EGAHTTPApiResponse.Unauthorized:400===responseCode?http.EGAHTTPApiResponse.BadRequest:500===responseCode?http.EGAHTTPApiResponse.InternalServerError:http.EGAHTTPApiResponse.UnknownResponseCode:http.EGAHTTPApiResponse.NoResponse},GAHTTPApi.sdkErrorTypeToString=function(value){switch(value){case http.EGASdkErrorType.Rejected:return"rejected";default:return""}},GAHTTPApi.instance=new GAHTTPApi,GAHTTPApi}();http.GAHTTPApi=GAHTTPApi}(gameanalytics.http||(gameanalytics.http={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){var events_1,GAStore,EGAStore,EGAStoreArgsOperator,GAState,GALogger,GAUtilities,EGAHTTPApiResponse,GAHTTPApi,GAValidator,EGASdkErrorType,GAEvents;events_1=gameanalytics.events||(gameanalytics.events={}),GAStore=gameanalytics.store.GAStore,EGAStore=gameanalytics.store.EGAStore,EGAStoreArgsOperator=gameanalytics.store.EGAStoreArgsOperator,GAState=gameanalytics.state.GAState,GALogger=gameanalytics.logging.GALogger,GAUtilities=gameanalytics.utilities.GAUtilities,EGAHTTPApiResponse=gameanalytics.http.EGAHTTPApiResponse,GAHTTPApi=gameanalytics.http.GAHTTPApi,GAValidator=gameanalytics.validators.GAValidator,EGASdkErrorType=gameanalytics.http.EGASdkErrorType,GAEvents=function(){function GAEvents(){}return GAEvents.addSessionStartEvent=function(){if(GAState.isEventSubmissionEnabled()){var eventDict={};eventDict.category=GAEvents.CategorySessionStart,GAState.incrementSessionNum(),GAStore.setItem(GAState.SessionNumKey,GAState.getSessionNum().toString()),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addEventToStore(eventDict),GALogger.i("Add SESSION START event"),GAEvents.processEvents(GAEvents.CategorySessionStart,!1)}},GAEvents.addSessionEndEvent=function(){if(GAState.isEventSubmissionEnabled()){var session_start_ts=GAState.getSessionStart(),sessionLength=GAState.getClientTsAdjusted()-session_start_ts;sessionLength<0&&(GALogger.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),sessionLength=0);var eventDict={};eventDict.category=GAEvents.CategorySessionEnd,eventDict.length=sessionLength,GAEvents.addDimensionsToEvent(eventDict),GAEvents.addEventToStore(eventDict),GALogger.i("Add SESSION END event."),GAEvents.processEvents("",!1)}},GAEvents.addBusinessEvent=function(currency,amount,itemType,itemId,cartType,fields){if(void 0===cartType&&(cartType=null),GAState.isEventSubmissionEnabled())if(GAValidator.validateBusinessEvent(currency,amount,cartType,itemType,itemId)){var eventDict={};GAState.incrementTransactionNum(),GAStore.setItem(GAState.TransactionNumKey,GAState.getTransactionNum().toString()),eventDict.event_id=itemType+":"+itemId,eventDict.category=GAEvents.CategoryBusiness,eventDict.currency=currency,eventDict.amount=amount,eventDict[GAState.TransactionNumKey]=GAState.getTransactionNum(),cartType&&(eventDict.cart_type=cartType),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add BUSINESS event: {currency:"+currency+", amount:"+amount+", itemType:"+itemType+", itemId:"+itemId+", cartType:"+cartType+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addResourceEvent=function(flowType,currency,amount,itemType,itemId,fields){if(GAState.isEventSubmissionEnabled())if(GAValidator.validateResourceEvent(flowType,currency,amount,itemType,itemId,GAState.getAvailableResourceCurrencies(),GAState.getAvailableResourceItemTypes())){flowType===gameanalytics.EGAResourceFlowType.Sink&&(amount*=-1);var eventDict={},flowTypeString=GAEvents.resourceFlowTypeToString(flowType);eventDict.event_id=flowTypeString+":"+currency+":"+itemType+":"+itemId,eventDict.category=GAEvents.CategoryResource,eventDict.amount=amount,GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add RESOURCE event: {currency:"+currency+", amount:"+amount+", itemType:"+itemType+", itemId:"+itemId+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score,sendScore,fields){if(GAState.isEventSubmissionEnabled()){var progressionStatusString=GAEvents.progressionStatusToString(progressionStatus);if(GAValidator.validateProgressionEvent(progressionStatus,progression01,progression02,progression03)){var progressionIdentifier,eventDict={};progressionIdentifier=progression02?progression03?progression01+":"+progression02+":"+progression03:progression01+":"+progression02:progression01,eventDict.category=GAEvents.CategoryProgression,eventDict.event_id=progressionStatusString+":"+progressionIdentifier;var attempt_num=0;sendScore&&progressionStatus!=gameanalytics.EGAProgressionStatus.Start&&(eventDict.score=score),progressionStatus===gameanalytics.EGAProgressionStatus.Fail&&GAState.incrementProgressionTries(progressionIdentifier),progressionStatus===gameanalytics.EGAProgressionStatus.Complete&&(GAState.incrementProgressionTries(progressionIdentifier),attempt_num=GAState.getProgressionTries(progressionIdentifier),eventDict.attempt_num=attempt_num,GAState.clearProgressionTries(progressionIdentifier)),GAEvents.addDimensionsToEvent(eventDict),GAEvents.addFieldsToEvent(eventDict,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add PROGRESSION event: {status:"+progressionStatusString+", progression01:"+progression01+", progression02:"+progression02+", progression03:"+progression03+", score:"+score+", attempt:"+attempt_num+"}"),GAEvents.addEventToStore(eventDict)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)}},GAEvents.addDesignEvent=function(eventId,value,sendValue,fields){if(GAState.isEventSubmissionEnabled())if(GAValidator.validateDesignEvent(eventId,value)){var eventData={};eventData.category=GAEvents.CategoryDesign,eventData.event_id=eventId,sendValue&&(eventData.value=value),GAEvents.addDimensionsToEvent(eventData),GAEvents.addFieldsToEvent(eventData,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add DESIGN event: {eventId:"+eventId+", value:"+value+"}"),GAEvents.addEventToStore(eventData)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)},GAEvents.addErrorEvent=function(severity,message,fields){if(GAState.isEventSubmissionEnabled()){var severityString=GAEvents.errorSeverityToString(severity);if(GAValidator.validateErrorEvent(severity,message)){var eventData={};eventData.category=GAEvents.CategoryError,eventData.severity=severityString,eventData.message=message,GAEvents.addDimensionsToEvent(eventData),GAEvents.addFieldsToEvent(eventData,GAState.validateAndCleanCustomFields(fields)),GALogger.i("Add ERROR event: {severity:"+severityString+", message:"+message+"}"),GAEvents.addEventToStore(eventData)}else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected)}},GAEvents.processEvents=function(category,performCleanUp){if(GAState.isEventSubmissionEnabled())try{var requestIdentifier=GAUtilities.createGuid();performCleanUp&&(GAEvents.cleanupEvents(),GAEvents.fixMissingSessionEndEvents());var selectArgs=[];selectArgs.push(["status",EGAStoreArgsOperator.Equal,"new"]);var updateWhereArgs=[];updateWhereArgs.push(["status",EGAStoreArgsOperator.Equal,"new"]),category&&(selectArgs.push(["category",EGAStoreArgsOperator.Equal,category]),updateWhereArgs.push(["category",EGAStoreArgsOperator.Equal,category]));var updateSetArgs=[];updateSetArgs.push(["status",requestIdentifier]);var events=GAStore.select(EGAStore.Events,selectArgs);if(!events||0==events.length)return GALogger.i("Event queue: No events to send"),void GAEvents.updateSessionStore();if(events.length>GAEvents.MaxEventCount){if(!(events=GAStore.select(EGAStore.Events,selectArgs,!0,GAEvents.MaxEventCount)))return;var lastTimestamp=events[events.length-1].client_ts;if(selectArgs.push(["client_ts",EGAStoreArgsOperator.LessOrEqual,lastTimestamp]),!(events=GAStore.select(EGAStore.Events,selectArgs)))return;updateWhereArgs.push(["client_ts",EGAStoreArgsOperator.LessOrEqual,lastTimestamp])}if(GALogger.i("Event queue: Sending "+events.length+" events."),!GAStore.update(EGAStore.Events,updateSetArgs,updateWhereArgs))return;for(var payloadArray=[],i=0;i<events.length;++i){var ev=events[i],eventDict=JSON.parse(GAUtilities.decode64(ev.event));0!=eventDict.length&&payloadArray.push(eventDict)}GAHTTPApi.instance.sendEventsInArray(payloadArray,requestIdentifier,GAEvents.processEventsCallback)}catch(e){GALogger.e("Error during ProcessEvents(): "+e.stack)}},GAEvents.processEventsCallback=function(responseEnum,dataDict,requestId,eventCount){var requestIdWhereArgs=[];if(requestIdWhereArgs.push(["status",EGAStoreArgsOperator.Equal,requestId]),responseEnum===EGAHTTPApiResponse.Ok)GAStore.delete(EGAStore.Events,requestIdWhereArgs),GALogger.i("Event queue: "+eventCount+" events sent.");else if(responseEnum===EGAHTTPApiResponse.NoResponse){var setArgs=[];setArgs.push(["status","new"]),GALogger.w("Event queue: Failed to send events to collector - Retrying next time"),GAStore.update(EGAStore.Events,setArgs,requestIdWhereArgs)}else{if(dataDict){var json,count=0;for(var j in dataDict)0==count&&(json=dataDict[j]),++count;responseEnum===EGAHTTPApiResponse.BadRequest&&json.constructor===Array?GALogger.w("Event queue: "+eventCount+" events sent. "+count+" events failed GA server validation."):GALogger.w("Event queue: Failed to send events.")}else GALogger.w("Event queue: Failed to send events.");GAStore.delete(EGAStore.Events,requestIdWhereArgs)}},GAEvents.cleanupEvents=function(){GAStore.update(EGAStore.Events,[["status","new"]])},GAEvents.fixMissingSessionEndEvents=function(){if(GAState.isEventSubmissionEnabled()){var args=[];args.push(["session_id",EGAStoreArgsOperator.NotEqual,GAState.getSessionId()]);var sessions=GAStore.select(EGAStore.Sessions,args);if(sessions&&0!=sessions.length){GALogger.i(sessions.length+" session(s) located with missing session_end event.");for(var i=0;i<sessions.length;++i){var sessionEndEvent=JSON.parse(GAUtilities.decode64(sessions[i].event)),length=sessionEndEvent.client_ts-sessions[i].timestamp;length=Math.max(0,length),sessionEndEvent.category=GAEvents.CategorySessionEnd,sessionEndEvent.length=length,GAEvents.addEventToStore(sessionEndEvent)}}}},GAEvents.addEventToStore=function(eventData){if(GAState.isEventSubmissionEnabled())if(GAState.isInitialized())try{if(GAStore.isStoreTooLargeForEvents()&&!GAUtilities.stringMatch(eventData.category,/^(user|session_end|business)$/))return void GALogger.w("Database too large. Event has been blocked.");var ev=GAState.getEventAnnotations(),jsonDefaults=GAUtilities.encode64(JSON.stringify(ev));for(var e in eventData)ev[e]=eventData[e];var json=JSON.stringify(ev);GALogger.ii("Event added to queue: "+json);var values={status:"new"};values.category=ev.category,values.session_id=ev.session_id,values.client_ts=ev.client_ts,values.event=GAUtilities.encode64(JSON.stringify(ev)),GAStore.insert(EGAStore.Events,values),eventData.category==GAEvents.CategorySessionEnd?GAStore.delete(EGAStore.Sessions,[["session_id",EGAStoreArgsOperator.Equal,ev.session_id]]):((values={}).session_id=ev.session_id,values.timestamp=GAState.getSessionStart(),values.event=jsonDefaults,GAStore.insert(EGAStore.Sessions,values,!0,"session_id")),GAStore.isStorageAvailable()&&GAStore.save()}catch(e){GALogger.e("addEventToStore: error"),GALogger.e(e.stack)}else GALogger.w("Could not add event: SDK is not initialized")},GAEvents.updateSessionStore=function(){if(GAState.sessionIsStarted()){var values={};values.session_id=GAState.instance.sessionId,values.timestamp=GAState.getSessionStart(),values.event=GAUtilities.encode64(JSON.stringify(GAState.getEventAnnotations())),GAStore.insert(EGAStore.Sessions,values,!0,"session_id"),GAStore.isStorageAvailable()&&GAStore.save()}},GAEvents.addDimensionsToEvent=function(eventData){eventData&&(GAState.getCurrentCustomDimension01()&&(eventData.custom_01=GAState.getCurrentCustomDimension01()),GAState.getCurrentCustomDimension02()&&(eventData.custom_02=GAState.getCurrentCustomDimension02()),GAState.getCurrentCustomDimension03()&&(eventData.custom_03=GAState.getCurrentCustomDimension03()))},GAEvents.addFieldsToEvent=function(eventData,fields){eventData&&fields&&0<Object.keys(fields).length&&(eventData.custom_fields=fields)},GAEvents.resourceFlowTypeToString=function(value){return value==gameanalytics.EGAResourceFlowType.Source||value==gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Source]?"Source":value==gameanalytics.EGAResourceFlowType.Sink||value==gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Sink]?"Sink":""},GAEvents.progressionStatusToString=function(value){return value==gameanalytics.EGAProgressionStatus.Start||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Start]?"Start":value==gameanalytics.EGAProgressionStatus.Complete||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Complete]?"Complete":value==gameanalytics.EGAProgressionStatus.Fail||value==gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Fail]?"Fail":""},GAEvents.errorSeverityToString=function(value){return value==gameanalytics.EGAErrorSeverity.Debug||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Debug]?"debug":value==gameanalytics.EGAErrorSeverity.Info||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Info]?"info":value==gameanalytics.EGAErrorSeverity.Warning||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Warning]?"warning":value==gameanalytics.EGAErrorSeverity.Error||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Error]?"error":value==gameanalytics.EGAErrorSeverity.Critical||value==gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Critical]?"critical":""},GAEvents.instance=new GAEvents,GAEvents.CategorySessionStart="user",GAEvents.CategorySessionEnd="session_end",GAEvents.CategoryDesign="design",GAEvents.CategoryBusiness="business",GAEvents.CategoryProgression="progression",GAEvents.CategoryResource="resource",GAEvents.CategoryError="error",GAEvents.MaxEventCount=500,GAEvents}(),events_1.GAEvents=GAEvents}(gameanalytics||(gameanalytics={})),function(gameanalytics){!function(threading){var GALogger=gameanalytics.logging.GALogger,GAState=gameanalytics.state.GAState,GAEvents=gameanalytics.events.GAEvents,GAThreading=function(){function GAThreading(){this.blocks=new threading.PriorityQueue({compare:function(x,y){return x-y}}),this.id2TimedBlockMap={},GAThreading.startThread()}return GAThreading.createTimedBlock=function(delayInSeconds){void 0===delayInSeconds&&(delayInSeconds=0);var time=new Date;return time.setSeconds(time.getSeconds()+delayInSeconds),new threading.TimedBlock(time)},GAThreading.performTaskOnGAThread=function(taskBlock,delayInSeconds){void 0===delayInSeconds&&(delayInSeconds=0);var time=new Date;time.setSeconds(time.getSeconds()+delayInSeconds);var timedBlock=new threading.TimedBlock(time);timedBlock.block=taskBlock,GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock)},GAThreading.performTimedBlockOnGAThread=function(timedBlock){GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock)},GAThreading.scheduleTimer=function(interval,callback){var time=new Date;time.setSeconds(time.getSeconds()+interval);var timedBlock=new threading.TimedBlock(time);return timedBlock.block=callback,GAThreading.instance.id2TimedBlockMap[timedBlock.id]=timedBlock,GAThreading.instance.addTimedBlock(timedBlock),timedBlock.id},GAThreading.getTimedBlockById=function(blockIdentifier){return blockIdentifier in GAThreading.instance.id2TimedBlockMap?GAThreading.instance.id2TimedBlockMap[blockIdentifier]:null},GAThreading.ensureEventQueueIsRunning=function(){GAThreading.instance.keepRunning=!0,GAThreading.instance.isRunning||(GAThreading.instance.isRunning=!0,GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds,GAThreading.processEventQueue))},GAThreading.endSessionAndStopQueue=function(){GAState.isInitialized()&&(GALogger.i("Ending session."),GAThreading.stopEventQueue(),GAState.isEnabled()&&GAState.sessionIsStarted()&&(GAEvents.addSessionEndEvent(),GAState.instance.sessionStart=0))},GAThreading.stopEventQueue=function(){GAThreading.instance.keepRunning=!1},GAThreading.ignoreTimer=function(blockIdentifier){blockIdentifier in GAThreading.instance.id2TimedBlockMap&&(GAThreading.instance.id2TimedBlockMap[blockIdentifier].ignore=!0)},GAThreading.setEventProcessInterval=function(interval){0<interval&&(GAThreading.ProcessEventsIntervalInSeconds=interval)},GAThreading.prototype.addTimedBlock=function(timedBlock){this.blocks.enqueue(timedBlock.deadline.getTime(),timedBlock)},GAThreading.run=function(){clearTimeout(GAThreading.runTimeoutId);try{for(var timedBlock;timedBlock=GAThreading.getNextBlock();)if(!timedBlock.ignore)if(timedBlock.async){if(!timedBlock.running){timedBlock.running=!0,timedBlock.block();break}}else timedBlock.block();return void(GAThreading.runTimeoutId=setTimeout(GAThreading.run,GAThreading.ThreadWaitTimeInMs))}catch(e){GALogger.e("Error on GA thread"),GALogger.e(e.stack)}},GAThreading.startThread=function(){GAThreading.runTimeoutId=setTimeout(GAThreading.run,0)},GAThreading.getNextBlock=function(){var now=new Date;return GAThreading.instance.blocks.hasItems()&&GAThreading.instance.blocks.peek().deadline.getTime()<=now.getTime()?GAThreading.instance.blocks.peek().async&&GAThreading.instance.blocks.peek().running?GAThreading.instance.blocks.peek():GAThreading.instance.blocks.dequeue():null},GAThreading.processEventQueue=function(){GAEvents.processEvents("",!0),GAThreading.instance.keepRunning?GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds,GAThreading.processEventQueue):GAThreading.instance.isRunning=!1},GAThreading.instance=new GAThreading,GAThreading.ThreadWaitTimeInMs=1e3,GAThreading.ProcessEventsIntervalInSeconds=8,GAThreading}();threading.GAThreading=GAThreading}(gameanalytics.threading||(gameanalytics.threading={}))}(gameanalytics||(gameanalytics={})),function(gameanalytics){var GAThreading=gameanalytics.threading.GAThreading,GALogger=gameanalytics.logging.GALogger,GAStore=gameanalytics.store.GAStore,GAState=gameanalytics.state.GAState,GAHTTPApi=gameanalytics.http.GAHTTPApi,GADevice=gameanalytics.device.GADevice,GAValidator=gameanalytics.validators.GAValidator,EGAHTTPApiResponse=gameanalytics.http.EGAHTTPApiResponse,GAUtilities=gameanalytics.utilities.GAUtilities,GAEvents=gameanalytics.events.GAEvents,GameAnalytics=function(){function GameAnalytics(){}return GameAnalytics.init=function(){if(GADevice.touch(),GameAnalytics.methodMap.configureAvailableCustomDimensions01=GameAnalytics.configureAvailableCustomDimensions01,GameAnalytics.methodMap.configureAvailableCustomDimensions02=GameAnalytics.configureAvailableCustomDimensions02,GameAnalytics.methodMap.configureAvailableCustomDimensions03=GameAnalytics.configureAvailableCustomDimensions03,GameAnalytics.methodMap.configureAvailableResourceCurrencies=GameAnalytics.configureAvailableResourceCurrencies,GameAnalytics.methodMap.configureAvailableResourceItemTypes=GameAnalytics.configureAvailableResourceItemTypes,GameAnalytics.methodMap.configureBuild=GameAnalytics.configureBuild,GameAnalytics.methodMap.configureSdkGameEngineVersion=GameAnalytics.configureSdkGameEngineVersion,GameAnalytics.methodMap.configureGameEngineVersion=GameAnalytics.configureGameEngineVersion,GameAnalytics.methodMap.configureUserId=GameAnalytics.configureUserId,GameAnalytics.methodMap.initialize=GameAnalytics.initialize,GameAnalytics.methodMap.addBusinessEvent=GameAnalytics.addBusinessEvent,GameAnalytics.methodMap.addResourceEvent=GameAnalytics.addResourceEvent,GameAnalytics.methodMap.addProgressionEvent=GameAnalytics.addProgressionEvent,GameAnalytics.methodMap.addDesignEvent=GameAnalytics.addDesignEvent,GameAnalytics.methodMap.addErrorEvent=GameAnalytics.addErrorEvent,GameAnalytics.methodMap.addErrorEvent=GameAnalytics.addErrorEvent,GameAnalytics.methodMap.setEnabledInfoLog=GameAnalytics.setEnabledInfoLog,GameAnalytics.methodMap.setEnabledVerboseLog=GameAnalytics.setEnabledVerboseLog,GameAnalytics.methodMap.setEnabledManualSessionHandling=GameAnalytics.setEnabledManualSessionHandling,GameAnalytics.methodMap.setEnabledEventSubmission=GameAnalytics.setEnabledEventSubmission,GameAnalytics.methodMap.setCustomDimension01=GameAnalytics.setCustomDimension01,GameAnalytics.methodMap.setCustomDimension02=GameAnalytics.setCustomDimension02,GameAnalytics.methodMap.setCustomDimension03=GameAnalytics.setCustomDimension03,GameAnalytics.methodMap.setFacebookId=GameAnalytics.setFacebookId,GameAnalytics.methodMap.setGender=GameAnalytics.setGender,GameAnalytics.methodMap.setBirthYear=GameAnalytics.setBirthYear,GameAnalytics.methodMap.setEventProcessInterval=GameAnalytics.setEventProcessInterval,GameAnalytics.methodMap.startSession=GameAnalytics.startSession,GameAnalytics.methodMap.endSession=GameAnalytics.endSession,GameAnalytics.methodMap.onStop=GameAnalytics.onStop,GameAnalytics.methodMap.onResume=GameAnalytics.onResume,GameAnalytics.methodMap.addCommandCenterListener=GameAnalytics.addCommandCenterListener,GameAnalytics.methodMap.removeCommandCenterListener=GameAnalytics.removeCommandCenterListener,GameAnalytics.methodMap.getCommandCenterValueAsString=GameAnalytics.getCommandCenterValueAsString,GameAnalytics.methodMap.isCommandCenterReady=GameAnalytics.isCommandCenterReady,GameAnalytics.methodMap.getConfigurationsContentAsString=GameAnalytics.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var q=window.GameAnalytics.q;for(var i in q)GameAnalytics.gaCommand.apply(null,q[i])}},GameAnalytics.gaCommand=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];0<args.length&&args[0]in gameanalytics.GameAnalytics.methodMap&&(1<args.length?gameanalytics.GameAnalytics.methodMap[args[0]].apply(null,Array.prototype.slice.call(args,1)):gameanalytics.GameAnalytics.methodMap[args[0]]())},GameAnalytics.configureAvailableCustomDimensions01=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions01(customDimensions)})},GameAnalytics.configureAvailableCustomDimensions02=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions02(customDimensions)})},GameAnalytics.configureAvailableCustomDimensions03=function(customDimensions){void 0===customDimensions&&(customDimensions=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available custom dimensions must be set before SDK is initialized"):GAState.setAvailableCustomDimensions03(customDimensions)})},GameAnalytics.configureAvailableResourceCurrencies=function(resourceCurrencies){void 0===resourceCurrencies&&(resourceCurrencies=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available resource currencies must be set before SDK is initialized"):GAState.setAvailableResourceCurrencies(resourceCurrencies)})},GameAnalytics.configureAvailableResourceItemTypes=function(resourceItemTypes){void 0===resourceItemTypes&&(resourceItemTypes=[]),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Available resource item types must be set before SDK is initialized"):GAState.setAvailableResourceItemTypes(resourceItemTypes)})},GameAnalytics.configureBuild=function(build){void 0===build&&(build=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("Build version must be set before SDK is initialized."):GAValidator.validateBuild(build)?GAState.setBuild(build):GALogger.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+build)})},GameAnalytics.configureSdkGameEngineVersion=function(sdkGameEngineVersion){void 0===sdkGameEngineVersion&&(sdkGameEngineVersion=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)||(GAValidator.validateSdkWrapperVersion(sdkGameEngineVersion)?GADevice.sdkGameEngineVersion=sdkGameEngineVersion:GALogger.i("Validation fail - configure sdk version: Sdk version not supported. String: "+sdkGameEngineVersion))})},GameAnalytics.configureGameEngineVersion=function(gameEngineVersion){void 0===gameEngineVersion&&(gameEngineVersion=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)||(GAValidator.validateEngineVersion(gameEngineVersion)?GADevice.gameEngineVersion=gameEngineVersion:GALogger.i("Validation fail - configure game engine version: Game engine version not supported. String: "+gameEngineVersion))})},GameAnalytics.configureUserId=function(uId){void 0===uId&&(uId=""),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("A custom user id must be set before SDK is initialized."):GAValidator.validateUserId(uId)?GAState.setUserId(uId):GALogger.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+uId)})},GameAnalytics.initialize=function(gameKey,gameSecret){void 0===gameKey&&(gameKey=""),void 0===gameSecret&&(gameSecret=""),GADevice.updateConnectionType();var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GameAnalytics.isSdkReady(!0,!1)?GALogger.w("SDK already initialized. Can only be called once."):GAValidator.validateKeys(gameKey,gameSecret)?(GAState.setKeys(gameKey,gameSecret),GameAnalytics.internalInitialize()):GALogger.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+gameKey+", secretKey: "+gameSecret)},GAThreading.performTimedBlockOnGAThread(timedBlock)},GameAnalytics.addBusinessEvent=function(currency,amount,itemType,itemId,cartType){void 0===currency&&(currency=""),void 0===amount&&(amount=0),void 0===itemType&&(itemType=""),void 0===itemId&&(itemId=""),void 0===cartType&&(cartType=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add business event")&&GAEvents.addBusinessEvent(currency,amount,itemType,itemId,cartType,{})})},GameAnalytics.addResourceEvent=function(flowType,currency,amount,itemType,itemId){void 0===flowType&&(flowType=gameanalytics.EGAResourceFlowType.Undefined),void 0===currency&&(currency=""),void 0===amount&&(amount=0),void 0===itemType&&(itemType=""),void 0===itemId&&(itemId=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add resource event")&&GAEvents.addResourceEvent(flowType,currency,amount,itemType,itemId,{})})},GameAnalytics.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score){void 0===progressionStatus&&(progressionStatus=gameanalytics.EGAProgressionStatus.Undefined),void 0===progression01&&(progression01=""),void 0===progression02&&(progression02=""),void 0===progression03&&(progression03=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){if(GameAnalytics.isSdkReady(!0,!0,"Could not add progression event")){var sendScore="number"==typeof score;GAEvents.addProgressionEvent(progressionStatus,progression01,progression02,progression03,sendScore?score:0,sendScore,{})}})},GameAnalytics.addDesignEvent=function(eventId,value){GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){if(GameAnalytics.isSdkReady(!0,!0,"Could not add design event")){var sendValue="number"==typeof value;GAEvents.addDesignEvent(eventId,sendValue?value:0,sendValue,{})}})},GameAnalytics.addErrorEvent=function(severity,message){void 0===severity&&(severity=gameanalytics.EGAErrorSeverity.Undefined),void 0===message&&(message=""),GADevice.updateConnectionType(),GAThreading.performTaskOnGAThread(function(){GameAnalytics.isSdkReady(!0,!0,"Could not add error event")&&GAEvents.addErrorEvent(severity,message,{})})},GameAnalytics.setEnabledInfoLog=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GALogger.setInfoLog(flag),GALogger.i("Info logging enabled")):(GALogger.i("Info logging disabled"),GALogger.setInfoLog(flag))})},GameAnalytics.setEnabledVerboseLog=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GALogger.setVerboseLog(flag),GALogger.i("Verbose logging enabled")):(GALogger.i("Verbose logging disabled"),GALogger.setVerboseLog(flag))})},GameAnalytics.setEnabledManualSessionHandling=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){GAState.setManualSessionHandling(flag)})},GameAnalytics.setEnabledEventSubmission=function(flag){void 0===flag&&(flag=!1),GAThreading.performTaskOnGAThread(function(){flag?(GAState.setEnabledEventSubmission(flag),GALogger.i("Event submission enabled")):(GALogger.i("Event submission disabled"),GAState.setEnabledEventSubmission(flag))})},GameAnalytics.setCustomDimension01=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension01(dimension,GAState.getAvailableCustomDimensions01())?GAState.setCustomDimension01(dimension):GALogger.w("Could not set custom01 dimension value to '"+dimension+"'. Value not found in available custom01 dimension values")})},GameAnalytics.setCustomDimension02=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension02(dimension,GAState.getAvailableCustomDimensions02())?GAState.setCustomDimension02(dimension):GALogger.w("Could not set custom02 dimension value to '"+dimension+"'. Value not found in available custom02 dimension values")})},GameAnalytics.setCustomDimension03=function(dimension){void 0===dimension&&(dimension=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateDimension03(dimension,GAState.getAvailableCustomDimensions03())?GAState.setCustomDimension03(dimension):GALogger.w("Could not set custom03 dimension value to '"+dimension+"'. Value not found in available custom03 dimension values")})},GameAnalytics.setFacebookId=function(facebookId){void 0===facebookId&&(facebookId=""),GAThreading.performTaskOnGAThread(function(){GAValidator.validateFacebookId(facebookId)&&GAState.setFacebookId(facebookId)})},GameAnalytics.setGender=function(gender){void 0===gender&&(gender=gameanalytics.EGAGender.Undefined),GAThreading.performTaskOnGAThread(function(){GAValidator.validateGender(gender)&&GAState.setGender(gender)})},GameAnalytics.setBirthYear=function(birthYear){void 0===birthYear&&(birthYear=0),GAThreading.performTaskOnGAThread(function(){GAValidator.validateBirthyear(birthYear)&&GAState.setBirthYear(birthYear)})},GameAnalytics.setEventProcessInterval=function(intervalInSeconds){GAThreading.performTaskOnGAThread(function(){GAThreading.setEventProcessInterval(intervalInSeconds)})},GameAnalytics.startSession=function(){if(GAState.isInitialized()){var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GAState.isEnabled()&&GAState.sessionIsStarted()&&GAThreading.endSessionAndStopQueue(),GameAnalytics.resumeSessionAndStartQueue()},GAThreading.performTimedBlockOnGAThread(timedBlock)}},GameAnalytics.endSession=function(){GameAnalytics.onStop()},GameAnalytics.onStop=function(){GAThreading.performTaskOnGAThread(function(){try{GAThreading.endSessionAndStopQueue()}catch(Exception){}})},GameAnalytics.onResume=function(){var timedBlock=GAThreading.createTimedBlock();timedBlock.async=!0,GameAnalytics.initTimedBlockId=timedBlock.id,timedBlock.block=function(){GameAnalytics.resumeSessionAndStartQueue()},GAThreading.performTimedBlockOnGAThread(timedBlock)},GameAnalytics.getCommandCenterValueAsString=function(key,defaultValue){return void 0===defaultValue&&(defaultValue=null),GAState.getConfigurationStringValue(key,defaultValue)},GameAnalytics.isCommandCenterReady=function(){return GAState.isCommandCenterReady()},GameAnalytics.addCommandCenterListener=function(listener){GAState.addCommandCenterListener(listener)},GameAnalytics.removeCommandCenterListener=function(listener){GAState.removeCommandCenterListener(listener)},GameAnalytics.getConfigurationsContentAsString=function(){return GAState.getConfigurationsContentAsString()},GameAnalytics.internalInitialize=function(){GAState.ensurePersistedStates(),GAStore.setItem(GAState.DefaultUserIdKey,GAState.getDefaultId()),GAState.setInitialized(!0),GameAnalytics.newSession(),GAState.isEnabled()&&GAThreading.ensureEventQueueIsRunning()},GameAnalytics.newSession=function(){GALogger.i("Starting a new session."),GAState.validateAndFixCurrentDimensions(),GAHTTPApi.instance.requestInit(GameAnalytics.startNewSessionCallback)},GameAnalytics.startNewSessionCallback=function(initResponse,initResponseDict){if(initResponse===EGAHTTPApiResponse.Ok&&initResponseDict){var timeOffsetSeconds=0;if(initResponseDict.server_ts){var serverTs=initResponseDict.server_ts;timeOffsetSeconds=GAState.calculateServerTimeOffset(serverTs)}initResponseDict.time_offset=timeOffsetSeconds,GAStore.setItem(GAState.SdkConfigCachedKey,GAUtilities.encode64(JSON.stringify(initResponseDict))),GAState.instance.sdkConfigCached=initResponseDict,GAState.instance.sdkConfig=initResponseDict,GAState.instance.initAuthorized=!0}else initResponse==EGAHTTPApiResponse.Unauthorized?(GALogger.w("Initialize SDK failed - Unauthorized"),GAState.instance.initAuthorized=!1):(initResponse===EGAHTTPApiResponse.NoResponse||initResponse===EGAHTTPApiResponse.RequestTimeout?GALogger.i("Init call (session start) failed - no response. Could be offline or timeout."):initResponse===EGAHTTPApiResponse.BadResponse||initResponse===EGAHTTPApiResponse.JsonEncodeFailed||initResponse===EGAHTTPApiResponse.JsonDecodeFailed?GALogger.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):initResponse!==EGAHTTPApiResponse.BadRequest&&initResponse!==EGAHTTPApiResponse.UnknownResponseCode||GALogger.i("Init call (session start) failed - bad request or unknown response."),null==GAState.instance.sdkConfig?null!=GAState.instance.sdkConfigCached?(GALogger.i("Init call (session start) failed - using cached init values."),GAState.instance.sdkConfig=GAState.instance.sdkConfigCached):(GALogger.i("Init call (session start) failed - using default init values."),GAState.instance.sdkConfig=GAState.instance.sdkConfigDefault):GALogger.i("Init call (session start) failed - using cached init values."),GAState.instance.initAuthorized=!0);if(GAState.instance.clientServerTimeOffset=GAState.getSdkConfig().time_offset?GAState.getSdkConfig().time_offset:0,GAState.populateConfigurations(GAState.getSdkConfig()),!GAState.isEnabled())return GALogger.w("Could not start session: SDK is disabled."),void GAThreading.stopEventQueue();GAThreading.ensureEventQueueIsRunning();var newSessionId=GAUtilities.createGuid();GAState.instance.sessionId=newSessionId,GAState.instance.sessionStart=GAState.getClientTsAdjusted(),GAEvents.addSessionStartEvent();var timedBlock=GAThreading.getTimedBlockById(GameAnalytics.initTimedBlockId);null!=timedBlock&&(timedBlock.running=!1),GameAnalytics.initTimedBlockId=-1},GameAnalytics.resumeSessionAndStartQueue=function(){GAState.isInitialized()&&(GALogger.i("Resuming session."),GAState.sessionIsStarted()||GameAnalytics.newSession())},GameAnalytics.isSdkReady=function(needsInitialized,warn,message){return void 0===warn&&(warn=!0),void 0===message&&(message=""),message&&(message+=": "),needsInitialized&&!GAState.isInitialized()?(warn&&GALogger.w(message+"SDK is not initialized"),!1):needsInitialized&&!GAState.isEnabled()?(warn&&GALogger.w(message+"SDK is disabled"),!1):!(needsInitialized&&!GAState.sessionIsStarted())||(warn&&GALogger.w(message+"Session has not started yet"),!1)},GameAnalytics.initTimedBlockId=-1,GameAnalytics.methodMap={},GameAnalytics}();gameanalytics.GameAnalytics=GameAnalytics}(gameanalytics||(gameanalytics={})),gameanalytics.GameAnalytics.init();gameanalytics.GameAnalytics.gaCommand;var GameAnalytics_node=gameanalytics,GameAnalytics$1=function(){function GameAnalytics(){}return GameAnalytics.prototype.setup=function(key,secret,version){Branding$$1.analyticsEnabled&&(GameAnalytics_node.GameAnalytics.initialize(key,secret),GameAnalytics_node.GameAnalytics.configureBuild(version),GameAnalytics_node.GameAnalytics.startSession(),window.addEventListener("beforeunload",function(){GameAnalytics_node.GameAnalytics.endSession()}))},GameAnalytics.prototype.addProgressionEvent=function(progressionStatus,progression01,progression02,progression03,score){Branding$$1.analyticsEnabled&&GameAnalytics_node.GameAnalytics.addProgressionEvent(progressionStatus,progression01,progression02,progression03,score)},GameAnalytics.prototype.addDesignEvent=function(eventId,value){Branding$$1.analyticsEnabled&&GameAnalytics_node.GameAnalytics.addDesignEvent(eventId,value)},GameAnalytics}();function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}var progressbar=createCommonjsModule(function(module,exports){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=commonjsRequire;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i=commonjsRequire,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(){var mockTweenable,root=this||Function("return this")(),Tweenable=function(){var formula,DEFAULT_SCHEDULE_FUNCTION,timeoutHandler_endTime,timeoutHandler_currentTime,timeoutHandler_isEnded,timeoutHandler_offset,_now=Date.now?Date.now:function(){return+new Date},now="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:_now;function noop(){}function each(obj,fn){var key;for(key in obj)Object.hasOwnProperty.call(obj,key)&&fn(key)}function shallowCopy(targetObj,srcObj){return each(srcObj,function(prop){targetObj[prop]=srcObj[prop]}),targetObj}function defaults(target,src){each(src,function(prop){void 0===target[prop]&&(target[prop]=src[prop])})}function tweenProps(forPosition,currentState,originalState,targetState,duration,timestamp,easing){var prop,easingObjectProp,easingFn,normalizedPosition=forPosition<timestamp?0:(forPosition-timestamp)/duration;for(prop in currentState)currentState.hasOwnProperty(prop)&&(easingObjectProp=easing[prop],easingFn="function"==typeof easingObjectProp?easingObjectProp:formula[easingObjectProp],currentState[prop]=tweenProp(originalState[prop],targetState[prop],easingFn,normalizedPosition));return currentState}function tweenProp(start,end,easingFunc,position){return start+(end-start)*easingFunc(position)}function applyFilter(tweenable,filterName){var filters=Tweenable.prototype.filter,args=tweenable._filterArgs;each(filters,function(name){void 0!==filters[name][filterName]&&filters[name][filterName].apply(tweenable,args)})}function timeoutHandler(tweenable,timestamp,delay,duration,currentState,originalState,targetState,easing,step,schedule,opt_currentTimeOverride){timeoutHandler_endTime=timestamp+delay+duration,timeoutHandler_currentTime=Math.min(opt_currentTimeOverride||now(),timeoutHandler_endTime),timeoutHandler_isEnded=timeoutHandler_endTime<=timeoutHandler_currentTime,timeoutHandler_offset=duration-(timeoutHandler_endTime-timeoutHandler_currentTime),tweenable.isPlaying()&&(timeoutHandler_isEnded?(step(targetState,tweenable._attachment,timeoutHandler_offset),tweenable.stop(!0)):(tweenable._scheduleId=schedule(tweenable._timeoutHandler,1e3/60),applyFilter(tweenable,"beforeTween"),timeoutHandler_currentTime<timestamp+delay?tweenProps(1,currentState,originalState,targetState,1,1,easing):tweenProps(timeoutHandler_currentTime,currentState,originalState,targetState,duration,timestamp+delay,easing),applyFilter(tweenable,"afterTween"),step(currentState,tweenable._attachment,timeoutHandler_offset)))}function composeEasingObject(fromTweenParams,easing){var composedEasing={},typeofEasing=typeof easing;return each(fromTweenParams,"string"===typeofEasing||"function"===typeofEasing?function(prop){composedEasing[prop]=easing}:function(prop){composedEasing[prop]||(composedEasing[prop]=easing[prop]||"linear")}),composedEasing}function Tweenable(opt_initialState,opt_config){this._currentState=opt_initialState||{},this._configured=!1,this._scheduleFunction=DEFAULT_SCHEDULE_FUNCTION,void 0!==opt_config&&this.setConfig(opt_config)}return DEFAULT_SCHEDULE_FUNCTION="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,Tweenable.prototype.tween=function(opt_config){return this._isTweening?this:(void 0===opt_config&&this._configured||this.setConfig(opt_config),this._timestamp=now(),this._start(this.get(),this._attachment),this.resume())},Tweenable.prototype.setConfig=function(config){config=config||{},this._configured=!0,this._attachment=config.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=config.delay||0,this._start=config.start||noop,this._step=config.step||noop,this._finish=config.finish||noop,this._duration=config.duration||500,this._currentState=shallowCopy({},config.from||this.get()),this._originalState=this.get(),this._targetState=shallowCopy({},config.to||this.get());var self=this;this._timeoutHandler=function(){timeoutHandler(self,self._timestamp,self._delay,self._duration,self._currentState,self._originalState,self._targetState,self._easing,self._step,self._scheduleFunction)};var currentState=this._currentState,targetState=this._targetState;return defaults(targetState,currentState),this._easing=composeEasingObject(currentState,config.easing||"linear"),this._filterArgs=[currentState,this._originalState,targetState,this._easing],applyFilter(this,"tweenCreated"),this},Tweenable.prototype.get=function(){return shallowCopy({},this._currentState)},Tweenable.prototype.set=function(state){this._currentState=state},Tweenable.prototype.pause=function(){return this._pausedAtTime=now(),this._isPaused=!0,this},Tweenable.prototype.resume=function(){return this._isPaused&&(this._timestamp+=now()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},Tweenable.prototype.seek=function(millisecond){millisecond=Math.max(millisecond,0);var currentTime=now();return this._timestamp+millisecond===0||(this._timestamp=currentTime-millisecond,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,timeoutHandler(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,currentTime),this.pause())),this},Tweenable.prototype.stop=function(gotoEnd){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=noop,(root.cancelAnimationFrame||root.webkitCancelAnimationFrame||root.oCancelAnimationFrame||root.msCancelAnimationFrame||root.mozCancelRequestAnimationFrame||root.clearTimeout)(this._scheduleId),gotoEnd&&(applyFilter(this,"beforeTween"),tweenProps(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),applyFilter(this,"afterTween"),applyFilter(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},Tweenable.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},Tweenable.prototype.setScheduleFunction=function(scheduleFunction){this._scheduleFunction=scheduleFunction},Tweenable.prototype.dispose=function(){var prop;for(prop in this)this.hasOwnProperty(prop)&&delete this[prop]},Tweenable.prototype.filter={},formula=Tweenable.prototype.formula={linear:function(pos){return pos}},shallowCopy(Tweenable,{now:now,each:each,tweenProps:tweenProps,tweenProp:tweenProp,applyFilter:applyFilter,shallowCopy:shallowCopy,defaults:defaults,composeEasingObject:composeEasingObject}),"function"==typeof SHIFTY_DEBUG_NOW&&(root.timeoutHandler=timeoutHandler),"object"==typeof exports?module.exports=Tweenable:void 0===root.Tweenable&&(root.Tweenable=Tweenable),Tweenable}();Tweenable.shallowCopy(Tweenable.prototype.formula,{easeInQuad:function(pos){return Math.pow(pos,2)},easeOutQuad:function(pos){return-(Math.pow(pos-1,2)-1)},easeInOutQuad:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,2):-.5*((pos-=2)*pos-2)},easeInCubic:function(pos){return Math.pow(pos,3)},easeOutCubic:function(pos){return Math.pow(pos-1,3)+1},easeInOutCubic:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,3):.5*(Math.pow(pos-2,3)+2)},easeInQuart:function(pos){return Math.pow(pos,4)},easeOutQuart:function(pos){return-(Math.pow(pos-1,4)-1)},easeInOutQuart:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,4):-.5*((pos-=2)*Math.pow(pos,3)-2)},easeInQuint:function(pos){return Math.pow(pos,5)},easeOutQuint:function(pos){return Math.pow(pos-1,5)+1},easeInOutQuint:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,5):.5*(Math.pow(pos-2,5)+2)},easeInSine:function(pos){return 1-Math.cos(pos*(Math.PI/2))},easeOutSine:function(pos){return Math.sin(pos*(Math.PI/2))},easeInOutSine:function(pos){return-.5*(Math.cos(Math.PI*pos)-1)},easeInExpo:function(pos){return 0===pos?0:Math.pow(2,10*(pos-1))},easeOutExpo:function(pos){return 1===pos?1:1-Math.pow(2,-10*pos)},easeInOutExpo:function(pos){return 0===pos?0:1===pos?1:(pos/=.5)<1?.5*Math.pow(2,10*(pos-1)):.5*(2-Math.pow(2,-10*--pos))},easeInCirc:function(pos){return-(Math.sqrt(1-pos*pos)-1)},easeOutCirc:function(pos){return Math.sqrt(1-Math.pow(pos-1,2))},easeInOutCirc:function(pos){return(pos/=.5)<1?-.5*(Math.sqrt(1-pos*pos)-1):.5*(Math.sqrt(1-(pos-=2)*pos)+1)},easeOutBounce:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?7.5625*(pos-=1.5/2.75)*pos+.75:pos<2.5/2.75?7.5625*(pos-=2.25/2.75)*pos+.9375:7.5625*(pos-=2.625/2.75)*pos+.984375},easeInBack:function(pos){var s=1.70158;return pos*pos*((s+1)*pos-s)},easeOutBack:function(pos){var s=1.70158;return(pos-=1)*pos*((s+1)*pos+s)+1},easeInOutBack:function(pos){var s=1.70158;return(pos/=.5)<1?pos*pos*((1+(s*=1.525))*pos-s)*.5:.5*((pos-=2)*pos*((1+(s*=1.525))*pos+s)+2)},elastic:function(pos){return-1*Math.pow(4,-8*pos)*Math.sin((6*pos-1)*(2*Math.PI)/2)+1},swingFromTo:function(pos){var s=1.70158;return(pos/=.5)<1?pos*pos*((1+(s*=1.525))*pos-s)*.5:.5*((pos-=2)*pos*((1+(s*=1.525))*pos+s)+2)},swingFrom:function(pos){var s=1.70158;return pos*pos*((s+1)*pos-s)},swingTo:function(pos){var s=1.70158;return(pos-=1)*pos*((s+1)*pos+s)+1},bounce:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?7.5625*(pos-=1.5/2.75)*pos+.75:pos<2.5/2.75?7.5625*(pos-=2.25/2.75)*pos+.9375:7.5625*(pos-=2.625/2.75)*pos+.984375},bouncePast:function(pos){return pos<1/2.75?7.5625*pos*pos:pos<2/2.75?2-(7.5625*(pos-=1.5/2.75)*pos+.75):pos<2.5/2.75?2-(7.5625*(pos-=2.25/2.75)*pos+.9375):2-(7.5625*(pos-=2.625/2.75)*pos+.984375)},easeFromTo:function(pos){return(pos/=.5)<1?.5*Math.pow(pos,4):-.5*((pos-=2)*Math.pow(pos,3)-2)},easeFrom:function(pos){return Math.pow(pos,4)},easeTo:function(pos){return Math.pow(pos,.25)}}),function(){function cubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var ax=0,bx=0,cx=0,ay=0,by=0,cy=0;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function fabs(n){return 0<=n?n:0-n}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i,t;for(t2=x,i=0;i<8;i++){if(fabs(x2=sampleCurveX(t2)-x)<epsilon)return t2;if(fabs(d2=(3*ax*(t=t2)+2*bx)*t+cx)<1e-6)break;t2-=x2/d2}if(t1=1,(t2=x)<(t0=0))return t0;if(t1<t2)return t1;for(;t0<t1;){if(fabs((x2=sampleCurveX(t2))-x)<epsilon)return t2;x2<x?t0=t2:t1=t2,t2=.5*(t1-t0)+t0}return t2}return ax=1-(cx=3*p1x)-(bx=3*(p2x-p1x)-cx),ay=1-(cy=3*p1y)-(by=3*(p2y-p1y)-cy),function(x,epsilon){return t=solveCurveX(x,epsilon),((ay*t+by)*t+cy)*t;var t}(t,function(duration){return 1/(200*duration)}(duration))}Tweenable.setBezierFunction=function(name,x1,y1,x2,y2){var cubicBezierTransition=function(x1,y1,x2,y2){return function(pos){return cubicBezierAtTime(pos,x1,y1,x2,y2,1)}}(x1,y1,x2,y2);return cubicBezierTransition.displayName=name,cubicBezierTransition.x1=x1,cubicBezierTransition.y1=y1,cubicBezierTransition.x2=x2,cubicBezierTransition.y2=y2,Tweenable.prototype.formula[name]=cubicBezierTransition},Tweenable.unsetBezierFunction=function(name){delete Tweenable.prototype.formula[name]}}(),(mockTweenable=new Tweenable)._filterArgs=[],Tweenable.interpolate=function(from,targetState,position,easing,opt_delay){var current=Tweenable.shallowCopy({},from),delay=opt_delay||0,easingObject=Tweenable.composeEasingObject(from,easing||"linear");mockTweenable.set({});var filterArgs=mockTweenable._filterArgs;filterArgs.length=0,filterArgs[0]=current,filterArgs[1]=from,filterArgs[2]=targetState,filterArgs[3]=easingObject,Tweenable.applyFilter(mockTweenable,"tweenCreated"),Tweenable.applyFilter(mockTweenable,"beforeTween");var interpolatedValues=function(from,current,targetState,position,easing,delay){return Tweenable.tweenProps(position,current,from,targetState,1,delay,easing)}(from,current,targetState,position,easingObject,delay);return Tweenable.applyFilter(mockTweenable,"afterTween"),interpolatedValues},function(Tweenable){var R_NUMBER_COMPONENT=/(\d|\-|\.)/,R_FORMAT_CHUNKS=/([^\-0-9\.]+)/g,R_UNFORMATTED_VALUES=/[0-9.\-]+/g,R_RGB=new RegExp("rgb\\("+R_UNFORMATTED_VALUES.source+/,\s*/.source+R_UNFORMATTED_VALUES.source+/,\s*/.source+R_UNFORMATTED_VALUES.source+"\\)","g"),R_RGB_PREFIX=/^.*\(/,R_HEX=/#([0-9]|[a-f]){3,6}/gi,VALUE_PLACEHOLDER="VAL";function sanitizeObjectForHexProps(stateObject){Tweenable.each(stateObject,function(prop){var currentProp=stateObject[prop];"string"==typeof currentProp&&currentProp.match(R_HEX)&&(stateObject[prop]=filterStringChunks(R_HEX,currentProp,convertHexToRGB))})}function convertHexToRGB(hexString){var hex,rgbArr=(3===(hex=(hex=hexString).replace(/#/,"")).length&&(hex=(hex=hex.split(""))[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),hexToRGBArray_returnArray[0]=hexToDec(hex.substr(0,2)),hexToRGBArray_returnArray[1]=hexToDec(hex.substr(2,2)),hexToRGBArray_returnArray[2]=hexToDec(hex.substr(4,2)),hexToRGBArray_returnArray);return"rgb("+rgbArr[0]+","+rgbArr[1]+","+rgbArr[2]+")"}var hexToRGBArray_returnArray=[];function hexToDec(hex){return parseInt(hex,16)}function filterStringChunks(pattern,unfilteredString,filter){var pattenMatches=unfilteredString.match(pattern),filteredString=unfilteredString.replace(pattern,VALUE_PLACEHOLDER);if(pattenMatches)for(var currentChunk,pattenMatchesLength=pattenMatches.length,i=0;i<pattenMatchesLength;i++)currentChunk=pattenMatches.shift(),filteredString=filteredString.replace(VALUE_PLACEHOLDER,filter(currentChunk));return filteredString}function sanitizeRGBChunk(rgbChunk){for(var numbers=rgbChunk.match(R_UNFORMATTED_VALUES),numbersLength=numbers.length,sanitizedString=rgbChunk.match(R_RGB_PREFIX)[0],i=0;i<numbersLength;i++)sanitizedString+=parseInt(numbers[i],10)+",";return sanitizedString=sanitizedString.slice(0,-1)+")"}function getFormatManifests(stateObject){var manifestAccumulator={};return Tweenable.each(stateObject,function(prop){var formattedString,chunks,currentProp=stateObject[prop];if("string"==typeof currentProp){var rawValues=getValuesFrom(currentProp);manifestAccumulator[prop]={formatString:(formattedString=currentProp,chunks=formattedString.match(R_FORMAT_CHUNKS),chunks?(1===chunks.length||formattedString.charAt(0).match(R_NUMBER_COMPONENT))&&chunks.unshift(""):chunks=["",""],chunks.join(VALUE_PLACEHOLDER)),chunkNames:function(rawValues,prefix){var i,accumulator=[],rawValuesLength=rawValues.length;for(i=0;i<rawValuesLength;i++)accumulator.push("_"+prefix+"_"+i);return accumulator}(rawValues,prop)}}}),manifestAccumulator}function expandFormattedProperties(stateObject,formatManifests){Tweenable.each(formatManifests,function(prop){for(var currentProp=stateObject[prop],rawValues=getValuesFrom(currentProp),rawValuesLength=rawValues.length,i=0;i<rawValuesLength;i++)stateObject[formatManifests[prop].chunkNames[i]]=+rawValues[i];delete stateObject[prop]})}function collapseFormattedProperties(stateObject,formatManifests){Tweenable.each(formatManifests,function(prop){var currentProp=stateObject[prop],formatChunks=function(stateObject,chunkNames){for(var currentChunkName,extractedValues={},chunkNamesLength=chunkNames.length,i=0;i<chunkNamesLength;i++)currentChunkName=chunkNames[i],extractedValues[currentChunkName]=stateObject[currentChunkName],delete stateObject[currentChunkName];return extractedValues}(stateObject,formatManifests[prop].chunkNames),valuesList=function(stateObject,chunkNames){getValuesList_accumulator.length=0;for(var chunkNamesLength=chunkNames.length,i=0;i<chunkNamesLength;i++)getValuesList_accumulator.push(stateObject[chunkNames[i]]);return getValuesList_accumulator}(formatChunks,formatManifests[prop].chunkNames);currentProp=function(formatString,rawValues){for(var formattedValueString=formatString,rawValuesLength=rawValues.length,i=0;i<rawValuesLength;i++)formattedValueString=formattedValueString.replace(VALUE_PLACEHOLDER,+rawValues[i].toFixed(4));return formattedValueString}(formatManifests[prop].formatString,valuesList),stateObject[prop]=filterStringChunks(R_RGB,currentProp,sanitizeRGBChunk)})}var getValuesList_accumulator=[];function getValuesFrom(formattedString){return formattedString.match(R_UNFORMATTED_VALUES)}Tweenable.prototype.filter.token={tweenCreated:function(currentState,fromState,toState,easingObject){sanitizeObjectForHexProps(currentState),sanitizeObjectForHexProps(fromState),sanitizeObjectForHexProps(toState),this._tokenData=getFormatManifests(currentState)},beforeTween:function(currentState,fromState,toState,easingObject){!function(easingObject,tokenData){Tweenable.each(tokenData,function(prop){var i,currentProp=tokenData[prop],chunkNames=currentProp.chunkNames,chunkLength=chunkNames.length,easing=easingObject[prop];if("string"==typeof easing){var easingChunks=easing.split(" "),lastEasingChunk=easingChunks[easingChunks.length-1];for(i=0;i<chunkLength;i++)easingObject[chunkNames[i]]=easingChunks[i]||lastEasingChunk}else for(i=0;i<chunkLength;i++)easingObject[chunkNames[i]]=easing;delete easingObject[prop]})}(easingObject,this._tokenData),expandFormattedProperties(currentState,this._tokenData),expandFormattedProperties(fromState,this._tokenData),expandFormattedProperties(toState,this._tokenData)},afterTween:function(currentState,fromState,toState,easingObject){collapseFormattedProperties(currentState,this._tokenData),collapseFormattedProperties(fromState,this._tokenData),collapseFormattedProperties(toState,this._tokenData),function(easingObject,tokenData){Tweenable.each(tokenData,function(prop){var currentProp=tokenData[prop],chunkNames=currentProp.chunkNames,chunkLength=chunkNames.length,firstEasing=easingObject[chunkNames[0]],typeofEasings=typeof firstEasing;if("string"===typeofEasings){for(var composedEasingString="",i=0;i<chunkLength;i++)composedEasingString+=" "+easingObject[chunkNames[i]],delete easingObject[chunkNames[i]];easingObject[prop]=composedEasingString.substr(1)}else easingObject[prop]=firstEasing})}(easingObject,this._tokenData)}}}(Tweenable)}).call(null)},{}],2:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Circle=function(container,options){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,Shape.apply(this,arguments)};((Circle.prototype=new Shape).constructor=Circle).prototype._pathString=function(opts){var widthOfWider=opts.strokeWidth;opts.trailWidth&&opts.trailWidth>opts.strokeWidth&&(widthOfWider=opts.trailWidth);var r=50-widthOfWider/2;return utils.render(this._pathTemplate,{radius:r,"2radius":2*r})},Circle.prototype._trailString=function(opts){return this._pathString(opts)},module.exports=Circle},{"./shape":7,"./utils":9}],3:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Line=function(container,options){this._pathTemplate="M 0,{center} L 100,{center}",Shape.apply(this,arguments)};((Line.prototype=new Shape).constructor=Line).prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 "+opts.strokeWidth),svg.setAttribute("preserveAspectRatio","none")},Line.prototype._pathString=function(opts){return utils.render(this._pathTemplate,{center:opts.strokeWidth/2})},Line.prototype._trailString=function(opts){return this._pathString(opts)},module.exports=Line},{"./shape":7,"./utils":9}],4:[function(require,module,exports){module.exports={Line:require("./line"),Circle:require("./circle"),SemiCircle:require("./semicircle"),Square:require("./square"),Path:require("./path"),Shape:require("./shape"),utils:require("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(require,module,exports){var Tweenable=require("shifty"),utils=require("./utils"),EASING_ALIASES={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},Path=function Path(path,opts){if(!(this instanceof Path))throw new Error("Constructor was called without new keyword");var element;opts=utils.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},opts),element=utils.isString(path)?document.querySelector(path):path,this.path=element,this._opts=opts,this._tweenable=null;var length=this.path.getTotalLength();this.path.style.strokeDasharray=length+" "+length,this.set(0)};Path.prototype.value=function(){var offset=this._getComputedDashOffset(),length=this.path.getTotalLength(),progress=1-offset/length;return parseFloat(progress.toFixed(6),10)},Path.prototype.set=function(progress){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(progress);var step=this._opts.step;if(utils.isFunction(step)){var easing=this._easing(this._opts.easing),values=this._calculateTo(progress,easing),reference=this._opts.shape||this;step(values,reference,this._opts.attachment)}},Path.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},Path.prototype.animate=function(progress,opts,cb){opts=opts||{},utils.isFunction(opts)&&(cb=opts,opts={});var passedOpts=utils.extend({},opts),defaultOpts=utils.extend({},this._opts);opts=utils.extend(defaultOpts,opts);var shiftyEasing=this._easing(opts.easing),values=this._resolveFromAndTo(progress,shiftyEasing,passedOpts);this.stop(),this.path.getBoundingClientRect();var offset=this._getComputedDashOffset(),newOffset=this._progressToOffset(progress),self=this;this._tweenable=new Tweenable,this._tweenable.tween({from:utils.extend({offset:offset},values.from),to:utils.extend({offset:newOffset},values.to),duration:opts.duration,easing:shiftyEasing,step:function(state){self.path.style.strokeDashoffset=state.offset;var reference=opts.shape||self;opts.step(state,reference,opts.attachment)},finish:function(state){utils.isFunction(cb)&&cb()}})},Path.prototype._getComputedDashOffset=function(){var computedStyle=window.getComputedStyle(this.path,null);return parseFloat(computedStyle.getPropertyValue("stroke-dashoffset"),10)},Path.prototype._progressToOffset=function(progress){var length=this.path.getTotalLength();return length-progress*length},Path.prototype._resolveFromAndTo=function(progress,easing,opts){return opts.from&&opts.to?{from:opts.from,to:opts.to}:{from:this._calculateFrom(easing),to:this._calculateTo(progress,easing)}},Path.prototype._calculateFrom=function(easing){return Tweenable.interpolate(this._opts.from,this._opts.to,this.value(),easing)},Path.prototype._calculateTo=function(progress,easing){return Tweenable.interpolate(this._opts.from,this._opts.to,progress,easing)},Path.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},Path.prototype._easing=function(easing){return EASING_ALIASES.hasOwnProperty(easing)?EASING_ALIASES[easing]:easing},module.exports=Path},{"./utils":9,shifty:1}],6:[function(require,module,exports){var Shape=require("./shape"),Circle=require("./circle"),utils=require("./utils"),SemiCircle=function(container,options){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,Shape.apply(this,arguments)};((SemiCircle.prototype=new Shape).constructor=SemiCircle).prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 50")},SemiCircle.prototype._initializeTextContainer=function(opts,container,textContainer){opts.text.style&&(textContainer.style.top="auto",textContainer.style.bottom="0",opts.text.alignToBottom?utils.setStyle(textContainer,"transform","translate(-50%, 0)"):utils.setStyle(textContainer,"transform","translate(-50%, 50%)"))},SemiCircle.prototype._pathString=Circle.prototype._pathString,SemiCircle.prototype._trailString=Circle.prototype._trailString,module.exports=SemiCircle},{"./circle":2,"./shape":7,"./utils":9}],7:[function(require,module,exports){var Path=require("./path"),utils=require("./utils"),Shape=function Shape(container,opts){if(!(this instanceof Shape))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=utils.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},opts,!0),utils.isObject(opts)&&void 0!==opts.svgStyle&&(this._opts.svgStyle=opts.svgStyle),utils.isObject(opts)&&utils.isObject(opts.text)&&void 0!==opts.text.style&&(this._opts.text.style=opts.text.style);var element,svgView=this._createSvgView(this._opts);if(!(element=utils.isString(container)?document.querySelector(container):container))throw new Error("Container does not exist: "+container);this._container=element,this._container.appendChild(svgView.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&utils.setStyles(svgView.svg,this._opts.svgStyle),this.svg=svgView.svg,this.path=svgView.path,this.trail=svgView.trail,this.text=null;var newOpts=utils.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new Path(svgView.path,newOpts),utils.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};Shape.prototype.animate=function(progress,opts,cb){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.animate(progress,opts,cb)},Shape.prototype.stop=function(){if(null===this._progressPath)throw new Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()},Shape.prototype.destroy=function(){if(null===this._progressPath)throw new Error("Object is destroyed");this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},Shape.prototype.set=function(progress){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.set(progress)},Shape.prototype.value=function(){if(null===this._progressPath)throw new Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()},Shape.prototype.setText=function(newText){if(null===this._progressPath)throw new Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),utils.isObject(newText)?(utils.removeChildren(this.text),this.text.appendChild(newText)):this.text.innerHTML=newText},Shape.prototype._createSvgView=function(opts){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(svg,opts);var trailPath=null;(opts.trailColor||opts.trailWidth)&&(trailPath=this._createTrail(opts),svg.appendChild(trailPath));var path=this._createPath(opts);return svg.appendChild(path),{svg:svg,path:path,trail:trailPath}},Shape.prototype._initializeSvg=function(svg,opts){svg.setAttribute("viewBox","0 0 100 100")},Shape.prototype._createPath=function(opts){var pathString=this._pathString(opts);return this._createPathElement(pathString,opts)},Shape.prototype._createTrail=function(opts){var pathString=this._trailString(opts),newOpts=utils.extend({},opts);return newOpts.trailColor||(newOpts.trailColor="#eee"),newOpts.trailWidth||(newOpts.trailWidth=newOpts.strokeWidth),newOpts.color=newOpts.trailColor,newOpts.strokeWidth=newOpts.trailWidth,newOpts.fill=null,this._createPathElement(pathString,newOpts)},Shape.prototype._createPathElement=function(pathString,opts){var path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d",pathString),path.setAttribute("stroke",opts.color),path.setAttribute("stroke-width",opts.strokeWidth),opts.fill?path.setAttribute("fill",opts.fill):path.setAttribute("fill-opacity","0"),path},Shape.prototype._createTextContainer=function(opts,container){var textContainer=document.createElement("div");textContainer.className=opts.text.className;var textStyle=opts.text.style;return textStyle&&(opts.text.autoStyleContainer&&(container.style.position="relative"),utils.setStyles(textContainer,textStyle),textStyle.color||(textContainer.style.color=opts.color)),this._initializeTextContainer(opts,container,textContainer),textContainer},Shape.prototype._initializeTextContainer=function(opts,container,element){},Shape.prototype._pathString=function(opts){throw new Error("Override this function for each progress bar")},Shape.prototype._trailString=function(opts){throw new Error("Override this function for each progress bar")},Shape.prototype._warnContainerAspectRatio=function(container){if(this.containerAspectRatio){var computedStyle=window.getComputedStyle(container,null),width=parseFloat(computedStyle.getPropertyValue("width"),10),height=parseFloat(computedStyle.getPropertyValue("height"),10);utils.floatEquals(this.containerAspectRatio,width/height)||(console.warn("Incorrect aspect ratio of container","#"+container.id,"detected:",computedStyle.getPropertyValue("width")+"(width)","/",computedStyle.getPropertyValue("height")+"(height)","=",width/height),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},module.exports=Shape},{"./path":5,"./utils":9}],8:[function(require,module,exports){var Shape=require("./shape"),utils=require("./utils"),Square=function(container,options){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",Shape.apply(this,arguments)};((Square.prototype=new Shape).constructor=Square).prototype._pathString=function(opts){var w=100-opts.strokeWidth/2;return utils.render(this._pathTemplate,{width:w,strokeWidth:opts.strokeWidth,halfOfStrokeWidth:opts.strokeWidth/2})},Square.prototype._trailString=function(opts){var w=100-opts.strokeWidth/2;return utils.render(this._trailTemplate,{width:w,strokeWidth:opts.strokeWidth,halfOfStrokeWidth:opts.strokeWidth/2,startMargin:opts.strokeWidth/2-opts.trailWidth/2})},module.exports=Square},{"./shape":7,"./utils":9}],9:[function(require,module,exports){var PREFIXES="Webkit Moz O ms".split(" ");function setStyle(element,style,value){for(var elStyle=element.style,i=0;i<PREFIXES.length;++i){var prefix=PREFIXES[i];elStyle[prefix+capitalize(style)]=value}elStyle[style]=value}function capitalize(text){return text.charAt(0).toUpperCase()+text.slice(1)}function isObject(obj){if(function(obj){return"[object Array]"===Object.prototype.toString.call(obj)}(obj))return!1;var type=typeof obj;return"object"===type&&!!obj}function forEachObject(object,callback){for(var key in object)if(object.hasOwnProperty(key)){var val=object[key];callback(val,key)}}module.exports={extend:function extend(destination,source,recursive){for(var attrName in destination=destination||{},recursive=recursive||!1,source=source||{})if(source.hasOwnProperty(attrName)){var destVal=destination[attrName],sourceVal=source[attrName];recursive&&isObject(destVal)&&isObject(sourceVal)?destination[attrName]=extend(destVal,sourceVal,recursive):destination[attrName]=sourceVal}return destination},render:function(template,vars){var rendered=template;for(var key in vars)if(vars.hasOwnProperty(key)){var val=vars[key],regExpString="\\{"+key+"\\}",regExp=new RegExp(regExpString,"g");rendered=rendered.replace(regExp,val)}return rendered},setStyle:setStyle,setStyles:function(element,styles){forEachObject(styles,function(styleValue,styleName){null!=styleValue&&(isObject(styleValue)&&!0===styleValue.prefix?setStyle(element,styleName,styleValue.value):element.style[styleName]=styleValue)})},capitalize:capitalize,isString:function(obj){return"string"==typeof obj||obj instanceof String},isFunction:function(obj){return"function"==typeof obj},isObject:isObject,forEachObject:forEachObject,floatEquals:function(a,b){return Math.abs(a-b)<.001},removeChildren:function(el){for(;el.firstChild;)el.removeChild(el.firstChild)}}},{}]},{},[4])(4)});var SplashLoader=function(){function SplashLoader(options){this.circleLoader=null,this.loaded=!1,this.showPlayButton="undefined"==typeof playBtn||playBtn,this.progress=0,this.options={gameId:"12346",gameTitle:"Place Holder",gameName:"place-holder",libs:[],version:"dev",barColor:"white"},this.options.gameId=options.gameId,this.options.gameTitle=options.gameTitle,this.options.version=options.version,this.options.barColor=options.barColor?options.barColor:this.options.barColor,this.options.libs=options.libs}return SplashLoader.getInstance=function(options){if(!SplashLoader.instance){if(!options)throw new Error("Can not create new SplashLoader instance without options!");SplashLoader.instance=new SplashLoader(options)}return SplashLoader.instance},SplashLoader.prototype.create=function(){return __awaiter(this,void 0,void 0,function(){var css,html,head,style,container,body;return __generator(this,function(_a){switch(_a.label){case 0:return css="\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n        \n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n        \n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n        \n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n        \n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n            \n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n       \n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n            \n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n            \n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n        \n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        ",gameLogo=this.getGameLogoUrl(this.options.gameId),gameTitle=this.options.gameTitle,html='\n        <div id="h5branding-background"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="'+gameLogo+'" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">'+gameTitle+"</div>\n    ",head=document.head||document.getElementsByTagName("head")[0],(style=document.createElement("style")).type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),(container=document.createElement("div")).innerHTML=html,container.id="h5branding-container",(body=document.body||document.getElementsByTagName("body")[0]).insertBefore(container,body.firstChild),this.circleLoader=new progressbar.Circle("#h5branding-bar",{strokeWidth:3,color:this.options.barColor}),[4,Promise.all([this.loadBranding(),this.loadLibs(),GoogleAnalytics.preload()])];case 1:return _a.sent(),this.loaded=!0,[2]}var gameLogo,gameTitle})})},SplashLoader.prototype.loadBranding=function(){return __awaiter(this,void 0,void 0,function(){var background,logoContainer,logo;return __generator(this,function(_a){switch(_a.label){case 0:return[4,Branding$$1.preload(Date.now().toString())];case 1:return _a.sent(),(background=document.getElementById("h5branding-background"))&&(background.style.backgroundImage="url("+this.getGameLogoUrl(this.options.gameId)+")",background.style.backgroundColor=Branding$$1.brandingBackgroundColor),(logoContainer=document.getElementById("h5branding-logo"))&&Utils.getBrandingDomain()!==exports.BrandingDomain.Neutral&&((logo=document.createElement("img")).src=Branding$$1.brandingLogoUrl.replace("_small",""),logoContainer.appendChild(logo)),[2]}})})},SplashLoader.prototype.loadLibs=function(){var _this=this,scripts=this.options.libs.map(function(url,index){return Loader.instance.loadScript(url,!0,function(){_this.setScriptloadProgress(scripts.length,index+1)})});return Promise.all(scripts)},Object.defineProperty(SplashLoader.prototype,"bannerAllowed",{get:function(){var width=document.body.clientWidth,height=document.body.clientHeight;return this.progress<100&&!(height<width&&height<=460)&&!(width<600&&height<850)},enumerable:!0,configurable:!0}),SplashLoader.prototype.showBanner=function(){if(!this.bannerAllowed)return null;var banner=document.getElementById("h5branding-ad");return banner?(banner.style.display="inline-flex",banner):null},SplashLoader.prototype.setScriptloadProgress=function(maxScripts,increment){var progress=.3*increment/maxScripts;this.circleLoader.animate(progress,null,function(){})},SplashLoader.prototype.setLoadProgress=function(progress){var _this=this;if(this.loaded)if(progress=30+.7*progress,100===(this.progress=progress)){var button_1=document.querySelector("#h5branding-button");this.circleLoader.animate(1,null,function(){!Utils.inGDGameZone()&&button_1&&!0===_this.showPlayButton?button_1.style.display="block":(Utils.inGDGameZone()||!1===_this.showPlayButton)&&_this.onPlayButtonClick()})}else this.circleLoader.animate(progress/100,null,function(){})},SplashLoader.prototype.setButtonCallback=function(cb){this.buttonCallback=cb},SplashLoader.prototype.onPlayButtonClick=function(){this.buttonCallback&&this.buttonCallback()},SplashLoader.prototype.destroy=function(){var element=document.querySelector("#h5branding-container");null!==element&&null!==element.parentNode&&element.parentNode.removeChild(element)},SplashLoader.prototype.getGameLogoUrl=function(gameId){var imagePath=gameId+"-512x512.jpeg";return window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/"+imagePath:"https://img.gamedistribution.com/"+imagePath},SplashLoader}(),EGAProgressionStatus$1=GameAnalytics_node.EGAProgressionStatus,google=new GoogleAnalytics,gameanalytics$1=new GameAnalytics$1;exports.EGAProgressionStatus=EGAProgressionStatus$1,exports.google=google,exports.gameanalytics=gameanalytics$1,exports.Utils=Utils,exports.Domain=Domain,exports.Branding=Branding$$1,exports.SplashLoader=SplashLoader,Object.defineProperty(exports,"__esModule",{value:!0})}),function(scope){var e,n,CryptoJS=CryptoJS||function(e,n){var t={},i=t.lib={},r=function(){},s=i.Base={extend:function(e){r.prototype=this;var n=new r;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),(n.init.prototype=n).$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var n=this.words,t=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)n[i+r>>>2]|=(t[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<t.length)for(r=0;r<e;r+=4)n[i+r>>>2]=t[r>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],i=0;i<n;i+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),a=t.enc={},u=a.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++){var r=n[i>>>2]>>>24-i%4*8&255;t.push((r>>>4).toString(16)),t.push((15&r).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i+=2)t[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(t,n/2)}},d=a.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++)t.push(String.fromCharCode(n[i>>>2]>>>24-i%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i++)t[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(t,n)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,i=t.words,r=t.sigBytes,s=this.blockSize,a=r/(4*s);if(n=(a=n?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,r=e.min(4*n,r),n){for(var u=0;u<n;u+=s)this._doProcessBlock(i,u);u=i.splice(0,n),t.sigBytes-=r}return new o.init(u,r)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=l.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new f.HMAC.init(e,t).finalize(n)}}});var f=t.algo={};return t}(Math);!function(e){for(var n=CryptoJS,i=(t=n.lib).WordArray,r=t.Hasher,t=n.algo,s=[],o=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,d=0;d<64;){var c;e:{c=u;for(var l=e.sqrt(c),f=2;f<=l;f++)if(!(c%f)){c=!1;break e}c=!0}c&&(d<8&&(s[d]=a(e.pow(u,.5))),o[d]=a(e.pow(u,1/3)),d++),u++}var v=[];t=t.SHA256=r.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,i=t[0],r=t[1],s=t[2],a=t[3],u=t[4],d=t[5],c=t[6],l=t[7],f=0;f<64;f++){if(f<16)v[f]=0|e[n+f];else{var g=v[f-15],m=v[f-2];v[f]=((g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3)+v[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+v[f-16]}g=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&d^~u&c)+o[f]+v[f],m=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&s^r&s),l=c,c=d,d=u,u=a+g|0,a=s,s=r,r=i,i=g+m|0}t[0]=t[0]+i|0,t[1]=t[1]+r|0,t[2]=t[2]+s|0,t[3]=t[3]+a|0,t[4]=t[4]+u|0,t[5]=t[5]+d|0,t[6]=t[6]+c|0,t[7]=t[7]+l|0},_doFinalize:function(){var n=this._data,t=n.words,i=8*this._nDataBytes,r=8*n.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=e.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(t),n.HmacSHA256=r._createHmacHelper(t)}(Math),n=(e=CryptoJS).enc.Utf8,e.algo.HMAC=e.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,u=o.words,d=0;d<i;d++)a[d]^=1549556828,u[d]^=909522486;s.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}}),function(){var e=CryptoJS,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<t;r+=3)for(var s=(n[r>>>2]>>>24-r%4*8&255)<<16|(n[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|n[r+2>>>2]>>>24-(r+2)%4*8&255,o=0;o<4&&r+.75*o<t;o++)e.push(i.charAt(s>>>6*(3-o)&63));if(n=i.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var t=e.length,i=this._map;(r=i.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],s=0,o=0;o<t;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,u=i.indexOf(e.charAt(o))>>>6-o%4*2;r[s>>>2]|=(a|u)<<24-s%4*8,s++}return n.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"}(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Male=1]="Male",e[e.Female=2]="Female"}(e.EGAGender||(e.EGAGender={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Rejected=1]="Rejected"}(e.EGASdkErrorType||(e.EGASdkErrorType={})),function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={}))}(gameanalytics||(gameanalytics={}));var gameanalytics;gameanalytics.EGAErrorSeverity,gameanalytics.EGAGender,gameanalytics.EGAProgressionStatus,gameanalytics.EGAResourceFlowType;!function(e){!function(e){var n;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(n||(n={}));var t=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(n){e.instance.infoLogEnabled=n},e.setVerboseLog=function(n){e.instance.infoLogVerboseEnabled=n},e.i=function(t){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.w=function(t){var i="Warning/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Warning)},e.e=function(t){var i="Error/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Error)},e.ii=function(t){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.d=function(t){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Debug)}},e.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:console.error(e);break;case n.Warning:console.warn(e);break;case n.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case n.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=t}(e.logging||(e.logging={}))}(gameanalytics||(gameanalytics={})),function(e){var n,t,i;n=e.utilities||(e.utilities={}),t=e.logging.GALogger,i=function(){function e(){}return e.getHmac=function(e,n){var t=CryptoJS.HmacSHA256(n,e);return CryptoJS.enc.Base64.stringify(t)},e.stringMatch=function(e,n){return!(!e||!n)&&n.test(e)},e.joinStringArray=function(e,n){for(var t="",i=0,r=e.length;i<r;i++)0<i&&(t+=n),t+=e[i];return t},e.stringArrayContainsString=function(e,n){if(0===e.length)return!1;for(var t in e)if(e[t]===n)return!0;return!1},e.encode64=function(n){n=encodeURI(n);for(var t,i,r,s,o,a="",u=0,d=0,c=0;r=(t=n.charCodeAt(c++))>>2,s=(3&t)<<4|(i=n.charCodeAt(c++))>>4,o=(15&i)<<2|(u=n.charCodeAt(c++))>>6,d=63&u,isNaN(i)?o=d=64:isNaN(u)&&(d=64),a=a+e.keyStr.charAt(r)+e.keyStr.charAt(s)+e.keyStr.charAt(o)+e.keyStr.charAt(d),t=i=u=0,r=s=o=d=0,c<n.length;);return a},e.decode64=function(n){var i,r,o,a,u="",d=0,c=0,l=0;for(/[^A-Za-z0-9\+\/\=]/g.exec(n)&&t.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i=e.keyStr.indexOf(n.charAt(l++))<<2|(o=e.keyStr.indexOf(n.charAt(l++)))>>4,r=(15&o)<<4|(a=e.keyStr.indexOf(n.charAt(l++)))>>2,d=(3&a)<<6|(c=e.keyStr.indexOf(n.charAt(l++))),u+=String.fromCharCode(i),64!=a&&(u+=String.fromCharCode(r)),64!=c&&(u+=String.fromCharCode(d)),i=r=d=0,o=a=c=0,l<n.length;);return decodeURI(u)},e.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},e.createGuid=function(){return(e.s4()+e.s4()+"-"+e.s4()+"-4"+e.s4().substr(0,3)+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()).toLowerCase()},e.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}(),n.GAUtilities=i}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r,s;n=e.validators||(e.validators={}),t=e.logging.GALogger,i=e.http.EGASdkErrorType,r=e.utilities.GAUtilities,s=function(){function n(){}return n.validateBusinessEvent=function(e,i,r,s,o){return n.validateCurrency(e)?i<0?(t.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),!1):n.validateShortString(r,!0)?n.validateEventPartLength(s,!1)?n.validateEventPartCharacters(s)?n.validateEventPartLength(o,!1)?!!n.validateEventPartCharacters(o)||(t.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1):(t.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+o),!1):(t.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1):(t.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+s),!1):(t.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+r),!1):(t.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},n.validateResourceEvent=function(i,s,o,a,u,d,c){return i==e.EGAResourceFlowType.Undefined?(t.w("Validation fail - resource event - flowType: Invalid flow type."),!1):s?r.stringArrayContainsString(d,s)?0<o?a?n.validateEventPartLength(a,!1)?n.validateEventPartCharacters(a)?r.stringArrayContainsString(c,a)?n.validateEventPartLength(u,!1)?!!n.validateEventPartCharacters(u)||(t.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),!1):(t.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+u),!1):(t.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(t.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+o),!1):(t.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+s),!1):(t.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},n.validateProgressionEvent=function(i,r,s,o){if(i==e.EGAProgressionStatus.Undefined)return t.w("Validation fail - progression event: Invalid progression status."),!1;if(o&&!s&&r)return t.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(s&&!r)return t.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!r)return t.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!n.validateEventPartLength(r,!1))return t.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+r),!1;if(!n.validateEventPartCharacters(r))return t.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1;if(s){if(!n.validateEventPartLength(s,!0))return t.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+s),!1;if(!n.validateEventPartCharacters(s))return t.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1}if(o){if(!n.validateEventPartLength(o,!0))return t.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+o),!1;if(!n.validateEventPartCharacters(o))return t.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1}return!0},n.validateDesignEvent=function(e,i){return n.validateEventIdLength(e)?!!n.validateEventIdCharacters(e)||(t.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(t.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},n.validateErrorEvent=function(i,r){return i==e.EGAErrorSeverity.Undefined?(t.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!n.validateLongString(r,!0)||(t.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},n.validateSdkErrorEvent=function(e,r,s){return!(!n.validateKeys(e,r)||s===i.Undefined&&(t.w("Validation fail - sdk error event - type: Type was unsupported value."),1))},n.validateKeys=function(e,n){return!(!r.stringMatch(e,/^[A-z0-9]{32}$/)||!r.stringMatch(n,/^[A-z0-9]{40}$/))},n.validateCurrency=function(e){return!!e&&!!r.stringMatch(e,/^[A-Z]{3}$/)},n.validateEventPartLength=function(e,n){return!(!n||e)||!!e&&!(64<e.length)},n.validateEventPartCharacters=function(e){return!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},n.validateEventIdLength=function(e){return!!e&&!!r.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},n.validateEventIdCharacters=function(e){return!!e&&!!r.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},n.validateAndCleanInitRequestResponse=function(e){if(null==e)return t.w("validateInitRequestResponse failed - no response dictionary."),null;var n={};try{n.enabled=e.enabled}catch(e){return t.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=e.server_ts;if(!(0<i))return t.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;n.server_ts=i}catch(n){return t.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+n),null}try{var r=e.configurations;n.configurations=r}catch(n){return t.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof e.configurations+", value="+e.configurations+", "+n),null}return n},n.validateBuild=function(e){return!!n.validateShortString(e,!1)},n.validateSdkWrapperVersion=function(e){return!!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},n.validateEngineVersion=function(e){return!(!e||!r.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},n.validateUserId=function(e){return!!n.validateString(e,!1)||(t.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},n.validateShortString=function(e,n){return!(!n||e)||!(!e||32<e.length)},n.validateString=function(e,n){return!(!n||e)||!(!e||64<e.length)},n.validateLongString=function(e,n){return!(!n||e)||!(!e||8192<e.length)},n.validateConnectionType=function(e){return r.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},n.validateCustomDimensions=function(e){return n.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},n.validateResourceCurrencies=function(e){if(!n.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!r.stringMatch(e[i],/^[A-Za-z]+$/))return t.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},n.validateResourceItemTypes=function(e){if(!n.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!n.validateEventPartCharacters(e[i]))return t.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},n.validateDimension01=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateDimension02=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateDimension03=function(e,n){return!e||!!r.stringArrayContainsString(n,e)},n.validateArrayOfStrings=function(e,n,i,r,s){var o=r;if(o||(o="Array"),!s)return t.w(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==s.length)return t.w(o+" validation failed: array cannot be empty. "),!1;if(0<e&&s.length>e)return t.w(o+" validation failed: array cannot exceed "+e+" values. It has "+s.length+" values."),!1;for(var a=0;a<s.length;++a){var u=s[a]?s[a].length:0;if(0===u)return t.w(o+" validation failed: contained an empty string. Array="+JSON.stringify(s)),!1;if(0<n&&n<u)return t.w(o+" validation failed: a string exceeded max allowed length (which is: "+n+"). String was: "+s[a]),!1}return!0},n.validateFacebookId=function(e){return!!n.validateString(e,!1)||(t.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},n.validateGender=function(n){if(isNaN(Number(e.EGAGender[n]))){if(n==e.EGAGender.Undefined||n!=e.EGAGender.Male&&n!=e.EGAGender.Female)return t.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1}else if(n==e.EGAGender[e.EGAGender.Undefined]||n!=e.EGAGender[e.EGAGender.Male]&&n!=e.EGAGender[e.EGAGender.Female])return t.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1;return!0},n.validateBirthyear=function(e){return!(e<0||9999<e)||(t.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},n.validateClientTs=function(e){return!(e<-4294967294||4294967294<e)},n}(),n.GAValidator=s}(gameanalytics||(gameanalytics={})),function(e){!function(e){var n=function(e,n,t){this.name=e,this.value=n,this.version=t};e.NameValueVersion=n;var t=function(e,n){this.name=e,this.version=n};e.NameVersion=t;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){e.connectionType=navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?"wwan":"lan":"offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var n,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((n=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(n=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return n.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var r=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(n=t.match(/version\/(\d+)/i))&&r.splice(1,1,n[1]),r.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,n){var r,s,o,a,u=new t("unknown","0.0.0"),d=0,c=0;for(d=0;d<n.length;d+=1)if(new RegExp(n[d].value,"i").test(e)){if(r=new RegExp(n[d].version+"[- /:;]([\\d._]+)","i"),a="",(s=e.match(r))&&s[1]&&(o=s[1]),o){var l=o.split(/[._]+/);for(c=0;c<Math.min(l.length,3);c+=1)a+=l[c]+(c<Math.min(l.length,3)-1?".":"")}else a="0.0.0";return u.name=n[d].name,u.version=a,u}return u},e.sdkWrapperVersion="javascript 3.1.2",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new n("windows_phone","Windows Phone","OS"),new n("windows","Win","NT"),new n("ios","iPhone","OS"),new n("ios","iPad","OS"),new n("ios","iPod","OS"),new n("android","Android","Android"),new n("blackBerry","BlackBerry","/"),new n("mac_osx","Mac","OS X"),new n("tizen","Tizen","Tizen"),new n("linux","Linux","rv")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e.maxSafeInteger=Math.pow(2,53)-1,e}();e.GADevice=i}(e.device||(e.device={}))}(gameanalytics||(gameanalytics={})),function(e){!function(e){var n=function(){function e(n){this.deadline=n,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=n}(e.threading||(e.threading={}))}(gameanalytics||(gameanalytics={})),function(e){!function(e){var n=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,n){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(n)},e.prototype.addQueueOfPriority=function(e){var n=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return n.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return 0<this._sortedKeys.length},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],n=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),n},e}();e.PriorityQueue=n}(e.threading||(e.threading={}))}(gameanalytics||(gameanalytics={})),function(e){!function(n){var t,r,i=e.logging.GALogger;!function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"}(t=n.EGAStoreArgsOperator||(n.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(r=n.EGAStore||(n.EGAStore={}));var s=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{e.storageAvailable="object"==typeof localStorage&&(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),!0)}catch(e){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(n,i,r,s){void 0===i&&(i=[]),void 0===r&&(r=!1),void 0===s&&(s=0);var o=e.getStore(n);if(!o)return null;for(var a=[],u=0;u<o.length;++u){for(var d=o[u],c=!0,l=0;l<i.length;++l){var f=i[l];if(d[f[0]])switch(f[1]){case t.Equal:c=d[f[0]]==f[2];break;case t.LessOrEqual:c=d[f[0]]<=f[2];break;case t.NotEqual:c=d[f[0]]!=f[2];break;default:c=!1}else c=!1;if(!c)break}c&&a.push(d)}return r&&a.sort(function(e,n){return e.client_ts-n.client_ts}),0<s&&a.length>s&&(a=a.slice(0,s+1)),a},e.update=function(n,i,r){void 0===r&&(r=[]);var s=e.getStore(n);if(!s)return!1;for(var o=0;o<s.length;++o){for(var a=s[o],u=!0,d=0;d<r.length;++d){var c=r[d];if(a[c[0]])switch(c[1]){case t.Equal:u=a[c[0]]==c[2];break;case t.LessOrEqual:u=a[c[0]]<=c[2];break;case t.NotEqual:u=a[c[0]]!=c[2];break;default:u=!1}else u=!1;if(!u)break}if(u)for(d=0;d<i.length;++d){var l=i[d];a[l[0]]=l[1]}}return!0},e.delete=function(n,i){var r=e.getStore(n);if(r)for(var s=0;s<r.length;++s){for(var o=r[s],a=!0,u=0;u<i.length;++u){var d=i[u];if(o[d[0]])switch(d[1]){case t.Equal:a=o[d[0]]==d[2];break;case t.LessOrEqual:a=o[d[0]]<=d[2];break;case t.NotEqual:a=o[d[0]]!=d[2];break;default:a=!1}else a=!1;if(!a)break}a&&(r.splice(s,1),--s)}},e.insert=function(n,t,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);var s=e.getStore(n);if(s)if(i){if(!r)return;for(var o=!1,a=0;a<s.length;++a){var u=s[a];if(u[r]==t[r]){for(var d in t)u[d]=t[d];o=!0;break}}o||s.push(t)}else s.push(t)},e.save=function(){e.isStorageAvailable()?(localStorage.setItem(e.KeyPrefix+e.EventsStoreKey,JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.KeyPrefix+e.SessionsStoreKey,JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.KeyPrefix+e.ProgressionStoreKey,JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.KeyPrefix+e.ItemsStoreKey,JSON.stringify(e.instance.storeItems))):i.w("Storage is not available, cannot save.")},e.load=function(){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.EventsStoreKey)),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){i.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.SessionsStoreKey)),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){i.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ProgressionStoreKey)),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){i.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ItemsStoreKey)),e.instance.storeItems||(e.instance.storeItems={})}catch(n){i.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else i.w("Storage is not available, cannot load.")},e.setItem=function(n,t){var i=e.KeyPrefix+n;t?e.instance.storeItems[i]=t:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(n){var t=e.KeyPrefix+n;return t in e.instance.storeItems?e.instance.storeItems[t]:null},e.getStore=function(n){switch(n){case r.Events:return e.instance.eventsStore;case r.Sessions:return e.instance.sessionsStore;case r.Progression:return e.instance.progressionStore;default:return i.w("GAStore.getStore(): Cannot find store: "+n),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.KeyPrefix="GA::",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();n.GAStore=s}(e.store||(e.store={}))}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r,s,o,a,u,d;n=e.state||(e.state={}),t=e.validators.GAValidator,i=e.utilities.GAUtilities,r=e.logging.GALogger,s=e.store.GAStore,o=e.device.GADevice,a=e.store.EGAStore,u=e.store.EGAStoreArgsOperator,d=function(){function n(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return n.setUserId=function(e){n.instance.userId=e,n.cacheIdentifier()},n.getIdentifier=function(){return n.instance.identifier},n.isInitialized=function(){return n.instance.initialized},n.setInitialized=function(e){n.instance.initialized=e},n.getSessionStart=function(){return n.instance.sessionStart},n.getSessionNum=function(){return n.instance.sessionNum},n.getTransactionNum=function(){return n.instance.transactionNum},n.getSessionId=function(){return n.instance.sessionId},n.getCurrentCustomDimension01=function(){return n.instance.currentCustomDimension01},n.getCurrentCustomDimension02=function(){return n.instance.currentCustomDimension02},n.getCurrentCustomDimension03=function(){return n.instance.currentCustomDimension03},n.getGameKey=function(){return n.instance.gameKey},n.getGameSecret=function(){return n.instance.gameSecret},n.getAvailableCustomDimensions01=function(){return n.instance.availableCustomDimensions01},n.setAvailableCustomDimensions01=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions01=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom01 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions02=function(){return n.instance.availableCustomDimensions02},n.setAvailableCustomDimensions02=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions02=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom02 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions03=function(){return n.instance.availableCustomDimensions03},n.setAvailableCustomDimensions03=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions03=e,n.validateAndFixCurrentDimensions(),r.i("Set available custom03 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceCurrencies=function(){return n.instance.availableResourceCurrencies},n.setAvailableResourceCurrencies=function(e){t.validateResourceCurrencies(e)&&(n.instance.availableResourceCurrencies=e,r.i("Set available resource currencies: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceItemTypes=function(){return n.instance.availableResourceItemTypes},n.setAvailableResourceItemTypes=function(e){t.validateResourceItemTypes(e)&&(n.instance.availableResourceItemTypes=e,r.i("Set available resource item types: ("+i.joinStringArray(e,", ")+")"))},n.getBuild=function(){return n.instance.build},n.setBuild=function(e){n.instance.build=e,r.i("Set build version: "+e)},n.getUseManualSessionHandling=function(){return n.instance.useManualSessionHandling},n.isEventSubmissionEnabled=function(){return n.instance._isEventSubmissionEnabled},n.prototype.setDefaultId=function(e){this.defaultUserId=e||"",n.cacheIdentifier()},n.getDefaultId=function(){return n.instance.defaultUserId},n.getSdkConfig=function(){var t=0;for(var i in n.instance.sdkConfig)0===t&&(e=i),++t;if(e&&0<t)return n.instance.sdkConfig;var e;t=0;for(var i in n.instance.sdkConfigCached)0===t&&(e=i),++t;return e&&0<t?n.instance.sdkConfigCached:n.instance.sdkConfigDefault},n.isEnabled=function(){var e=n.getSdkConfig();return!(e.enabled&&"false"==e.enabled||!n.instance.initAuthorized)},n.setCustomDimension01=function(e){n.instance.currentCustomDimension01=e,s.setItem(n.Dimension01Key,e),r.i("Set custom01 dimension value: "+e)},n.setCustomDimension02=function(e){n.instance.currentCustomDimension02=e,s.setItem(n.Dimension02Key,e),r.i("Set custom02 dimension value: "+e)},n.setCustomDimension03=function(e){n.instance.currentCustomDimension03=e,s.setItem(n.Dimension03Key,e),r.i("Set custom03 dimension value: "+e)},n.setFacebookId=function(e){n.instance.facebookId=e,s.setItem(n.FacebookIdKey,e),r.i("Set facebook id: "+e)},n.setGender=function(t){n.instance.gender=isNaN(Number(e.EGAGender[t]))?e.EGAGender[t].toString().toLowerCase():e.EGAGender[e.EGAGender[t]].toString().toLowerCase(),s.setItem(n.GenderKey,n.instance.gender),r.i("Set gender: "+n.instance.gender)},n.setBirthYear=function(e){n.instance.birthYear=e,s.setItem(n.BirthYearKey,e.toString()),r.i("Set birth year: "+e)},n.incrementSessionNum=function(){var e=n.getSessionNum()+1;n.instance.sessionNum=e},n.incrementTransactionNum=function(){var e=n.getTransactionNum()+1;n.instance.transactionNum=e},n.incrementProgressionTries=function(e){var t=n.getProgressionTries(e)+1;n.instance.progressionTries[e]=t;var i={};i.progression=e,i.tries=t,s.insert(a.Progression,i,!0,"progression")},n.getProgressionTries=function(e){return e in n.instance.progressionTries?n.instance.progressionTries[e]:0},n.clearProgressionTries=function(e){e in n.instance.progressionTries&&delete n.instance.progressionTries[e];var t=[];t.push(["progression",u.Equal,e]),s.delete(a.Progression,t)},n.setKeys=function(e,t){n.instance.gameKey=e,n.instance.gameSecret=t},n.setManualSessionHandling=function(e){n.instance.useManualSessionHandling=e,r.i("Use manual session handling: "+e)},n.setEnabledEventSubmission=function(e){n.instance._isEventSubmissionEnabled=e},n.getEventAnnotations=function(){var e={v:2};e.user_id=n.instance.identifier,e.client_ts=n.getClientTsAdjusted(),e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.browser_version=o.browserVersion,e.platform=o.buildPlatform,e.session_id=n.instance.sessionId,e[n.SessionNumKey]=n.instance.sessionNum;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),n.instance.build&&(e.build=n.instance.build),n.instance.facebookId&&(e[n.FacebookIdKey]=n.instance.facebookId),n.instance.gender&&(e[n.GenderKey]=n.instance.gender),0!=n.instance.birthYear&&(e[n.BirthYearKey]=n.instance.birthYear),e},n.getSdkErrorEventAnnotations=function(){var e={v:2};e.category=n.CategorySdkError,e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.platform=o.buildPlatform;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),e},n.getInitAnnotations=function(){var e={};return e.user_id=n.getIdentifier(),e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.platform=o.buildPlatform,e},n.getClientTsAdjusted=function(){var e=i.timeIntervalSince1970(),r=e+n.instance.clientServerTimeOffset;return t.validateClientTs(r)?r:e},n.sessionIsStarted=function(){return 0!=n.instance.sessionStart},n.cacheIdentifier=function(){n.instance.userId?n.instance.identifier=n.instance.userId:n.instance.defaultUserId&&(n.instance.identifier=n.instance.defaultUserId)},n.ensurePersistedStates=function(){s.isStorageAvailable()&&s.load();var e=n.instance;e.setDefaultId(null!=s.getItem(n.DefaultUserIdKey)?s.getItem(n.DefaultUserIdKey):i.createGuid()),e.sessionNum=null!=s.getItem(n.SessionNumKey)?Number(s.getItem(n.SessionNumKey)):0,e.transactionNum=null!=s.getItem(n.TransactionNumKey)?Number(s.getItem(n.TransactionNumKey)):0,e.facebookId?s.setItem(n.FacebookIdKey,e.facebookId):(e.facebookId=null!=s.getItem(n.FacebookIdKey)?s.getItem(n.FacebookIdKey):"",e.facebookId),e.gender?s.setItem(n.GenderKey,e.gender):(e.gender=null!=s.getItem(n.GenderKey)?s.getItem(n.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?s.setItem(n.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=s.getItem(n.BirthYearKey)?Number(s.getItem(n.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?s.setItem(n.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=s.getItem(n.Dimension01Key)?s.getItem(n.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?s.setItem(n.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=s.getItem(n.Dimension02Key)?s.getItem(n.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?s.setItem(n.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=s.getItem(n.Dimension03Key)?s.getItem(n.Dimension03Key):"",e.currentCustomDimension03);var t=null!=s.getItem(n.SdkConfigCachedKey)?s.getItem(n.SdkConfigCachedKey):"";if(t){var r=JSON.parse(i.decode64(t));r&&(e.sdkConfigCached=r)}var o=s.select(a.Progression);if(o)for(var u=0;u<o.length;++u){var d=o[u];d&&(e.progressionTries[d.progression]=d.tries)}},n.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},n.validateAndCleanCustomFields=function(e){var t={};if(e){var s=0;for(var o in e){var a=e[o];if(o&&a)if(s<n.MAX_CUSTOM_FIELDS_COUNT){var u=new RegExp("^[a-zA-Z0-9_]{1,"+n.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(o,u)){var d=typeof a;if("string"===d||a instanceof String){var c=a;c.length<=n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&0<c.length?(t[o]=c,++s):r.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its value is an empty string or exceeds the max number of characters ("+n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===d||a instanceof Number){var l=a;t[o]=l,++s}else r.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its value is not a string or number")}else r.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+n.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else r.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because it exceeds the max number of custom fields ("+n.MAX_CUSTOM_FIELDS_COUNT+")");else r.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its key or value is null")}}return t},n.validateAndFixCurrentDimensions=function(){t.validateDimension01(n.getCurrentCustomDimension01(),n.getAvailableCustomDimensions01())||n.setCustomDimension01(""),t.validateDimension02(n.getCurrentCustomDimension02(),n.getAvailableCustomDimensions02())||n.setCustomDimension02(""),t.validateDimension03(n.getCurrentCustomDimension03(),n.getAvailableCustomDimensions03())||n.setCustomDimension03("")},n.getConfigurationStringValue=function(e,t){return n.instance.configurations[e]?n.instance.configurations[e].toString():t},n.isCommandCenterReady=function(){return n.instance.commandCenterIsReady},n.addCommandCenterListener=function(e){n.instance.commandCenterListeners.indexOf(e)<0&&n.instance.commandCenterListeners.push(e)},n.removeCommandCenterListener=function(e){var t=n.instance.commandCenterListeners.indexOf(e);-1<t&&n.instance.commandCenterListeners.splice(t,1)},n.getConfigurationsContentAsString=function(){return JSON.stringify(n.instance.configurations)},n.populateConfigurations=function(e){var t=e.configurations;if(t)for(var i=0;i<t.length;++i){var r=t[i];if(r){var s=r.key,o=r.value,a=r.start?r.start:Number.MIN_VALUE,u=r.end?r.end:Number.MAX_VALUE,d=n.getClientTsAdjusted();s&&o&&a<d&&d<u&&(n.instance.configurations[s]=o)}}n.instance.commandCenterIsReady=!0;var c=n.instance.commandCenterListeners;for(i=0;i<c.length;++i)c[i]&&c[i].onCommandCenterUpdated()},n.CategorySdkError="sdk_error",n.MAX_CUSTOM_FIELDS_COUNT=50,n.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,n.instance=new n,n.DefaultUserIdKey="default_user_id",n.SessionNumKey="session_num",n.TransactionNumKey="transaction_num",n.FacebookIdKey="facebook_id",n.GenderKey="gender",n.BirthYearKey="birth_year",n.Dimension01Key="dimension01",n.Dimension02Key="dimension02",n.Dimension03Key="dimension03",n.SdkConfigCachedKey="sdk_config_cached",n}(),n.GAState=d}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r;n=e.tasks||(e.tasks={}),t=e.utilities.GAUtilities,i=e.logging.GALogger,r=function(){function e(){}return e.execute=function(n,r,s,o){if(e.countMap[r]||(e.countMap[r]=0),!(e.countMap[r]>=e.MaxCount)){var a=t.getHmac(o,s),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void i.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[r]=e.countMap[r]+1}},u.open("POST",n,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",a);try{u.send(s)}catch(e){console.error(e)}}},e.MaxCount=10,e.countMap={},e}(),n.SdkErrorTask=r}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r,s,o,a;n=e.http||(e.http={}),t=e.state.GAState,i=e.logging.GALogger,r=e.utilities.GAUtilities,s=e.validators.GAValidator,o=e.tasks.SdkErrorTask,a=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i){var r=t.getGameKey(),s=(this.baseUrl,this.initializeUrlPath);s="https://rubick.gameanalytics.com/v2/command_center?game_key="+r+"&interval_seconds=1000000";var o=t.getInitAnnotations(),a=JSON.stringify(o);if(a){var u=this.createPayloadData(a,this.useGzip),d=[];d.push(a),e.sendRequest(s,u,d,this.useGzip,e.initRequestCallback,i)}else i(n.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,r,s){if(0!=i.length){var o=t.getGameKey(),a=this.baseUrl+"/"+o+"/"+this.eventsUrlPath,u=JSON.stringify(i);if(!u)return void s(n.EGAHTTPApiResponse.JsonEncodeFailed,null,r,i.length);var d=this.createPayloadData(u,this.useGzip),c=[];c.push(u),c.push(r),c.push(i.length.toString()),e.sendRequest(a,d,c,this.useGzip,e.sendEventInArrayRequestCallback,s)}},e.prototype.sendSdkErrorEvent=function(n){if(t.isEventSubmissionEnabled()){var r=t.getGameKey(),a=t.getGameSecret();if(s.validateSdkErrorEvent(r,a,n)){var d,u=this.baseUrl+"/"+r+"/"+this.eventsUrlPath,c=t.getSdkErrorEventAnnotations(),l=e.sdkErrorTypeToString(n);c.type=l;var f=[];if(f.push(c),!(d=JSON.stringify(f)))return void i.w("sendSdkErrorEvent: JSON encoding failed.");o.execute(u,n,d,a)}}},e.sendEventInArrayRequestCallback=function(t,i,r,s){void 0===s&&(s=null);var u,d,o=(s[0],s[1],s[2]),a=parseInt(s[3]);u=t.responseText,d=t.status;var c=e.instance.processRequestResponse(d,t.statusText,u,"Events");if(c==n.EGAHTTPApiResponse.Ok||c==n.EGAHTTPApiResponse.BadRequest){var l=u?JSON.parse(u):{};null!=l?(n.EGAHTTPApiResponse.BadRequest,r(c,l,o,a)):r(n.EGAHTTPApiResponse.JsonDecodeFailed,null,o,a)}else r(c,null,o,a)},e.sendRequest=function(e,n,i,s,o,a){var u=new XMLHttpRequest,d=t.getGameSecret(),c=r.getHmac(d,n),l=[];for(var f in l.push(c),i)l.push(i[f]);if(u.onreadystatechange=function(){4===u.readyState&&o(u,e,a,l)},u.open("POST",e,!0),u.setRequestHeader("Content-Type","text/plain"),u.setRequestHeader("Authorization",c),s)throw new Error("gzip not supported");try{u.send(n)}catch(e){console.error(e.stack)}},e.initRequestCallback=function(t,i,r,o){void 0===o&&(o=null);var u,a=(o[0],o[1]);a=t.responseText,u=t.status;var d=a?JSON.parse(a):{},c=e.instance.processRequestResponse(u,t.statusText,a,"Init");if(c==n.EGAHTTPApiResponse.Ok||c==n.EGAHTTPApiResponse.BadRequest)if(null!=d)if(c!==n.EGAHTTPApiResponse.BadRequest){var l=s.validateAndCleanInitRequestResponse(d);l?r(n.EGAHTTPApiResponse.Ok,l,"",0):r(n.EGAHTTPApiResponse.BadResponse,null,"",0)}else r(c,null,"",0);else r(n.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else r(c,null,"",0)},e.prototype.createPayloadData=function(e,n){if(n)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,t,i,r){return i?200===e?n.EGAHTTPApiResponse.Ok:0===e||401===e?n.EGAHTTPApiResponse.Unauthorized:400===e?n.EGAHTTPApiResponse.BadRequest:500===e?n.EGAHTTPApiResponse.InternalServerError:n.EGAHTTPApiResponse.UnknownResponseCode:n.EGAHTTPApiResponse.NoResponse},e.sdkErrorTypeToString=function(e){switch(e){case n.EGASdkErrorType.Rejected:return"rejected";default:return""}},e.instance=new e,e}(),n.GAHTTPApi=a}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r,s,o,a,u,d,c,l,f;n=e.events||(e.events={}),t=e.store.GAStore,i=e.store.EGAStore,r=e.store.EGAStoreArgsOperator,s=e.state.GAState,o=e.logging.GALogger,a=e.utilities.GAUtilities,u=e.http.EGAHTTPApiResponse,d=e.http.GAHTTPApi,c=e.validators.GAValidator,l=e.http.EGASdkErrorType,f=function(){function n(){}return n.addSessionStartEvent=function(){if(s.isEventSubmissionEnabled()){var e={};e.category=n.CategorySessionStart,s.incrementSessionNum(),t.setItem(s.SessionNumKey,s.getSessionNum().toString()),n.addDimensionsToEvent(e),n.addEventToStore(e),o.i("Add SESSION START event"),n.processEvents(n.CategorySessionStart,!1)}},n.addSessionEndEvent=function(){if(s.isEventSubmissionEnabled()){var e=s.getSessionStart(),i=s.getClientTsAdjusted()-e;i<0&&(o.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),i=0);var r={};r.category=n.CategorySessionEnd,r.length=i,n.addDimensionsToEvent(r),n.addEventToStore(r),o.i("Add SESSION END event."),n.processEvents("",!1)}},n.addBusinessEvent=function(e,i,r,a,u,f){if(void 0===u&&(u=null),s.isEventSubmissionEnabled()){if(!c.validateBusinessEvent(e,i,u,r,a))return void d.instance.sendSdkErrorEvent(l.Rejected);var v={};s.incrementTransactionNum(),t.setItem(s.TransactionNumKey,s.getTransactionNum().toString()),v.event_id=r+":"+a,v.category=n.CategoryBusiness,v.currency=e,v.amount=i,v[s.TransactionNumKey]=s.getTransactionNum(),u&&(v.cart_type=u),n.addDimensionsToEvent(v),n.addFieldsToEvent(v,s.validateAndCleanCustomFields(f)),o.i("Add BUSINESS event: {currency:"+e+", amount:"+i+", itemType:"+r+", itemId:"+a+", cartType:"+u+"}"),n.addEventToStore(v)}},n.addResourceEvent=function(t,i,r,a,u,f){if(s.isEventSubmissionEnabled()){if(!c.validateResourceEvent(t,i,r,a,u,s.getAvailableResourceCurrencies(),s.getAvailableResourceItemTypes()))return void d.instance.sendSdkErrorEvent(l.Rejected);t===e.EGAResourceFlowType.Sink&&(r*=-1);var v={},g=n.resourceFlowTypeToString(t);v.event_id=g+":"+i+":"+a+":"+u,v.category=n.CategoryResource,v.amount=r,n.addDimensionsToEvent(v),n.addFieldsToEvent(v,s.validateAndCleanCustomFields(f)),o.i("Add RESOURCE event: {currency:"+i+", amount:"+r+", itemType:"+a+", itemId:"+u+"}"),n.addEventToStore(v)}},n.addProgressionEvent=function(t,i,r,a,u,f,v){if(s.isEventSubmissionEnabled()){var g=n.progressionStatusToString(t);if(!c.validateProgressionEvent(t,i,r,a))return void d.instance.sendSdkErrorEvent(l.Rejected);var m,p={};m=r?a?i+":"+r+":"+a:i+":"+r:i,p.category=n.CategoryProgression,p.event_id=g+":"+m;var h=0;f&&t!=e.EGAProgressionStatus.Start&&(p.score=u),t===e.EGAProgressionStatus.Fail&&s.incrementProgressionTries(m),t===e.EGAProgressionStatus.Complete&&(s.incrementProgressionTries(m),h=s.getProgressionTries(m),p.attempt_num=h,s.clearProgressionTries(m)),n.addDimensionsToEvent(p),n.addFieldsToEvent(p,s.validateAndCleanCustomFields(v)),o.i("Add PROGRESSION event: {status:"+g+", progression01:"+i+", progression02:"+r+", progression03:"+a+", score:"+u+", attempt:"+h+"}"),n.addEventToStore(p)}},n.addDesignEvent=function(e,t,i,r){if(s.isEventSubmissionEnabled()){if(!c.validateDesignEvent(e,t))return void d.instance.sendSdkErrorEvent(l.Rejected);var a={};a.category=n.CategoryDesign,a.event_id=e,i&&(a.value=t),n.addDimensionsToEvent(a),n.addFieldsToEvent(a,s.validateAndCleanCustomFields(r)),o.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),n.addEventToStore(a)}},n.addErrorEvent=function(e,t,i){if(s.isEventSubmissionEnabled()){var r=n.errorSeverityToString(e);if(!c.validateErrorEvent(e,t))return void d.instance.sendSdkErrorEvent(l.Rejected);var a={};a.category=n.CategoryError,a.severity=r,a.message=t,n.addDimensionsToEvent(a),n.addFieldsToEvent(a,s.validateAndCleanCustomFields(i)),o.i("Add ERROR event: {severity:"+r+", message:"+t+"}"),n.addEventToStore(a)}},n.processEvents=function(e,u){if(s.isEventSubmissionEnabled())try{var c=a.createGuid();u&&(n.cleanupEvents(),n.fixMissingSessionEndEvents());var l=[];l.push(["status",r.Equal,"new"]);var f=[];f.push(["status",r.Equal,"new"]),e&&(l.push(["category",r.Equal,e]),f.push(["category",r.Equal,e]));var v=[];v.push(["status",c]);var g=t.select(i.Events,l);if(!g||0==g.length)return o.i("Event queue: No events to send"),void n.updateSessionStore();if(g.length>n.MaxEventCount){if(!(g=t.select(i.Events,l,!0,n.MaxEventCount)))return;var p=g[g.length-1].client_ts;if(l.push(["client_ts",r.LessOrEqual,p]),!(g=t.select(i.Events,l)))return;f.push(["client_ts",r.LessOrEqual,p])}if(o.i("Event queue: Sending "+g.length+" events."),!t.update(i.Events,v,f))return;for(var h=[],S=0;S<g.length;++S){var y=g[S],E=JSON.parse(a.decode64(y.event));0!=E.length&&h.push(E)}d.instance.sendEventsInArray(h,c,n.processEventsCallback)}catch(e){o.e("Error during ProcessEvents(): "+e.stack)}},n.processEventsCallback=function(e,n,s,a){var d=[];if(d.push(["status",r.Equal,s]),e===u.Ok)t.delete(i.Events,d),o.i("Event queue: "+a+" events sent.");else if(e===u.NoResponse){var c=[];c.push(["status","new"]),o.w("Event queue: Failed to send events to collector - Retrying next time"),t.update(i.Events,c,d)}else{if(n){var l,f=0;for(var v in n)0==f&&(l=n[v]),++f;e===u.BadRequest&&l.constructor===Array?o.w("Event queue: "+a+" events sent. "+f+" events failed GA server validation."):o.w("Event queue: Failed to send events.")}else o.w("Event queue: Failed to send events.");t.delete(i.Events,d)}},n.cleanupEvents=function(){t.update(i.Events,[["status","new"]])},n.fixMissingSessionEndEvents=function(){if(s.isEventSubmissionEnabled()){var e=[];e.push(["session_id",r.NotEqual,s.getSessionId()]);var u=t.select(i.Sessions,e);if(u&&0!=u.length){o.i(u.length+" session(s) located with missing session_end event.");for(var d=0;d<u.length;++d){var c=JSON.parse(a.decode64(u[d].event)),v=c.client_ts-u[d].timestamp;v=Math.max(0,v),c.category=n.CategorySessionEnd,c.length=v,n.addEventToStore(c)}}}},n.addEventToStore=function(e){if(s.isEventSubmissionEnabled()){if(!s.isInitialized())return void o.w("Could not add event: SDK is not initialized");try{if(t.isStoreTooLargeForEvents()&&!a.stringMatch(e.category,/^(user|session_end|business)$/))return void o.w("Database too large. Event has been blocked.");var u=s.getEventAnnotations(),d=a.encode64(JSON.stringify(u));for(var c in e)u[c]=e[c];var l=JSON.stringify(u);o.ii("Event added to queue: "+l);var f={status:"new"};f.category=u.category,f.session_id=u.session_id,f.client_ts=u.client_ts,f.event=a.encode64(JSON.stringify(u)),t.insert(i.Events,f),e.category==n.CategorySessionEnd?t.delete(i.Sessions,[["session_id",r.Equal,u.session_id]]):((f={}).session_id=u.session_id,f.timestamp=s.getSessionStart(),f.event=d,t.insert(i.Sessions,f,!0,"session_id")),t.isStorageAvailable()&&t.save()}catch(c){o.e("addEventToStore: error"),o.e(c.stack)}}},n.updateSessionStore=function(){if(s.sessionIsStarted()){var e={};e.session_id=s.instance.sessionId,e.timestamp=s.getSessionStart(),e.event=a.encode64(JSON.stringify(s.getEventAnnotations())),t.insert(i.Sessions,e,!0,"session_id"),t.isStorageAvailable()&&t.save()}},n.addDimensionsToEvent=function(e){e&&(s.getCurrentCustomDimension01()&&(e.custom_01=s.getCurrentCustomDimension01()),s.getCurrentCustomDimension02()&&(e.custom_02=s.getCurrentCustomDimension02()),s.getCurrentCustomDimension03()&&(e.custom_03=s.getCurrentCustomDimension03()))},n.addFieldsToEvent=function(e,n){e&&n&&0<Object.keys(n).length&&(e.custom_fields=n)},n.resourceFlowTypeToString=function(n){return n==e.EGAResourceFlowType.Source||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":n==e.EGAResourceFlowType.Sink||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},n.progressionStatusToString=function(n){return n==e.EGAProgressionStatus.Start||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":n==e.EGAProgressionStatus.Complete||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":n==e.EGAProgressionStatus.Fail||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},n.errorSeverityToString=function(n){return n==e.EGAErrorSeverity.Debug||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":n==e.EGAErrorSeverity.Info||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":n==e.EGAErrorSeverity.Warning||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":n==e.EGAErrorSeverity.Error||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":n==e.EGAErrorSeverity.Critical||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},n.instance=new n,n.CategorySessionStart="user",n.CategorySessionEnd="session_end",n.CategoryDesign="design",n.CategoryBusiness="business",n.CategoryProgression="progression",n.CategoryResource="resource",n.CategoryError="error",n.MaxEventCount=500,n}(),n.GAEvents=f}(gameanalytics||(gameanalytics={})),function(e){var n,t,i,r,s;n=e.threading||(e.threading={}),t=e.logging.GALogger,i=e.state.GAState,r=e.events.GAEvents,s=function(){function e(){this.blocks=new n.PriorityQueue({compare:function(e,n){return e-n}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new n.TimedBlock(t)},e.performTaskOnGAThread=function(t,i){void 0===i&&(i=0);var r=new Date;r.setSeconds(r.getSeconds()+i);var s=new n.TimedBlock(r);s.block=t,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s)},e.performTimedBlockOnGAThread=function(n){e.instance.id2TimedBlockMap[n.id]=n,e.instance.addTimedBlock(n)},e.scheduleTimer=function(t,i){var r=new Date;r.setSeconds(r.getSeconds()+t);var s=new n.TimedBlock(r);return s.block=i,e.instance.id2TimedBlockMap[s.id]=s,e.instance.addTimedBlock(s),s.id},e.getTimedBlockById=function(n){return n in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[n]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(t.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(r.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(n){n in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[n].ignore=!0)},e.setEventProcessInterval=function(n){0<n&&(e.ProcessEventsIntervalInSeconds=n)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var n;n=e.getNextBlock();)if(!n.ignore)if(n.async){if(!n.running){n.running=!0,n.block();break}}else n.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(e){t.e("Error on GA thread"),t.e(e.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var n=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=n.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){r.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}(),n.GAThreading=s}(gameanalytics||(gameanalytics={})),function(e){var n=e.threading.GAThreading,t=e.logging.GALogger,i=e.store.GAStore,r=e.state.GAState,s=e.http.GAHTTPApi,o=e.device.GADevice,a=e.validators.GAValidator,u=e.http.EGAHTTPApiResponse,d=e.utilities.GAUtilities,c=e.events.GAEvents,l=function(){function l(){}return l.init=function(){if(o.touch(),l.methodMap.configureAvailableCustomDimensions01=l.configureAvailableCustomDimensions01,l.methodMap.configureAvailableCustomDimensions02=l.configureAvailableCustomDimensions02,l.methodMap.configureAvailableCustomDimensions03=l.configureAvailableCustomDimensions03,l.methodMap.configureAvailableResourceCurrencies=l.configureAvailableResourceCurrencies,l.methodMap.configureAvailableResourceItemTypes=l.configureAvailableResourceItemTypes,l.methodMap.configureBuild=l.configureBuild,l.methodMap.configureSdkGameEngineVersion=l.configureSdkGameEngineVersion,l.methodMap.configureGameEngineVersion=l.configureGameEngineVersion,l.methodMap.configureUserId=l.configureUserId,l.methodMap.initialize=l.initialize,l.methodMap.addBusinessEvent=l.addBusinessEvent,l.methodMap.addResourceEvent=l.addResourceEvent,l.methodMap.addProgressionEvent=l.addProgressionEvent,l.methodMap.addDesignEvent=l.addDesignEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.setEnabledInfoLog=l.setEnabledInfoLog,l.methodMap.setEnabledVerboseLog=l.setEnabledVerboseLog,l.methodMap.setEnabledManualSessionHandling=l.setEnabledManualSessionHandling,l.methodMap.setEnabledEventSubmission=l.setEnabledEventSubmission,l.methodMap.setCustomDimension01=l.setCustomDimension01,l.methodMap.setCustomDimension02=l.setCustomDimension02,l.methodMap.setCustomDimension03=l.setCustomDimension03,l.methodMap.setFacebookId=l.setFacebookId,l.methodMap.setGender=l.setGender,l.methodMap.setBirthYear=l.setBirthYear,l.methodMap.setEventProcessInterval=l.setEventProcessInterval,l.methodMap.startSession=l.startSession,l.methodMap.endSession=l.endSession,l.methodMap.onStop=l.onStop,l.methodMap.onResume=l.onResume,l.methodMap.addCommandCenterListener=l.addCommandCenterListener,l.methodMap.removeCommandCenterListener=l.removeCommandCenterListener,l.methodMap.getCommandCenterValueAsString=l.getCommandCenterValueAsString,l.methodMap.isCommandCenterReady=l.isCommandCenterReady,l.methodMap.getConfigurationsContentAsString=l.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var n in e)l.gaCommand.apply(null,e[n])}},l.gaCommand=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];0<n.length&&n[0]in e.GameAnalytics.methodMap&&(1<n.length?e.GameAnalytics.methodMap[n[0]].apply(null,Array.prototype.slice.call(n,1)):e.GameAnalytics.methodMap[n[0]]())},l.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions01(e)})},l.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions02(e)})},l.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):r.setAvailableCustomDimensions03(e)})},l.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available resource currencies must be set before SDK is initialized"):r.setAvailableResourceCurrencies(e)})},l.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available resource item types must be set before SDK is initialized"):r.setAvailableResourceItemTypes(e)})},l.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){return l.isSdkReady(!0,!1)?void t.w("Build version must be set before SDK is initialized."):a.validateBuild(e)?void r.setBuild(e):void t.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},l.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!l.isSdkReady(!0,!1))return a.validateSdkWrapperVersion(e)?void(o.sdkGameEngineVersion=e):void t.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e)})},l.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){if(!l.isSdkReady(!0,!1))return a.validateEngineVersion(e)?void(o.gameEngineVersion=e):void t.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e)})},l.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){return l.isSdkReady(!0,!1)?void t.w("A custom user id must be set before SDK is initialized."):a.validateUserId(e)?void r.setUserId(e):void t.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},l.initialize=function(e,i){void 0===e&&(e=""),void 0===i&&(i=""),o.updateConnectionType();var s=n.createTimedBlock();s.async=!0,l.initTimedBlockId=s.id,s.block=function(){return l.isSdkReady(!0,!1)?void t.w("SDK already initialized. Can only be called once."):a.validateKeys(e,i)?(r.setKeys(e,i),void l.internalInitialize()):void t.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+i)},n.performTimedBlockOnGAThread(s)},l.addBusinessEvent=function(e,t,i,r,s){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===r&&(r=""),void 0===s&&(s=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add business event")&&c.addBusinessEvent(e,t,i,r,s,{})})},l.addResourceEvent=function(t,i,r,s,a){void 0===t&&(t=e.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===r&&(r=0),void 0===s&&(s=""),void 0===a&&(a=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add resource event")&&c.addResourceEvent(t,i,r,s,a,{})})},l.addProgressionEvent=function(t,i,r,s,a){void 0===t&&(t=e.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===r&&(r=""),void 0===s&&(s=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add progression event")){var e="number"==typeof a;c.addProgressionEvent(t,i,r,s,e?a:0,e,{})}})},l.addDesignEvent=function(e,t){o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;c.addDesignEvent(e,n?t:0,n,{})}})},l.addErrorEvent=function(t,i){void 0===t&&(t=e.EGAErrorSeverity.Undefined),void 0===i&&(i=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add error event")&&c.addErrorEvent(t,i,{})})},l.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setInfoLog(e),t.i("Info logging enabled")):(t.i("Info logging disabled"),t.setInfoLog(e))})},l.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setVerboseLog(e),t.i("Verbose logging enabled")):(t.i("Verbose logging disabled"),t.setVerboseLog(e))})},l.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){r.setManualSessionHandling(e)})},l.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(r.setEnabledEventSubmission(e),t.i("Event submission enabled")):(t.i("Event submission disabled"),r.setEnabledEventSubmission(e))})},l.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension01(e,r.getAvailableCustomDimensions01())?r.setCustomDimension01(e):t.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},l.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension02(e,r.getAvailableCustomDimensions02())?r.setCustomDimension02(e):t.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},l.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension03(e,r.getAvailableCustomDimensions03())?r.setCustomDimension03(e):t.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},l.setFacebookId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateFacebookId(e)&&r.setFacebookId(e)})},l.setGender=function(t){void 0===t&&(t=e.EGAGender.Undefined),n.performTaskOnGAThread(function(){a.validateGender(t)&&r.setGender(t)})},l.setBirthYear=function(e){void 0===e&&(e=0),n.performTaskOnGAThread(function(){a.validateBirthyear(e)&&r.setBirthYear(e)})},l.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},l.startSession=function(){if(r.isInitialized()){var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){r.isEnabled()&&r.sessionIsStarted()&&n.endSessionAndStopQueue(),l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},l.endSession=function(){l.onStop()},l.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},l.onResume=function(){var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},l.getCommandCenterValueAsString=function(e,n){return void 0===n&&(n=null),r.getConfigurationStringValue(e,n)},l.isCommandCenterReady=function(){return r.isCommandCenterReady()},l.addCommandCenterListener=function(e){r.addCommandCenterListener(e)},l.removeCommandCenterListener=function(e){r.removeCommandCenterListener(e)},l.getConfigurationsContentAsString=function(){return r.getConfigurationsContentAsString()},l.internalInitialize=function(){r.ensurePersistedStates(),i.setItem(r.DefaultUserIdKey,r.getDefaultId()),r.setInitialized(!0),l.newSession(),r.isEnabled()&&n.ensureEventQueueIsRunning()},l.newSession=function(){t.i("Starting a new session."),r.validateAndFixCurrentDimensions(),s.instance.requestInit(l.startNewSessionCallback)},l.startNewSessionCallback=function(e,s){if(e===u.Ok&&s){var o=0;if(s.server_ts){var a=s.server_ts;o=r.calculateServerTimeOffset(a)}s.time_offset=o,i.setItem(r.SdkConfigCachedKey,d.encode64(JSON.stringify(s))),r.instance.sdkConfigCached=s,r.instance.sdkConfig=s,r.instance.initAuthorized=!0}else e==u.Unauthorized?(t.w("Initialize SDK failed - Unauthorized"),r.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?t.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?t.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||t.i("Init call (session start) failed - bad request or unknown response."),null==r.instance.sdkConfig?null!=r.instance.sdkConfigCached?(t.i("Init call (session start) failed - using cached init values."),r.instance.sdkConfig=r.instance.sdkConfigCached):(t.i("Init call (session start) failed - using default init values."),r.instance.sdkConfig=r.instance.sdkConfigDefault):t.i("Init call (session start) failed - using cached init values."),r.instance.initAuthorized=!0);if(r.instance.clientServerTimeOffset=r.getSdkConfig().time_offset?r.getSdkConfig().time_offset:0,r.populateConfigurations(r.getSdkConfig()),!r.isEnabled())return t.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var f=d.createGuid();r.instance.sessionId=f,r.instance.sessionStart=r.getClientTsAdjusted(),c.addSessionStartEvent();var v=n.getTimedBlockById(l.initTimedBlockId);null!=v&&(v.running=!1),l.initTimedBlockId=-1},l.resumeSessionAndStartQueue=function(){r.isInitialized()&&(t.i("Resuming session."),r.sessionIsStarted()||l.newSession())},l.isSdkReady=function(e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!r.isInitialized()?(n&&t.w(i+"SDK is not initialized"),!1):e&&!r.isEnabled()?(n&&t.w(i+"SDK is disabled"),!1):!(e&&!r.sessionIsStarted()&&(n&&t.w(i+"Session has not started yet"),1))},l.initTimedBlockId=-1,l.methodMap={},l}();e.GameAnalytics=l}(gameanalytics||(gameanalytics={})),gameanalytics.GameAnalytics.init();var GameAnalytics=gameanalytics.GameAnalytics.gaCommand;scope.gameanalytics=gameanalytics,scope.GameAnalytics=GameAnalytics}(this);var loaderHelper={show:function(){var loader=document.getElementById("loader");loader&&(loader.style.display="block")},hide:function(){var loader=document.getElementById("loader");loader&&(loader.style.display="none")}},flambe={FLASH_VERSION:"11",embed:function(k,w){"string"==typeof k&&(k=[k+"-flash.swf",k+"-html.js"]);var x=document.getElementById(w);if(null==x)throw Error("Could not find element [id="+w+"]");for(var r={},p=window.location.search.substr(1).split("&"),h=0;h<p.length;++h){var n=p[h].split("=");r[unescape(n[0])]=1<n.length?unescape(n[1]):null}for(p=r.flambe,h=0;h<k.length;++h)switch(r=k[h],(n=r.match(/\.(\w+)(\?|$)/))&&(n=n[1].toLowerCase()),n){case"swf":if((null==p||"flash"==p)&&swfobject.hasFlashPlayerVersion(flambe.FLASH_VERSION))return(h=document.createElement("div")).id=w+"-swf",x.appendChild(h),"undefined"==typeof $flambe_expose&&(window.$flambe_expose=function(h,n){window[h]=null!=n?function(){var k=document.getElementById(n);k[h].apply(k,arguments)}:null}),swfobject.embedSWF(r,h.id,"100%","100%",flambe.FLASH_VERSION,null,{},{allowScriptAccess:"always",allowFullScreen:"true",fullscreenOnSelection:"true",wmode:"direct"},{id:h.id,name:h.id}),!0;break;case"js":if((null==p||"html"==p)&&"getContext"in(n=document.createElement("canvas")))return n.id=w+"-canvas",x.appendChild(n),flambe.canvas=n,(h=document.createElement("script")).onload=function(){flambe.canvas=null},h.src=r,x.appendChild(h),!0;break;default:throw Error("Don't know how to embed [url="+r+"]")}return!1}},swfobject=function(){function k(){if(!y){try{(a=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"))).parentNode.removeChild(a)}catch(b){return}y=!0;for(var a=C.length,c=0;c<a;c++)C[c]()}}function w(a){y?a():C[C.length]=a}function x(a){if(typeof l.addEventListener!=j)l.addEventListener("load",a,!1);else if(typeof d.addEventListener!=j)d.addEventListener("load",a,!1);else if(typeof l.attachEvent!=j)!function(a,b,c){a.attachEvent(b,c),A[A.length]=[a,b,c]}(l,"onload",a);else if("function"==typeof l.onload){var b=l.onload;l.onload=function(){b(),a()}}else l.onload=a}function p(){var a=u.length;if(0<a)for(var b=0;b<a;b++){var c=u[b].id,f=u[b].callbackFn,g={success:!1,id:c};if(0<e.pv[0]){if(d=q(c))if(!E(u[b].swfVersion)||e.wk&&e.wk<312)if(u[b].expressInstall&&n()){(g={}).data=u[b].expressInstall,g.width=d.getAttribute("width")||"0",g.height=d.getAttribute("height")||"0",d.getAttribute("class")&&(g.styleclass=d.getAttribute("class")),d.getAttribute("align")&&(g.align=d.getAttribute("align"));for(var d,i={},o=(d=d.getElementsByTagName("param")).length,m=0;m<o;m++)"movie"!=d[m].getAttribute("name").toLowerCase()&&(i[d[m].getAttribute("name")]=d[m].getAttribute("value"));I(g,i,c,f)}else U(d),f&&f(g);else z(c,!0),f&&(g.success=!0,g.ref=h(c),f(g))}else z(c,!0),f&&((c=h(c))&&typeof c.SetVariable!=j&&(g.success=!0,g.ref=c),f(g))}}function h(a){var b=null;return(a=q(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=j?b=a:(a=a.getElementsByTagName(s)[0])&&(b=a)),b}function n(){return!F&&E("6.0.65")&&(e.win||e.mac)&&!(e.wk&&e.wk<312)}function I(a,b,c,f){K=f||null,N={success:!(F=!0),id:c};var g=q(c);g&&(G="OBJECT"==g.nodeName?(B=J(g),null):(B=g,c),a.id=O,(typeof a.width==j||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==j||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),d.title=d.title.slice(0,47)+" - Flash Player Installation",f=e.ie&&e.win?"ActiveX":"PlugIn",f="MMredirectURL="+l.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+d.title,b.flashvars=typeof b.flashvars!=j?b.flashvars+"&"+f:f,e.ie&&e.win&&4!=g.readyState&&(c+="SWFObjectNew",(f=d.createElement("div")).setAttribute("id",c),g.parentNode.insertBefore(f,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()),L(a,b,c))}function U(a){if(e.ie&&e.win&&4!=a.readyState){var b=d.createElement("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(J(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(J(a),a)}function J(a){var b=d.createElement("div");if(e.win&&e.ie)b.innerHTML=a.innerHTML;else if((a=a.getElementsByTagName(s)[0])&&(a=a.childNodes))for(var c=a.length,f=0;f<c;f++)(1!=a[f].nodeType||"PARAM"!=a[f].nodeName)&&8!=a[f].nodeType&&b.appendChild(a[f].cloneNode(!0));return b}function L(a,b,c){var f,g=q(c);if(e.wk&&e.wk<312)return f;if(g)if(typeof a.id==j&&(a.id=c),e.ie&&e.win){var i,h="";for(i in a)a[i]!=Object.prototype[i]&&("data"==i.toLowerCase()?b.movie=a[i]:"styleclass"==i.toLowerCase()?h+=' class="'+a[i]+'"':"classid"!=i.toLowerCase()&&(h+=" "+i+'="'+a[i]+'"'));for(var o in i="",b)b[o]!=Object.prototype[o]&&(i+='<param name="'+o+'" value="'+b[o]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+h+">"+i+"</object>",H[H.length]=a.id,f=q(a.id)}else{for(var m in(o=d.createElement(s)).setAttribute("type",D),a)a[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?o.setAttribute("class",a[m]):"classid"!=m.toLowerCase()&&o.setAttribute(m,a[m]));for(h in b)b[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&(a=o,m=b[i=h],(c=d.createElement("param")).setAttribute("name",i),c.setAttribute("value",m),a.appendChild(c));g.parentNode.replaceChild(o,g),f=o}return f}function P(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(e.ie&&e.win?(b.style.display="none",function(){if(4==b.readyState){var c=q(a);if(c){for(var f in c)"function"==typeof c[f]&&(c[f]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=null;try{b=d.getElementById(a)}catch(c){}return b}function E(a){var b=e.pv;return(a=a.split("."))[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||0,a[2]=parseInt(a[2],10)||0,b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]}function Q(a,b,c,f){if(!e.ie||!e.mac){var g=d.getElementsByTagName("head")[0];g&&(c=c&&"string"==typeof c?c:"screen",f&&(M=t=null),t&&M==c||((f=d.createElement("style")).setAttribute("type","text/css"),f.setAttribute("media",c),t=g.appendChild(f),e.ie&&e.win&&typeof d.styleSheets!=j&&0<d.styleSheets.length&&(t=d.styleSheets[d.styleSheets.length-1]),M=c),e.ie&&e.win?t&&typeof t.addRule==s&&t.addRule(a,b):t&&typeof d.createTextNode!=j&&t.appendChild(d.createTextNode(a+" {"+b+"}")))}}function z(a,b){if(R){var c=b?"visible":"hidden";y&&q(a)?q(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function S(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=j?encodeURIComponent(a):a}var B,G,K,N,t,M,j="undefined",s="object",D="application/x-shockwave-flash",O="SWFObjectExprInst",l=window,d=document,v=navigator,T=!1,C=[function(){T?function(){var a=d.getElementsByTagName("body")[0],b=d.createElement(s);b.setAttribute("type",D);var c=a.appendChild(b);if(c){var f=0;!function(){if(typeof c.GetVariable!=j){var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(f<10)return f++,setTimeout(arguments.callee,10);a.removeChild(b),c=null,p()}()}else p()}():p()}],u=[],H=[],A=[],y=!1,F=!1,R=!0,e=function(){var a=typeof d.getElementById!=j&&typeof d.getElementsByTagName!=j&&typeof d.createElement!=j,b=v.userAgent.toLowerCase(),c=v.platform.toLowerCase(),f=/win/.test(c||b),g=(c=/mac/.test(c||b),b=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),!1),e=[0,0,0],i=null;if(typeof v.plugins!=j&&typeof v.plugins["Shockwave Flash"]==s)!(i=v.plugins["Shockwave Flash"].description)||typeof v.mimeTypes!=j&&v.mimeTypes[D]&&!v.mimeTypes[D].enabledPlugin||(g=!(T=!0),i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),e[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof l.ActiveXObject!=j)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(i=h.GetVariable("$version"))&&(g=!0,i=i.split(" ")[1].split(","),e=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}catch(m){}return{w3:a,pv:e,wk:b,ie:g,win:f,mac:c}}();return e.w3&&((typeof d.readyState!=j&&"complete"==d.readyState||typeof d.readyState==j&&(d.getElementsByTagName("body")[0]||d.body))&&k(),y||(typeof d.addEventListener!=j&&d.addEventListener("DOMContentLoaded",k,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){"complete"==d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),k())}),l==top&&function(){if(!y){try{d.documentElement.doScroll("left")}catch(a){return setTimeout(arguments.callee,0)}k()}}()),e.wk&&function(){y||(/loaded|complete/.test(d.readyState)?k():setTimeout(arguments.callee,0))}(),x(k))),e.ie&&e.win&&window.attachEvent("onunload",function(){for(var a=A.length,b=0;b<a;b++)A[b][0].detachEvent(A[b][1],A[b][2]);for(a=H.length,b=0;b<a;b++)P(H[b]);for(var c in e)e[c]=null;for(var f in e=null,swfobject)swfobject[f]=null;swfobject=null}),{registerObject:function(a,b,c,f){if(e.w3&&a&&b){var d={};d.id=a,d.swfVersion=b,d.expressInstall=c,d.callbackFn=f,u[u.length]=d,z(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(e.w3)return h(a)},embedSWF:function(a,b,c,d,g,h,i,o,m,k){var p={success:!1,id:b};e.w3&&!(e.wk&&e.wk<312)&&a&&b&&c&&d&&g?(z(b,!1),w(function(){c+="",d+="";var e={};if(m&&typeof m===s)for(var l in m)e[l]=m[l];if(e.data=a,e.width=c,e.height=d,l={},o&&typeof o===s)for(var q in o)l[q]=o[q];if(i&&typeof i===s)for(var r in i)l.flashvars=typeof l.flashvars!=j?l.flashvars+"&"+r+"="+i[r]:r+"="+i[r];if(E(g))q=L(e,l,b),e.id==b&&z(b,!0),p.success=!0,p.ref=q;else{if(h&&n())return e.data=h,void I(e,l,b,k);z(b,!0)}k&&k(p)})):k&&k(p)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:E,createSWF:function(a,b,c){if(e.w3)return L(a,b,c)},showExpressInstall:function(a,b,c,d){e.w3&&n()&&I(a,b,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,b,c,d){e.w3&&Q(a,b,c,d)},addDomLoadEvent:w,addLoadEvent:x,getQueryParamValue:function(a){if(b=d.location.search||d.location.hash){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return S(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return S(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var a=q(O);a&&B&&(a.parentNode.replaceChild(B,a),G&&(z(G,!0),e.ie&&e.win&&(B.style.display="block")),K&&K(N)),F=!1}}}}();